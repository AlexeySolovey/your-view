var h=function(){function l(t,i){this.x=t,this.y=i}return l.prototype.Ja=function(t,i){this.x=t,this.y=i},l.prototype.gc=function(t,i,e){var h=i.y-t.y;this.x=t.x+(i.x-t.x)*e,this.y=t.y+h*e},l.prototype.bi=function(t,i,e,h,s){var a;(a=new l).gc(t,e,s),(t=new l).gc(e,h,s),(e=new l).gc(h,i,s),(i=new l).gc(a,t,s),(a=new l).gc(t,e,s),(t=new l).gc(i,a,s),this.x=t.x,this.y=t.y},l.prototype.ci=function(t,i,e,h,s){var a=new l,o=.5,r=.25;do{a.bi(t,i,e,h,o);var n=a.x-s;o=0<n?o-r:o+r,r=r/2}while(.01<Math.abs(n));this.x=a.x,this.y=a.y},l}(),x=function(){function t(t,i,e,h,s){this.x=t,this.y=i,this.z=e,this.$b=h,this.$a=s}return t.prototype.Ja=function(t,i,e,h,s){this.x=t,this.y=i,this.z=e,this.$b=h,this.$a=s},t.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.$b+","+this.$a+")"},t.prototype.oa=function(t){var i=Math.sin(t);t=Math.cos(t);var e=this.y,h=this.z;this.y=t*e-i*h,this.z=i*e+t*h},t.prototype.tj=function(){var t=this.y;this.y=-this.z,this.z=t},t.prototype.sj=function(){var t=this.y;this.y=this.z,this.z=-t},t.prototype.Aa=function(t){var i=Math.sin(t);t=Math.cos(t);var e=this.x,h=this.z;this.x=t*e+i*h,this.z=-i*e+t*h},t.prototype.uj=function(){var t=this.x;this.x=-this.z,this.z=t},t.prototype.Za=function(t){var i=Math.sin(t);t=Math.cos(t);var e=this.x,h=this.y;this.x=t*e-i*h,this.y=i*e+t*h},t.prototype.th=function(){var t=this.x;this.x=-this.y,this.y=t},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.$b,this.$a)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.He=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.sg=function(t,i){var e;e=Math.cos(i*Math.PI/180),this.x=e*Math.sin(t*Math.PI/180),this.y=Math.sin(i*Math.PI/180),this.z=e*Math.cos(t*Math.PI/180)},t.prototype.gc=function(t,i,e){this.x=t.x*e+i.x*(1-e),this.y=t.y*e+i.y*(1-e),this.z=t.z*e+i.z*(1-e),this.$b=t.$b*e+i.$b*(1-e),this.$a=t.$a*e+i.$a*(1-e)},t}();function A(){return"undefined"!=typeof Float32Array?new Float32Array(16):Array(16)}function D(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function F(t,i){var e=i[0],h=i[1];i=i[2],t[12]=t[0]*e+t[4]*h+t[8]*i+t[12],t[13]=t[1]*e+t[5]*h+t[9]*i+t[13],t[14]=t[2]*e+t[6]*h+t[10]*i+t[14],t[15]=t[3]*e+t[7]*h+t[11]*i+t[15]}function K(t,i,e){var h,s=e[0],a=e[1];if(e=e[2],l=Math.sqrt(s*s+a*a+e*e)){1!=l&&(s*=l=1/l,a*=l,e*=l);var o=Math.sin(i),r=Math.cos(i),n=1-r;i=t[0];var l=t[1],u=t[2],d=t[3],p=t[4],c=t[5],f=t[6],g=t[7],b=t[8],m=t[9],y=t[10],v=t[11],A=s*s*n+r,T=a*s*n+e*o,x=e*s*n-a*o,E=s*a*n-e*o,R=a*a*n+r,w=e*a*n+s*o,N=s*e*n+a*o;s=a*e*n-s*o,a=e*e*n+r;h?t!=h&&(h[12]=t[12],h[13]=t[13],h[14]=t[14],h[15]=t[15]):h=t,h[0]=i*A+p*T+b*x,h[1]=l*A+c*T+m*x,h[2]=u*A+f*T+y*x,h[3]=d*A+g*T+v*x,h[4]=i*E+p*R+b*w,h[5]=l*E+c*R+m*w,h[6]=u*E+f*R+y*w,h[7]=d*E+g*R+v*w,h[8]=i*N+p*s+b*a,h[9]=l*N+c*s+m*a,h[10]=u*N+f*s+y*a,h[11]=d*N+g*s+v*a}}function L(t,i,e){var h=-(i*=t=.1*Math.tan(t*Math.PI/360)),s=-t;e||(e=A());var a=i-h,o=t-s;e[0]=.2/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=.2/o,e[6]=0,e[7]=0,e[8]=(i+h)/a,e[9]=(t+s)/o,e[10]=-100.1/99.9,e[11]=-1,e[12]=0,e[13]=0,e[14]=-20/99.9,e[15]=0}function M(t,i){this.m=t,this.ka=i;var e,h,s,a=this.__div=document.createElement("div");s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWU",s+="ILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5",s+="o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWo",s+="IFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAA",s+="Mp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46",s+="KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CP",s+="rWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0oc",s+="pYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4y",s+="g2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC1",s+="6aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqW",s+="f2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zR",s+="DcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxy",s+="kl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66",s+="KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcom",s+="d9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGf",s+="LviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0l",s+="qXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxa",s+="ASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJR",s+="U5ErkJggg%3D%3D",(e=document.createElement("img")).setAttribute("src",s),e.setAttribute("style","position: absolute;top: -14px;left: -14px; "+t.sa+"user-select: none;"),e.ondragstart=function(){return!1},a.appendChild(e),s="position:absolute;"+t.sa+"user-select: none;",s+=t.sa+"touch-callout: none;",s+=t.sa+"tap-highlight-color: rgba(0,0,0,0);",t.Dc&&!t.ja&&(s+=t.sa+"transform: translateZ(9999999px);"),a.setAttribute("style",s),a.onclick=function(){t.cd(i),t.If(i.url,i.target)};var o=t.w.Xf;o.enabled&&(h=document.createElement("div"),s="position:absolute;top:\t 20px;",s=o.bf?s+"white-space: pre-wrap;":s+"white-space: nowrap;",s+=t.sa+"transform-origin: 50% 50%;",s+="visibility: hidden;",s+="overflow: hidden;",s+="padding: 0px 1px 0px 1px;",h.setAttribute("style",s),h.style.color=this.m.X(o.Yf,o.Wf),o.background?h.style.backgroundColor=this.m.X(o.mb,o.Nb):h.style.backgroundColor="transparent",h.style.border="solid "+this.m.X(o.ob,o.Ob)+" "+o.ff+"px",h.style.borderRadius=o.ef+"px",h.style.textAlign="center",0<o.width?(h.style.left=-o.width/2+"px",h.style.width=o.width+"px"):h.style.width="auto",h.style.height=0<o.height?o.height+"px":"auto",h.style.overflow="hidden",h.innerHTML=i.title,a.onmouseover=function(){0==o.width&&(h.style.left=-h.offsetWidth/2+"px"),h.style.visibility="inherit"},a.onmouseout=function(){h.style.visibility="hidden"},a.appendChild(h))}var N=function(){function t(t){this.m=t,this.enable=!1,this.fg=1,this.be=0,this.type="crossdissolve",this.Lb=this.Ba=this.Zb=0,this.cf=5,this.$d=1,this.df=!1,this.Re=this.Qe=this.Vf=0,this.ed=70,this.Vh=0,this.Ma=this.Uh=1,this.Zd=this.Yd=.5,this.od=this.hh=this.Ug=!1,this.nf=1}return t.prototype.Dd=function(){var t,i=this.m.a,e=i.createShader(i.VERTEX_SHADER);t="attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n",t+="varying vec2 vTextureCoord;\n",t+="uniform bool uZoomIn;\n",t+="uniform float uZoomFactor;\n",t+="uniform vec2 uZoomCenter;\n",t+="void main(void) {\n",t+="\t gl_Position = vec4(aVertexPosition, 1.0);\n",t+="\t if(!uZoomIn) {\n",t+="\t \n",t+="\t   vTextureCoord = aTextureCoord;\n",t+="\t }\n",t+="\t else {\n",t+="\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n",t+="\t }\n",t+="}\n",i.shaderSource(e,t),i.compileShader(e),i.getShaderParameter(e,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(e)),e=null);var h=i.createShader(i.FRAGMENT_SHADER);t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n",t+="uniform float uAlpha;\n",t+="uniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n",t+=" gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.fa=i.createProgram(),i.attachShader(this.fa,e),i.attachShader(this.fa,h),i.linkProgram(this.fa),i.getProgramParameter(this.fa,i.LINK_STATUS)||alert("Could not initialise shaders"),this.fa.ca=i.getAttribLocation(this.fa,"aVertexPosition"),i.enableVertexAttribArray(this.fa.ca),this.fa.Fa=i.getAttribLocation(this.fa,"aTextureCoord"),i.enableVertexAttribArray(this.fa.Fa),h=i.createShader(i.FRAGMENT_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n",t+="uniform float uColorPercent;\n",t+="uniform float uAlpha;\n",t+="uniform vec3 uDipColor;\n",t+="uniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n",t+=" gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.wa=i.createProgram(),i.attachShader(this.wa,e),i.attachShader(this.wa,h),i.linkProgram(this.wa),i.getProgramParameter(this.wa,i.LINK_STATUS)||alert("Could not initialise shaders"),this.wa.ca=i.getAttribLocation(this.wa,"aVertexPosition"),i.enableVertexAttribArray(this.wa.ca),this.wa.Fa=i.getAttribLocation(this.wa,"aTextureCoord"),i.enableVertexAttribArray(this.wa.Fa),h=i.createShader(i.FRAGMENT_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n",t+="uniform bool uRound;\n",t+="uniform float uRadius;\n",t+="uniform vec2 uRectDim;\n",t+="uniform vec2 uIrisCenter;\n",t+="uniform float uSoftEdge;\n",t+="uniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" float alpha = 0.0;\n",t+=" vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n",t+=" if (uRound) {\n",t+="\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n",t+="\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n",t+="\t   if (distFromCenter > uRadius) {\n",t+="      alpha = 1.0;\n",t+="    } else {\n",t+="      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n",t+="    };\n",t+=" }\n",t+=" else {\n",t+="    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n",t+="    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n",t+="    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n",t+="    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n",t+="    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n",t+=" }\n",t+=" gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.na=i.createProgram(),i.attachShader(this.na,e),i.attachShader(this.na,h),i.linkProgram(this.na),i.getProgramParameter(this.na,i.LINK_STATUS)||alert("Could not initialise shaders"),this.na.ca=i.getAttribLocation(this.na,"aVertexPosition"),i.enableVertexAttribArray(this.na.ca),this.na.Fa=i.getAttribLocation(this.na,"aTextureCoord"),i.enableVertexAttribArray(this.na.Fa),h=i.createShader(i.FRAGMENT_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n",t+="uniform float uPercent;\n",t+="uniform int uDirection;\n",t+="uniform vec2 uCanvasDimensions;\n",t+="uniform float uSoftEdge;\n",t+="uniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n",t+=" float alpha = 0.0;\n",t+=" if (uDirection == 1) {\n",t+="\t if (gl_FragCoord.x > uPercent) {\n",t+="    alpha = 1.0; \n",t+="  } else {\n",t+="    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n",t+="  }\n",t+=" }\n",t+=" if (uDirection == 2) {\n",t+="\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n",t+="    alpha = 1.0; \n",t+="  } else {\n",t+="    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n",t+="  }\n",t+=" }\n",t+=" if (uDirection == 3) {\n",t+="\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n",t+="    alpha = 1.0; \n",t+="  } else {\n",t+="    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n",t+="  }\n",t+=" }\n",t+=" if (uDirection == 4) {\n",t+="\t if (gl_FragCoord.y > uPercent) {\n",t+="    alpha = 1.0; \n",t+="  } else {\n",t+="    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n",t+="  }\n",t+=" }\n",t+=" gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.ra=i.createProgram(),i.attachShader(this.ra,e),i.attachShader(this.ra,h),i.linkProgram(this.ra),i.getProgramParameter(this.ra,i.LINK_STATUS)||alert("Could not initialise shaders"),this.ra.ca=i.getAttribLocation(this.ra,"aVertexPosition"),i.enableVertexAttribArray(this.ra.ca),this.ra.Fa=i.getAttribLocation(this.ra,"aTextureCoord"),i.enableVertexAttribArray(this.ra.Fa)},t.prototype.qc=function(){var t=this.m.a;if(!t)return!1;if(this.kb=t.createFramebuffer()){t.bindFramebuffer(t.FRAMEBUFFER,this.kb),this.kb.width=1024,this.kb.height=1024,this.Jc=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.Jc),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.kb.width,this.kb.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var i=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.kb.width,this.kb.height),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.Jc,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),!0}return!1},t.prototype.jh=function(t){var i=this.m.a,e=this.m.Ra;if(this.xc){i.useProgram(this.fa),i.bindBuffer(i.ARRAY_BUFFER,this.m.Ea),i.vertexAttribPointer(this.fa.ca,this.m.Ea.Rb,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.m.$c),i.vertexAttribPointer(this.fa.Fa,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.Jc);e=1+(this.Ma-1)*t;var h=i.getUniformLocation(this.fa,"uAlpha");i.uniform1f(h,1),h=i.getUniformLocation(this.fa,"uZoomIn"),i.uniform1i(h,1);h=i.getUniformLocation(this.fa,"uZoomCenter");var s=.5+(this.Yd-.5)*Math.sqrt(t),a=.5+(this.Zd-.5)*Math.sqrt(t);s-.5/e<0&&(s=.5/e),a-.5/e<0&&(a=.5/e),1<s+.5/e&&(s=1-.5/e),1<a+.5/e&&(a=1-.5/e),i.uniform2f(h,s,a),s=i.getUniformLocation(this.fa,"uZoomFactor"),i.uniform1f(s,e),i.uniform1i(i.getUniformLocation(this.fa,"uSampler"),0),i.drawArrays(i.TRIANGLE_STRIP,0,this.m.Ea.tc),i.useProgram(this.m.G)}else{if(this.m.kd(),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.SRC_ALPHA,i.ONE),i.enable(i.BLEND),i.disable(i.DEPTH_TEST),s=this.Yd-.5+.5,a=this.Zd-.5+.5,s-.5/this.Ma<0&&(s=.5/this.Ma),a-.5/this.Ma<0&&(a=.5/this.Ma),1<s+.5/this.Ma&&(s=1-.5/this.Ma),1<a+.5/this.Ma&&(a=1-.5/this.Ma),"crossdissolve"==this.type)i.useProgram(this.fa),i.bindBuffer(i.ARRAY_BUFFER,this.m.Ea),i.vertexAttribPointer(this.fa.ca,this.m.Ea.Rb,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.m.$c),i.vertexAttribPointer(this.fa.Fa,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.Jc),h=i.getUniformLocation(this.fa,"uAlpha"),i.uniform1f(h,1-t),h=i.getUniformLocation(this.fa,"uZoomIn"),i.uniform1i(h,1==this.Ba||2==this.Ba?1:0),h=i.getUniformLocation(this.fa,"uZoomCenter"),i.uniform2f(h,s,a),s=i.getUniformLocation(this.fa,"uZoomFactor"),i.uniform1f(s,this.Ma),i.uniform1i(i.getUniformLocation(this.fa,"uSampler"),0);else if("diptocolor"==this.type)i.useProgram(this.wa),i.bindBuffer(i.ARRAY_BUFFER,this.m.Ea),i.vertexAttribPointer(this.wa.ca,this.m.Ea.Rb,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.m.$c),i.vertexAttribPointer(this.wa.Fa,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.Jc),i.uniform1f(i.getUniformLocation(this.wa,"uColorPercent"),Math.min(2*t,1)),h=i.getUniformLocation(this.wa,"uAlpha"),t=Math.max(2*(t-.5),0),i.uniform1f(h,1-t),i.uniform3f(i.getUniformLocation(this.wa,"uDipColor"),(this.be>>16&255)/255,(this.be>>8&255)/255,(255&this.be)/255),h=i.getUniformLocation(this.wa,"uZoomIn"),i.uniform1i(h,1==this.Ba||2==this.Ba?1:0),h=i.getUniformLocation(this.wa,"uZoomCenter"),i.uniform2f(h,s,a),s=i.getUniformLocation(this.wa,"uZoomFactor"),i.uniform1f(s,this.Ma),i.uniform1i(i.getUniformLocation(this.wa,"uSampler"),0);else if("irisround"==this.type||"irisrectangular"==this.type){var o;i.useProgram(this.na),i.bindBuffer(i.ARRAY_BUFFER,this.m.Ea),i.vertexAttribPointer(this.na.ca,this.m.Ea.Rb,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.m.$c),i.vertexAttribPointer(this.na.Fa,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.Jc),1==this.Ba||2==this.Ba?o=h=.5:(h=this.Yd,o=this.Zd);var r=h*e.width,n=o*e.height;r=Math.max(r,e.width-r),n=Math.max(n,e.height-n);"irisround"==this.type?i.uniform1f(i.getUniformLocation(this.na,"uRadius"),(Math.sqrt(r*r+n*n)+this.Zb)*t):(n<r?(n=e.height/e.width*r+this.Zb,r+=this.Zb):(r=e.width/e.height*n+this.Zb,n+=this.Zb),i.uniform2f(i.getUniformLocation(this.na,"uRectDim"),r*t,n*t)),t=i.getUniformLocation(this.na,"uSoftEdge"),i.uniform1f(t,this.Zb),i.uniform1i(i.getUniformLocation(this.na,"uRound"),"irisround"==this.type?1:0),i.uniform2f(i.getUniformLocation(this.na,"uIrisCenter"),h*e.width,o*e.height),h=i.getUniformLocation(this.na,"uZoomIn"),i.uniform1i(h,1==this.Ba||2==this.Ba?1:0),h=i.getUniformLocation(this.na,"uZoomCenter"),i.uniform2f(h,s,a),s=i.getUniformLocation(this.na,"uZoomFactor"),i.uniform1f(s,this.Ma),i.uniform1i(i.getUniformLocation(this.na,"uSampler"),0)}else"wipeleftright"!=this.type&&"wiperightleft"!=this.type&&"wipetopbottom"!=this.type&&"wipebottomtop"!=this.type&&"wiperandom"!=this.type||(i.useProgram(this.ra),i.bindBuffer(i.ARRAY_BUFFER,this.m.Ea),i.vertexAttribPointer(this.ra.ca,this.m.Ea.Rb,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.m.$c),i.vertexAttribPointer(this.ra.Fa,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.Jc),i.uniform1f(i.getUniformLocation(this.ra,"uPercent"),this.nf<3?t*(e.width+this.Zb):t*(e.height+this.Zb)),t=i.getUniformLocation(this.ra,"uSoftEdge"),i.uniform1f(t,this.Zb),i.uniform1i(i.getUniformLocation(this.ra,"uDirection"),this.nf),i.uniform2f(i.getUniformLocation(this.ra,"uCanvasDimensions"),e.width,e.height),h=i.getUniformLocation(this.ra,"uZoomIn"),i.uniform1i(h,1==this.Ba||2==this.Ba?1:0),h=i.getUniformLocation(this.ra,"uZoomCenter"),i.uniform2f(h,s,a),s=i.getUniformLocation(this.ra,"uZoomFactor"),i.uniform1f(s,this.Ma),i.uniform1i(i.getUniformLocation(this.ra,"uSampler"),0));i.drawArrays(i.TRIANGLE_STRIP,0,this.m.Ea.tc),i.useProgram(this.m.G),i.disable(i.BLEND),i.enable(i.DEPTH_TEST)}},t}(),O=function(){function t(t){this.Sd=[],this.m=t,this.enable=!1,this.yc=2,this.lg=!1}return t.prototype.rf=function(t){if(2==t.mode||3==t.mode||5==t.mode){var i=this.m.lb.currentTime,e=t.zb.gain.value,h=t.xb.gain.value,s=t.yb.gain.value;t.wb.gain.linearRampToValueAtTime(t.wb.gain.value,i),t.wb.gain.linearRampToValueAtTime(0,i+this.yc),t.zb.gain.linearRampToValueAtTime(e,i),t.zb.gain.linearRampToValueAtTime(0,i+this.yc),t.xb.gain.linearRampToValueAtTime(h,i),t.xb.gain.linearRampToValueAtTime(0,i+this.yc),t.yb.gain.linearRampToValueAtTime(s,i),t.yb.gain.linearRampToValueAtTime(0,i+this.yc)}else i=this.m.lb.currentTime,t.ec.gain.linearRampToValueAtTime(t.ec.gain.value,i),t.ec.gain.linearRampToValueAtTime(0,i+this.yc);t.sf=!0},t.prototype.Mj=function(){for(var t=0;t<this.m.T.length;t++){var i=this.m.T[t];this.m.Tc(i.id)||4==i.mode||6==i.mode||(i.c.play(),i.c.currentTime=0)}},t.prototype.ni=function(){for(var t=(this.m.lb.currentTime-this.Jj)/this.yc,i=(t=Math.min(1,t),0);i<this.m.T.length;i++){var e=this.m.T[i];this.m.Tc(e.id)&&e.aa<1&&(e.aa=t)}1==t&&clearInterval(this.Ij)},t}(),P=function(){function t(t){this.Hd=[],this.Ac=null,this.ib=[],this.bb=[],this.jb=[],this.m=t,this.ki()}return t.prototype.Dd=function(){var t,i=this.m.a,e=i.createShader(i.VERTEX_SHADER);t="attribute vec3 aVertexPosition;\nvoid main(void) {\n",t+=" gl_Position = vec4(aVertexPosition, 1.0);\n",t+="}\n",i.shaderSource(e,t),i.compileShader(e),i.getShaderParameter(e,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(e)),e=null);var h=i.createShader(i.FRAGMENT_SHADER);t="#ifdef GL_FRAGMENT_PRECISION_HIGH\n",t+="precision highp float;\n",t+="#else\n",t+="precision mediump float;\n",t+="#endif\n",t+="varying vec4 vColor;\n",t+="uniform vec2 uCanvasDimensions;\n",t+="uniform vec2 uFlareCenterPosition;\n",t+="uniform float uBlindingValue;\n",t+="uniform float uAspectRatio;\n",t+="void main(void) {\n",t+=" float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n",t+=" vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n",t+=" diff.y = diff.y * uAspectRatio;\n",t+=" float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n",t+=" float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n",t+=" gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.nb=i.createProgram(),i.attachShader(this.nb,e),i.attachShader(this.nb,h),i.linkProgram(this.nb),i.getProgramParameter(this.nb,i.LINK_STATUS)||alert("Could not initialise shaders"),this.nb.ca=i.getAttribLocation(this.nb,"aVertexPosition"),i.enableVertexAttribArray(this.nb.ca),h=i.createShader(i.VERTEX_SHADER),e=i.createShader(i.VERTEX_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\n",t+="precision highp float;\n",t+="#else\n",t+="precision mediump float;\n",t+="#endif\n",t+="attribute vec3 aVertexPosition;\n",t+="varying vec4 vColor;\n",t+="uniform vec2 uCirclePosition;\n",t+="uniform float uCircleRadius;\n",t+="uniform vec2 uCanvasDimensions2;\n",t+="uniform float uAspectRatio;\n",t+="void main(void) {\n",t+=" vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n",t+=" circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n",t+=" vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n",t+=" gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),i.shaderSource(e,t),i.compileShader(e),i.getShaderParameter(e,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(e)),h=null);var s=i.createShader(i.FRAGMENT_SHADER);t="#ifdef GL_FRAGMENT_PRECISION_HIGH\n",t+="precision highp float;\n",t+="#else\n",t+="precision mediump float;\n",t+="#endif\n",t+="varying vec4 vColor;\n",t+="uniform vec2 uCircleTexturePosition;\n",t+="uniform vec3 uCircleColor;\n",t+="uniform float uCircleRadius;\n",t+="uniform float uCircleAlpha;\n",t+="uniform float uCircleSoftness;\n",t+="uniform float uAspectRatio;\n",t+="void main(void) {\n",t+=" vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n",t+=" diff.y = diff.y * uAspectRatio;\n",t+=" float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n",t+=" float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n",t+=" if (distFromCircleCenter > uCircleRadius)\n",t+=" {\n",t+="\t  gl_FragColor = vec4(uCircleColor, 0.0);\n",t+=" }\n",t+=" else if (distFromCircleCenter <= (softnessDistance))\n",t+=" {\n",t+="\t  float factor = distFromCircleCenter / softnessDistance;\n",t+="\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n",t+=" }\n",t+=" else\n",t+=" {\n",t+="\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n",t+="\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n",t+=" }\n",t+="}\n",i.shaderSource(s,t),i.compileShader(s),i.getShaderParameter(s,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(s)),s=null),this.ea=i.createProgram(),i.attachShader(this.ea,h),i.attachShader(this.ea,s),i.linkProgram(this.ea),i.getProgramParameter(this.ea,i.LINK_STATUS)||alert("Could not initialise shaders"),this.ea.ca=i.getAttribLocation(this.ea,"aVertexPosition"),i.enableVertexAttribArray(this.ea.ca),h=i.createShader(i.FRAGMENT_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\n",t+="precision highp float;\n",t+="#else\n",t+="precision mediump float;\n",t+="#endif\n",t+="varying vec4 vColor;\n",t+="uniform vec2 uRingTexturePosition;\n",t+="uniform float uRingRadius;\n",t+="uniform float uRingAlpha;\n",t+="uniform float uAspectRatio;\n",t+="uniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n",t+=" diff.y = diff.y * uAspectRatio;\n",t+=" float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n",t+=" float factor = distFromRingCenter / uRingRadius;\n",t+=" if (distFromRingCenter > uRingRadius)\n",t+=" {\n",t+="\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n",t+=" }\n",t+=" else\n",t+=" {\n",t+=" vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n",t+=" gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n",t+=" }\n",t+="}\n",i.shaderSource(h,t),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS)||(alert(i.getShaderInfoLog(h)),h=null),this.Ka=i.createProgram(),i.attachShader(this.Ka,e),i.attachShader(this.Ka,h),i.linkProgram(this.Ka),i.getProgramParameter(this.Ka,i.LINK_STATUS)||alert("Could not initialise shaders"),this.Ka.ca=i.getAttribLocation(this.Ka,"aVertexPosition")},t.prototype.qc=function(){var t=this.m.a;this.dc=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.dc),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),t.STATIC_DRAW),this.dc.Rb=3,this.dc.tc=4,this.Pc=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Pc);for(var i=[0,0,0],e=2*Math.PI/6,h=Math.PI/180*35,s=1,a=h;a<=h+2*Math.PI;a+=e)i.push(Math.sin(a)),i.push(-Math.cos(a)),i.push(0),s++;t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),this.Pc.Rb=3,this.Pc.tc=s,this.sh=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.sh),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(i=document.createElement("canvas")).width=100,i.height=1,(e=i.getContext("2d")).width=100,e.height=1,(h=e.createLinearGradient(0,0,100,0)).addColorStop(0,this.m.X(16777215,0)),h.addColorStop(.88,this.m.X(0,0)),h.addColorStop(.9,this.m.X(16654848,1)),h.addColorStop(.92,this.m.X(16776448,1)),h.addColorStop(.94,this.m.X(4849466,1)),h.addColorStop(.96,this.m.X(131071,1)),h.addColorStop(.98,this.m.X(8190,1)),h.addColorStop(1,this.m.X(0,0)),e.fillStyle=h,e.fillRect(0,0,100,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)},t.prototype.qj=function(){for(;0<this.Hd.length;)this.Hd.pop()},t.prototype.ki=function(){var t=[],i=[],e=[],h={i:14,alpha:.2,color:11390415,f:.27};t.push(h),h={i:20,alpha:.25,color:11390415,f:.4},t.push(h),h={i:10,alpha:.2,color:12442332,f:.6},t.push(h),h={i:15,alpha:.2,color:11390415,f:.8},t.push(h),h={i:10,alpha:.2,color:12442332,f:1.5},t.push(h),h={i:15,alpha:.2,color:11390415,f:1.8},t.push(h),h={i:8,alpha:.2,color:12575203,u:.8,f:.7},i.push(h),h={i:7,alpha:.4,color:12575203,u:.5,f:1.6},i.push(h),h={i:5,alpha:.4,color:12575203,u:.6,f:.9},i.push(h),h={i:8,alpha:.3,color:12575203,u:.4,f:1.1},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:30,alpha:.3,color:11390415,f:.5}),h={i:10,alpha:.3,color:11390415,f:1},t.push(h),h={i:20,alpha:.3,color:11390415,f:1.3},t.push(h),h={i:10,alpha:.3,color:11390415,f:1.5},t.push(h),h={i:15,alpha:.3,color:11390415,f:1.8},t.push(h),h={i:10,alpha:.3,color:15506856,u:.8,f:.7},i.push(h),h={i:20,alpha:.5,color:15506856,u:.5,f:1.6},i.push(h),h={i:5,alpha:.5,color:15506856,u:.6,f:.9},i.push(h),h={i:60,alpha:.4,color:15506856,u:.2,f:1.1},i.push(h),e.push({i:220,alpha:.035,f:2}),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:30,alpha:.5,color:15465727,f:.5}),h={i:40,alpha:.28,color:15726842,f:.8},t.push(h),h={i:25,alpha:.32,color:15726842,f:1.1},t.push(h),h={i:15,alpha:.25,color:15726842,f:1.35},t.push(h),h={i:10,alpha:.28,color:15465727,f:1.65},t.push(h),h={i:10,alpha:.45,color:15465727,u:.8,f:.7},i.push(h),h={i:7,alpha:.5,color:15465727,u:.4,f:.9},i.push(h),h={i:40,alpha:.4,color:15465727,u:.3,f:.38},i.push(h),h={i:50,alpha:.4,color:15465727,u:.5,f:1.25},i.push(h),h={i:18,alpha:.2,color:15465727,u:.5,f:1.25},i.push(h),h={i:10,alpha:.34,color:15726842,u:.8,f:1.5},i.push(h),h={i:38,alpha:.37,color:15465727,u:.3,f:-.5},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:16,alpha:.5,color:16363159,f:.1}),h={i:26,alpha:.3,color:16091819,f:.32},t.push(h),h={i:29,alpha:.2,color:16091819,f:1.32},t.push(h),h={i:20,alpha:.18,color:16363159,f:1.53},t.push(h),h={i:27,alpha:.13,color:16425092,f:1.6},t.push(h),h={i:20,alpha:.1,color:16091819,f:1.75},t.push(h),h={i:12,alpha:.45,color:16312238,u:.45,f:.2},i.push(h),h={i:8,alpha:.25,color:16434209,u:.7,f:.33},i.push(h),h={i:9,alpha:.25,color:16091819,u:.4,f:.7},i.push(h),h={i:7,alpha:.2,color:16091819,u:.4,f:.85},i.push(h),h={i:60,alpha:.23,color:16091819,u:.55,f:1.05},i.push(h),h={i:37,alpha:.1,color:16091819,u:.55,f:1.22},i.push(h),h={i:10,alpha:.25,color:16363159,u:.65,f:1.38},i.push(h),h={i:7,alpha:.2,color:16434209,u:.5,f:1.45},i.push(h),h={i:3,alpha:.2,color:16416033,u:.5,f:1.78},i.push(h),h={i:6,alpha:.18,color:16434209,u:.45,f:1.9},i.push(h),h={i:4,alpha:.14,color:16766514,u:.45,f:2.04},i.push(h),h={i:30,alpha:.14,color:16766514,u:.8,f:.04},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),t=[],e=[],(i=[]).push(h={i:9,alpha:.3,color:14346999,u:.3,f:.3}),h={i:5,alpha:.5,color:14148072,u:.8,f:.6},i.push(h),h={i:3,alpha:.37,color:14346999,u:.66,f:.8},i.push(h),h={i:45,alpha:.2,color:14346999,u:.36,f:1.2},i.push(h),h={i:13,alpha:.2,color:14346999,u:.36,f:1.23},i.push(h),h={i:11,alpha:.2,color:14148072,u:.36,f:1.28},i.push(h),h={i:27,alpha:.16,color:14346999,u:.36,f:1.55},i.push(h),h={i:6,alpha:.36,color:14148072,u:.8,f:1.7},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:24,alpha:.2,color:15186464,f:.2}),h={i:7,alpha:.26,color:15186464,f:.35},t.push(h),h={i:23,alpha:.18,color:15186464,f:.65},t.push(h),h={i:13,alpha:.2,color:15186464,f:.8},t.push(h),h={i:11,alpha:.15,color:15186464,f:1.4},t.push(h),h={i:15,alpha:.11,color:15451904,f:1.6},t.push(h),h={i:6,alpha:.45,color:15579138,u:.45,f:.22},i.push(h),h={i:3,alpha:.3,color:15451904,u:.25,f:.4},i.push(h),h={i:4,alpha:.2,color:15451904,u:.25,f:.45},i.push(h),h={i:65,alpha:.17,color:15186464,u:.25,f:.5},i.push(h),h={i:5,alpha:.45,color:15579138,u:.45,f:.88},i.push(h),h={i:140,alpha:.18,color:15579138,u:.32,f:.95},i.push(h),h={i:12,alpha:.22,color:15579138,u:.32,f:1.1},i.push(h),h={i:8,alpha:.32,color:15451904,u:.72,f:1.2},i.push(h),h={i:55,alpha:.2,color:15451904,u:.45,f:1.33},i.push(h),h={i:4,alpha:.3,color:15451904,u:.25,f:1.42},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:16,alpha:.4,color:10933495,f:.32}),h={i:14,alpha:.3,color:11007484,f:.36},t.push(h),h={i:10,alpha:.3,color:4037331,f:.58},t.push(h),h={i:14,alpha:.22,color:8835068,f:.68},t.push(h),h={i:10,alpha:.27,color:11007484,f:.82},t.push(h),h={i:11,alpha:.27,color:10867450,f:1},t.push(h),h={i:9,alpha:.2,color:6158332,f:1.05},t.push(h),h={i:10,alpha:.17,color:10867450,f:1.78},t.push(h),h={i:10,alpha:.3,color:4037331,f:-.23},t.push(h),h={i:8,alpha:.45,color:8835068,u:.45,f:.175},i.push(h),h={i:7,alpha:.4,color:12574715,u:.55,f:.46},i.push(h),h={i:3,alpha:.3,color:10867450,u:.35,f:.5},i.push(h),h={i:60,alpha:.37,color:4031699,u:.75,f:.75},i.push(h),h={i:3,alpha:.25,color:4031699,u:.25,f:.75},i.push(h),h={i:3,alpha:.2,color:6158332,u:.25,f:.9},i.push(h),h={i:7,alpha:.45,color:8835068,u:.45,f:1.3},i.push(h),h={i:32,alpha:.22,color:8835068,u:.75,f:1.62},i.push(h),h={i:9,alpha:.45,color:4031699,u:.65,f:1.6},i.push(h),h={i:8,alpha:.25,color:4031699,u:.65,f:1.83},i.push(h),h={i:7,alpha:.4,color:12574715,u:.55,f:-.18},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:16,alpha:.4,color:16389120,f:.32}),h={i:26,alpha:.22,color:16389120,f:.4},t.push(h),h={i:26,alpha:.25,color:16389120,f:.65},t.push(h),h={i:18,alpha:.3,color:16389120,f:1.23},t.push(h),h={i:14,alpha:.26,color:16389120,f:1.33},t.push(h),h={i:17,alpha:.18,color:16389120,f:1.7},t.push(h),h={i:30,alpha:.16,color:16389120,f:2.15},t.push(h),h={i:100,alpha:.25,color:16389120,u:.22,f:1.45},i.push(h),h={i:7,alpha:.5,color:15628151,u:.3,f:1.5},i.push(h),h={i:3,alpha:.5,color:15628151,u:.3,f:1.52},i.push(h),h={i:4,alpha:.5,color:16389120,u:.3,f:1.745},i.push(h),h={i:9,alpha:.22,color:16389120,u:.3,f:1.8},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:16,alpha:.4,color:10933495,f:.32}),h={i:14,alpha:.3,color:11007484,f:.36},t.push(h),h={i:10,alpha:.3,color:4037331,f:.58},t.push(h),h={i:14,alpha:.22,color:8835068,f:.68},t.push(h),h={i:10,alpha:.27,color:11007484,f:.82},t.push(h),h={i:11,alpha:.27,color:10867450,f:1},t.push(h),h={i:9,alpha:.2,color:6158332,f:1.05},t.push(h),h={i:10,alpha:.17,color:10867450,f:1.78},t.push(h),h={i:10,alpha:.3,color:4037331,f:-.23},t.push(h),h={i:8,alpha:.45,color:8835068,u:.45,f:.175},i.push(h),h={i:7,alpha:.4,color:12574715,u:.55,f:.46},i.push(h),h={i:3,alpha:.3,color:10867450,u:.35,f:.5},i.push(h),h={i:60,alpha:.37,color:4031699,u:.75,f:.75},i.push(h),h={i:3,alpha:.25,color:4031699,u:.25,f:.75},i.push(h),h={i:3,alpha:.2,color:6158332,u:.25,f:.9},i.push(h),h={i:7,alpha:.45,color:8835068,u:.45,f:1.3},i.push(h),h={i:32,alpha:.22,color:8835068,u:.75,f:1.62},i.push(h),h={i:9,alpha:.45,color:4031699,u:.65,f:1.6},i.push(h),h={i:8,alpha:.25,color:4031699,u:.65,f:1.83},i.push(h),h={i:7,alpha:.4,color:12574715,u:.55,f:-.18},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:16,alpha:.4,color:16389120,f:.32}),h={i:26,alpha:.22,color:16389120,f:.4},t.push(h),h={i:26,alpha:.25,color:16389120,f:.65},t.push(h),h={i:18,alpha:.3,color:16389120,f:1.23},t.push(h),h={i:14,alpha:.26,color:16389120,f:1.33},t.push(h),h={i:17,alpha:.18,color:16389120,f:1.7},t.push(h),h={i:30,alpha:.16,color:16389120,f:2.15},t.push(h),h={i:100,alpha:.25,color:16389120,u:.22,f:1.45},i.push(h),h={i:7,alpha:.5,color:15628151,u:.3,f:1.5},i.push(h),h={i:3,alpha:.5,color:15628151,u:.3,f:1.52},i.push(h),h={i:4,alpha:.5,color:16389120,u:.3,f:1.745},i.push(h),h={i:9,alpha:.22,color:16389120,u:.3,f:1.8},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e),i=[],e=[],(t=[]).push(h={i:24,alpha:.2,color:15186464,f:.2}),h={i:7,alpha:.26,color:15186464,f:.35},t.push(h),h={i:23,alpha:.18,color:15186464,f:.65},t.push(h),h={i:13,alpha:.2,color:15186464,f:.8},t.push(h),h={i:11,alpha:.15,color:15186464,f:1.4},t.push(h),h={i:15,alpha:.11,color:15451904,f:1.6},t.push(h),h={i:6,alpha:.45,color:15579138,u:.45,f:.22},i.push(h),h={i:3,alpha:.3,color:15451904,u:.25,f:.4},i.push(h),h={i:4,alpha:.2,color:15451904,u:.25,f:.45},i.push(h),h={i:65,alpha:.17,color:15186464,u:.25,f:.5},i.push(h),h={i:5,alpha:.45,color:15579138,u:.45,f:.88},i.push(h),h={i:140,alpha:.18,color:15579138,u:.32,f:.95},i.push(h),h={i:12,alpha:.22,color:15579138,u:.32,f:1.1},i.push(h),h={i:8,alpha:.32,color:15451904,u:.72,f:1.2},i.push(h),h={i:55,alpha:.2,color:15451904,u:.45,f:1.33},i.push(h),h={i:4,alpha:.3,color:15451904,u:.25,f:1.42},i.push(h),this.ib.push(t),this.bb.push(i),this.jb.push(e)},t.prototype.dj=function(){var t,i,e,h,s,a=this.m.a,o=new x(0,0,-100),r=this.m.ac();this.m.ja?(h=this.m.Ra.width,s=this.m.Ra.height,this.m.o.Rd&&(h=this.m.o.kb.width,s=this.m.o.kb.height)):(this.J||(this.J=this.Ac.getContext("2d")),this.J.width===this.m.l.width&&this.J.height===this.m.l.height||(this.J.width=this.m.l.width,this.J.height=this.m.l.height),this.J.clear?this.J.clear():this.J.clearRect(0,0,this.Ac.width,this.Ac.height),h=this.J.width,s=this.J.height);var n=Math.sqrt(h*h+s*s),l=n/800;for(i=0;i<this.Hd.length;i++){var u=this.Hd[i];o.Ja(0,0,-100),o.oa(-u.j*Math.PI/180),o.Aa(u.pan*Math.PI/180),o.Aa(-this.m.pan.b*Math.PI/180),o.oa(this.m.j.b*Math.PI/180),o.Za(this.m.I.b*Math.PI/180);var d,p,c=!1;if(o.z<-.01)p=-r/o.z,d=o.x*p,p*=o.y,Math.abs(d)<h/2+100&&Math.abs(p)<s/2+100&&(c=!0,d+=h/2,p+=s/2);if(c){this.m.ja&&(a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),a.enable(a.BLEND),a.disable(a.DEPTH_TEST));c=h/2;var f=s/2;e=Math.sqrt((c-d)*(c-d)+(f-p)*(f-p));var g=n/2;f=s<h?h:s;if((c=u.gg/100*((g-e)/g))<0&&(c=0),this.m.ja){a.useProgram(this.nb),a.bindBuffer(a.ARRAY_BUFFER,this.m.Ea),a.vertexAttribPointer(this.nb.ca,this.m.Ea.Rb,a.FLOAT,!1,0,0);var b=a.getUniformLocation(this.nb,"uCanvasDimensions");a.uniform2f(b,a.drawingBufferWidth,a.drawingBufferHeight),a.uniform2f(a.getUniformLocation(this.nb,"uFlareCenterPosition"),a.drawingBufferWidth/h*d,s-a.drawingBufferHeight/s*p),a.uniform1f(a.getUniformLocation(this.nb,"uBlindingValue"),c),b=a.getUniformLocation(this.nb,"uAspectRatio"),a.uniform1f(b,this.m.o.Rd?a.drawingBufferWidth/a.drawingBufferHeight:a.drawingBufferWidth/a.drawingBufferHeight/(h/s)),a.drawArrays(a.TRIANGLE_STRIP,0,this.m.Ea.tc)}else(b=this.J.createRadialGradient(d,p,1,d,p,f)).addColorStop(0,"rgba(255, 255, 255, "+c+")"),b.addColorStop(.5,"rgba(255, 255, 255, "+.8*c+")"),b.addColorStop(1,"rgba(255, 255, 255, "+.6*c+")"),this.J.fillStyle=b,this.J.fillRect(0,0,this.J.width,this.J.height);if(0!=Number(u.type)&&!this.m.o.Rd){c=h/2-d,f=s/2-p;var m=1,y=Number(u.type)-1;if(e<.35*g&&(m=e/(.35*g),m*=m),.7*g<e&&(m=(g-e)/(.3*g)),m*=u.alpha/100,0<this.ib[y].length)for(e=0;e<this.ib[y].length;e++){g=(A=this.ib[y][e]).i*l;(t=A.alpha*m)<0&&(t=0);var v=A.color;if(8!=y&&9!=y&&10!=y||(v=u.color),this.m.ja)a.useProgram(this.ea),a.bindBuffer(a.ARRAY_BUFFER,this.Pc),a.vertexAttribPointer(this.ea.ca,this.Pc.Rb,a.FLOAT,!1,0,0),b=a.getUniformLocation(this.ea,"uCanvasDimensions2"),a.uniform2f(b,a.drawingBufferWidth,a.drawingBufferHeight),a.uniform2f(a.getUniformLocation(this.ea,"uCirclePosition"),a.drawingBufferWidth/h*(d+c*A.f),a.drawingBufferWidth/h*(s-(p+f*A.f))),a.uniform2f(a.getUniformLocation(this.ea,"uCircleTexturePosition"),a.drawingBufferWidth/h*(d+c*A.f),s-(p+f*A.f)),a.uniform1f(a.getUniformLocation(this.ea,"uCircleRadius"),g),a.uniform3f(a.getUniformLocation(this.ea,"uCircleColor"),(v>>16&255)/255,(v>>8&255)/255,(255&v)/255),a.uniform1f(a.getUniformLocation(this.ea,"uCircleAlpha"),t),a.uniform1f(a.getUniformLocation(this.ea,"uCircleSoftness"),.1),b=a.getUniformLocation(this.ea,"uAspectRatio"),a.uniform1f(b,a.drawingBufferWidth/a.drawingBufferHeight/(h/s)),a.drawArrays(a.TRIANGLE_FAN,0,this.Pc.tc);else{this.J.save(),this.J.translate(d+c*A.f,p+f*A.f),(b=this.J.createRadialGradient(0,0,1,0,0,1.1*g)).addColorStop(0,this.m.X(v,t)),b.addColorStop(.65,this.m.X(v,.9*t)),b.addColorStop(.8,this.m.X(v,.7*t)),b.addColorStop(1,this.m.X(v,.2*t)),this.J.beginPath();v=2*Math.PI/6;var A,T=!0;for(t=A=Math.PI/180*35;t<=A+2*Math.PI;t+=v)T?(this.J.moveTo(g*Math.sin(t),g*Math.cos(t)),T=!1):this.J.lineTo(g*Math.sin(t),g*Math.cos(t));this.J.closePath(),this.J.fillStyle=b,this.J.fill(),this.J.restore()}}if(0<this.bb[y].length)for(e=0;e<this.bb[y].length;e++)g=(A=this.bb[y][e]).i*l,(t=A.alpha*m)<0&&(t=0),v=A.color,8!=y&&9!=y&&10!=y||(v=u.color),this.m.ja?(a.useProgram(this.ea),a.bindBuffer(a.ARRAY_BUFFER,this.dc),a.vertexAttribPointer(this.ea.ca,this.dc.Rb,a.FLOAT,!1,0,0),b=a.getUniformLocation(this.ea,"uCanvasDimensions2"),a.uniform2f(b,a.drawingBufferWidth,a.drawingBufferHeight),b=a.getUniformLocation(this.ea,"uCirclePosition"),a.uniform2f(b,a.drawingBufferWidth/h*(d+c*A.f),a.drawingBufferWidth/h*(s-(p+f*A.f))),b=a.getUniformLocation(this.ea,"uCircleTexturePosition"),a.uniform2f(b,a.drawingBufferWidth/h*(d+c*A.f),s-(p+f*A.f)),b=a.getUniformLocation(this.ea,"uCircleRadius"),a.uniform1f(b,g),a.uniform3f(a.getUniformLocation(this.ea,"uCircleColor"),(v>>16&255)/255,(v>>8&255)/255,(255&v)/255),a.uniform1f(a.getUniformLocation(this.ea,"uCircleAlpha"),t),a.uniform1f(a.getUniformLocation(this.ea,"uCircleSoftness"),A.u),b=a.getUniformLocation(this.ea,"uAspectRatio"),a.uniform1f(b,a.drawingBufferWidth/a.drawingBufferHeight/(h/s)),a.drawArrays(a.TRIANGLE_FAN,0,this.dc.tc)):(this.J.save(),this.J.translate(d+c*A.f,p+f*A.f),(b=this.J.createRadialGradient(0,0,1,0,0,g)).addColorStop(0,this.m.X(v,t)),b.addColorStop(1-A.u,this.m.X(v,.8*t)),b.addColorStop(1,this.m.X(v,0)),this.J.beginPath(),this.J.arc(0,0,g,0,2*Math.PI,!1),this.J.closePath(),this.J.fillStyle=b,this.J.fill(),this.J.restore());if(0<this.jb[y].length)for(e=0;e<this.jb[y].length;e++)g=(u=this.jb[y][e]).i*l,(t=u.alpha*m)<0&&(t=0),this.m.ja?(a.useProgram(this.Ka),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.sh),a.bindBuffer(a.ARRAY_BUFFER,this.dc),a.vertexAttribPointer(this.Ka.ca,this.dc.Rb,a.FLOAT,!1,0,0),b=a.getUniformLocation(this.Ka,"uCanvasDimensions2"),a.uniform2f(b,h,s),b=a.getUniformLocation(this.Ka,"uCirclePosition"),a.uniform2f(b,d+c*u.f,s-(p+f*u.f)),b=a.getUniformLocation(this.Ka,"uRingTexturePosition"),a.uniform2f(b,a.drawingBufferWidth/h*(d+c*u.f),s-(p+f*u.f)),b=a.getUniformLocation(this.Ka,"uCircleRadius"),a.uniform1f(b,g),a.uniform2f(a.getUniformLocation(this.Ka,"uRingPosition"),d+c*u.f,s-(p+f*u.f)),a.uniform1f(a.getUniformLocation(this.Ka,"uRingRadius"),g),a.uniform1f(a.getUniformLocation(this.Ka,"uRingAlpha"),t),b=a.getUniformLocation(this.Ka,"uAspectRatio"),a.uniform1f(b,a.drawingBufferWidth/a.drawingBufferHeight/(h/s)),a.uniform1i(a.getUniformLocation(this.Ka,"uSampler"),0),a.drawArrays(a.TRIANGLE_FAN,0,this.dc.tc)):(this.J.save(),this.J.translate(d+c*u.f,p+f*u.f),(b=this.J.createRadialGradient(0,0,0,0,0,g)).addColorStop(0,this.m.X(16777215,0)),b.addColorStop(.88,this.m.X(0,0)),b.addColorStop(.9,this.m.X(16654848,t)),b.addColorStop(.92,this.m.X(16776448,t)),b.addColorStop(.94,this.m.X(4849466,t)),b.addColorStop(.96,this.m.X(131071,t)),b.addColorStop(.98,this.m.X(8190,t)),b.addColorStop(1,this.m.X(0,0)),this.J.beginPath(),this.J.arc(0,0,g,0,2*Math.PI,!1),this.J.closePath(),this.J.fillStyle=b,this.J.fill(),this.J.restore())}this.m.ja&&(a.useProgram(this.m.G),a.disable(a.BLEND),a.enable(a.DEPTH_TEST))}}},t}();function Q(){var t,i="perspective",e=["Webkit","Moz","O","ms","Ms"];for(t=!1,t=0;t<e.length;t++)void 0!==document.documentElement.style[e[t]+"Perspective"]&&(i=e[t]+"Perspective");return void 0!==document.documentElement.style[i]?"webkitPerspective"in document.documentElement.style?(i=document.createElement("style"),e=document.createElement("div"),t=document.head||document.getElementsByTagName("head")[0],i.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",t.appendChild(i),e.id="ggswhtml5",document.documentElement.appendChild(e),t=5===e.offsetHeight,i.parentNode.removeChild(i),e.parentNode.removeChild(e)):t=!0:t=!1,t}function R(){var i;if(i=!!window.WebGLRenderingContext)try{var t=document.createElement("canvas");t.width=100,t.height=100;var e=t.getContext("webgl");e||(e=t.getContext("experimental-webgl")),i=!!e}catch(t){i=!1}return i}window.ggHasHtml5Css3D=Q,window.ggHasWebGL=R;var S=this&&this.sk||function(t,i){function e(){this.constructor=t}for(var h in i)i.hasOwnProperty(h)&&(t[h]=i[h]);t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)},T=function(){function t(t){this.m=null,this.zd=this.Ig=this.hb=!1,this.Za=this.Aa=this.oa=0,this.h=70,this.xa=0,this.id="",this.j=this.pan=0,this.m=t,this.Xb=this.Pb=100,this.fc=1}return t.prototype.Ya=function(t){var i;(i=t.getAttributeNode("id"))&&(this.id=i.nodeValue.toString()),(i=t.getAttributeNode("pan"))&&(this.pan=Number(i.nodeValue)),(i=t.getAttributeNode("tilt"))&&(this.j=Number(i.nodeValue))},t.prototype.Mh=function(t){var i="",e=this.m;e.Fb&&(i+="perspective("+t+"px) "),i=i+"translate3d(0px,0px,"+t+"px) rotateZ("+e.I.b.toFixed(10)+"deg) ",i+="rotateX("+e.j.b.toFixed(10)+"deg) ",i+="rotateY("+(-e.pan.b).toFixed(10)+"deg) ",i+="rotateY("+this.pan.toFixed(10)+"deg) ",i+="rotateX("+(-this.j).toFixed(10)+"deg) ",t=1e4;var h=this.c.videoWidth,s=this.c.videoHeight;0!=h&&0!=s||(h=640,s=480),0<this.Pb&&(h=this.Pb),0<this.Xb&&(s=this.Xb),0<h&&0<s&&(this.c.width=h,this.c.height=s,this.c.style.width=h+"px",this.c.style.height=s+"px"),0<this.h&&(t=h/(2*Math.tan(this.h/2*Math.PI/180))),i+="translate3d(0px,0px,"+(-t).toFixed(10)+"px) ",i+="rotateZ("+this.Za.toFixed(10)+"deg) ",i+="rotateY("+(-this.Aa).toFixed(10)+"deg) ",i+="rotateX("+this.oa.toFixed(10)+"deg) ",this.fc&&1!=this.fc&&(i+="scaleY("+this.fc+") "),i+="translate3d("+-h/2+"px,"+-s/2+"px,0px) ",this.c.style[e.ya+"Origin"]="0% 0%",this.hb&&(i="",1==this.xa&&(i+="scale("+Math.min(e.l.width/h,e.l.height/s)+") "),i+="translate3d("+-h/2+"px,"+-s/2+"px,0px) "),this.Oi!=i&&(this.Oi=i,this.c.style[e.ya]=i,this.c.style.visibility="visible",this.zd&&this.Ig==this.hb&&(this.c.style[e.Vb]="all 0s linear 0s"),this.Ig=this.hb)},t.prototype.Kc=function(){var t=this.m;this.c.style.left=t.margin.left+t.l.width/2+"px",this.c.style.top=t.margin.top+t.l.height/2+"px"},t}(),U=function(e){function t(t){e.call(this,t),this.Lf=this.sf=this.hd=!1,this.url=[],this.loop=0,this.level=1,this.Mb=0,this.mode=1,this.qg=10,this.Xe=this.Wa=0,this.aa=1,this.Tb=this.Kb=this.Jb=this.Sb=0}return S(t,e),t.prototype.Hj=function(){0==this.loop?this.c.play():0<this.mc&&(this.mc--,this.c.currentTime=0,this.sf&&(this.ec&&0==this.ec.gain.value||0==this.wb.gain.value&&0==this.zb.gain.value&&0==this.xb.gain.value&&0==this.yb.gain.value)||this.c.play())},t.prototype.dg=function(){var t=this.m.lb;t&&(this.source=t.createMediaElementSource(this.c),2==this.mode||3==this.mode||5==this.mode?(this.sd=t.createChannelSplitter(2),this.wb=t.createGain(),this.xb=t.createGain(),this.yb=t.createGain(),this.zb=t.createGain(),this.rd=t.createChannelMerger(2),this.source.connect(this.sd),this.sd.connect(this.wb,0),this.sd.connect(this.xb,0),this.sd.connect(this.yb,1),this.sd.connect(this.zb,1),this.wb.connect(this.rd,0,0),this.xb.connect(this.rd,0,1),this.yb.connect(this.rd,0,0),this.zb.connect(this.rd,0,1),this.rd.connect(t.destination)):(this.ec=t.createGain(),this.source.connect(this.ec),this.ec.connect(t.destination)))},t.prototype.Nd=function(){var t=this.m.lb;this.hb||this.Lf||(this.wb.gain.setValueAtTime(this.Sb,t.currentTime),this.zb.gain.setValueAtTime(this.Tb,t.currentTime),this.xb.gain.setValueAtTime(this.Jb,t.currentTime),this.yb.gain.setValueAtTime(this.Kb,t.currentTime))},t.prototype.$f=function(){var t=this.m,i=this.m.lb;if(this.c){var e,h=this.pan-t.pan.b;for(e=this.j-t.j.b;h<-180;)h+=360;for(;180<h;)h-=360;var s=this.Mb,a=this.qg;if(0==a&&(a=.01),a<0&&(a=t.h.b),this.$a||(this.$a=new x,this.$a.sg(this.pan,this.j)),0!=this.mode&&1!=this.mode||!i||this.ec&&this.ec.gain.setValueAtTime(this.level*t.ba*this.aa,i.currentTime),2==this.mode&&i){var o=.5*Math.cos(h*Math.PI/180)+.5;this.Sb=Math.sqrt(o)*this.aa,this.Tb=Math.sqrt(o)*this.aa,this.Jb=Math.sqrt(1-o)*this.aa,this.Kb=Math.sqrt(1-o)*this.aa,this.Nd()}if(3==this.mode){h<0?h<-this.Wa?h+=this.Wa:h=0:h=h>this.Wa?h-this.Wa:0,o=this.level;var r=1-(e=(e=Math.abs(e))<this.Xe?0:e-this.Xe)/a;if(Math.abs(h)>a||r<0){var n=o*s*t.ba;i?(this.Sb=n*this.aa,this.Tb=n*this.aa,this.Kb=this.Jb=0,this.Nd()):this.c.volume=o*s*t.ba}else if(n=1-Math.abs(h/a),i){var l=o*(s+(1-s)*r*n)*t.ba;n=o*s*t.ba;0<=h?(this.Sb=l*this.aa,this.Tb=n*this.aa):(this.Sb=n*this.aa,this.Tb=l*this.aa),2*Math.abs(h)<a?(l=o*(s+(1-s)*r*(n=1-Math.abs(2*h)/a))*t.ba,n=.5*o*(1-s)*r*(1-n)*t.ba,0<=h?(this.Tb=l*this.aa,this.Kb=n*this.aa,this.Jb=0):(this.Sb=l*this.aa,this.Jb=n*this.aa,this.Kb=0)):(l=.5*o*(1-s)*r*(n=1-(Math.abs(2*h)-a)/a)*t.ba,0<=h?(this.Kb=l*this.aa,this.Jb=0):(this.Jb=l*this.aa,this.Kb=0)),this.Nd()}else this.c.volume=o*(s+(1-s)*r*n)*t.ba}4==this.mode&&(Math.abs(h)<this.Wa&&Math.abs(e)<this.Xe?this.hd||(this.hd=!0,this.c.play()):this.hd=!1),5==this.mode&&((e=180*Math.acos(t.lf.He(this.$a))/Math.PI)<this.Wa?i?(this.Sb=this.level*t.ba*this.aa,this.Tb=this.level*t.ba*this.aa,this.Kb=this.Jb=0,this.Nd()):this.c.volume=this.level*t.ba:i?e<this.Wa+a?(h=h<0?h>-this.Wa?0:h+this.Wa:h<this.Wa?0:h-this.Wa,l=1-Math.max(e-this.Wa,0)/a,n=Math.max(1-Math.abs(h)*Math.cos(this.j*Math.PI/180)/a,0),0<h?(this.Sb=this.level*(l*(1-this.Mb)+this.Mb)*this.aa,this.Tb=this.level*(l*n*(1-this.Mb)+this.Mb)*this.aa,this.Jb=0,this.Kb=this.level*l*(1-n)*this.aa):(this.Sb=this.level*(l*n*(1-this.Mb)+this.Mb)*this.aa,this.Tb=this.level*(l*(1-this.Mb)+this.Mb)*this.aa,this.Jb=this.level*l*(1-n)*this.aa,this.Kb=0),this.Nd()):(l=this.level*this.Mb,this.Sb=l*this.aa,this.Tb=l*this.aa,this.Kb=this.Jb=0):(e-=this.Wa,this.c.volume=e<a&&0<a?this.level*(s+(1-s)*(1-Math.abs(e/a)))*t.ba:s*t.ba)),6==this.mode&&(e=180*Math.acos(t.lf.He(this.$a))/Math.PI,Math.abs(e)<this.Wa?this.hd||(this.hd=!0,this.c.play()):this.hd=!1)}},t.prototype.addElement=function(){var t=-1,i=this,e=this.m,h=this.m.lb;try{for(var s=!1,a=0;a<e.T.length;a++)e.T[a].id==i.id&&(t=a,null!=e.T[a].c&&e.T[a].url.join()==i.url.join()&&e.T[a].loop==i.loop&&e.T[a].mode==i.mode&&(s=!0));if(!s){if(0<=t){var o=e.T[t];if(null!=o.c)if(h&&e.pa.enabled)e.pa.Sd.push(o),1!=e.o.Ba&&2!=e.o.Ba&&e.pa.rf(o);else{try{o.c.pause()}catch(t){}try{o.ad()}catch(t){}}}for(i.c=document.createElement("audio"),i.c.setAttribute("class","ggmedia"),e.Sc&&i.c.setAttribute("id",e.Sc+i.id),a=0;a<i.url.length;a++){var r;r=document.createElement("source"),""!=i.url[a]&&"#"!=i.url[a]&&(r.setAttribute("src",e.ub(i.url[a])),i.c.appendChild(r))}i.c.volume=i.level*e.ba,1<=i.loop&&(i.mc=i.loop-1),0<=t?e.T[t]=i:e.T.push(i),0<i.c.childNodes.length&&(e.N.appendChild(i.c),i.c.addEventListener("ended",function(){i.Hj()},!1),h&&(i.dg(),i.sf=!1,0==i.loop&&i.source.mediaElement&&(i.source.mediaElement.loop=!0))),1!=i.mode&&2!=i.mode&&3!=i.mode&&5!=i.mode||!(0<=i.loop)||h&&e.pa.enabled||(i.c.autoplay=!0)}}catch(t){}},t.prototype.ad=function(){try{this.m.N.removeChild(this.c),delete this.c,this.c=null}catch(t){}},t.prototype.Ya=function(t){var i;for(e.prototype.Ya.call(this,t),(i=t.getAttributeNode("url"))&&this.url.push(i.nodeValue.toString()),(i=t.getAttributeNode("level"))&&(this.level=Number(i.nodeValue)),(i=t.getAttributeNode("loop"))&&(this.loop=Number(i.nodeValue)),(i=t.getAttributeNode("mode"))&&(this.mode=Number(i.nodeValue)),(i=t.getAttributeNode("field"))&&(this.qg=Number(i.nodeValue)),(i=t.getAttributeNode("ambientlevel"))&&(this.Mb=Number(i.nodeValue)),(i=t.getAttributeNode("pansize"))&&(this.Wa=Number(i.nodeValue)),(i=t.getAttributeNode("tiltsize"))&&(this.Xe=Number(i.nodeValue)),t=t.firstChild;t;)"source"==t.nodeName&&(i=t.getAttributeNode("url"))&&this.url.push(i.nodeValue.toString()),t=t.nextSibling},t}(T),V=function(e){function t(t){e.call(this,t),this.poster="",this.Za=this.Aa=this.oa=0,this.h=50,this.xa=0}return S(t,e),t.prototype.Yb=function(){1!=this.xa&&4!=this.xa||this.Ad(!this.hb),2==this.xa&&this.m.lh(this.id)},t.prototype.Ad=function(t){var i=this.m.lb;if(1==this.xa||4==this.xa)if(this.hb=t,this.m.Qa)(i=this.m.Y)&&i.activateSound(this.id,this.hb?1:0);else{if(this.hb)this.c.play(),this.c.style.zIndex="80000",this.c.style[this.m.Vb]="all 1s ease 0s",this.m.Fe(this.id);else{this.c.style.zIndex="0",this.c.style[this.m.Vb]="all 1s ease 0s",this.Lf=!0;var e=this;setTimeout(function(){e.Lf=!1},1e3)}if(i){i=i.currentTime;var h=this.wb.gain.value,s=this.zb.gain.value,a=this.xb.gain.value,o=this.yb.gain.value;this.hb?(this.wb.gain.linearRampToValueAtTime(h,i),this.wb.gain.linearRampToValueAtTime(this.level*this.m.ba,i+1),this.zb.gain.linearRampToValueAtTime(s,i),this.zb.gain.linearRampToValueAtTime(this.level*this.m.ba,i+1),this.xb.gain.linearRampToValueAtTime(a,i),this.xb.gain.linearRampToValueAtTime(0,i+1),this.yb.gain.linearRampToValueAtTime(o,i),this.yb.gain.linearRampToValueAtTime(0,i+1)):(this.wb.gain.linearRampToValueAtTime(h,i),this.wb.gain.linearRampToValueAtTime(this.Sb,i+1),this.zb.gain.linearRampToValueAtTime(s,i),this.zb.gain.linearRampToValueAtTime(this.Tb,i+1),this.xb.gain.linearRampToValueAtTime(a,i),this.xb.gain.linearRampToValueAtTime(this.Jb,i+1),this.yb.gain.linearRampToValueAtTime(o,i),this.yb.gain.linearRampToValueAtTime(this.Kb,i+1))}this.zd=!0,this.m.Nh()}2==this.xa&&(t?this.m.Fe(this.id):this.m.Kf(this.id))},t.prototype.Bd=function(){this.zd=!1,this.c.style[this.m.Vb]="none"},t.prototype.ik=function(){0==this.loop?this.c.play():0<this.mc?(this.mc--,this.c.currentTime=0,this.c.play()):this.Tg=!1},t.prototype.Ya=function(t){var i;e.prototype.Ya.call(this,t),(i=t.getAttributeNode("poster"))&&(this.poster=String(i.nodeValue)),(i=t.getAttributeNode("rotx"))&&(this.oa=Number(i.nodeValue)),(i=t.getAttributeNode("roty"))&&(this.Aa=Number(i.nodeValue)),(i=t.getAttributeNode("rotz"))&&(this.Za=Number(i.nodeValue)),(i=t.getAttributeNode("fov"))&&(this.h=Number(i.nodeValue)),(i=t.getAttributeNode("width"))&&(this.Pb=Number(i.nodeValue)),(i=t.getAttributeNode("height"))&&(this.Xb=Number(i.nodeValue)),this.fc=(i=t.getAttributeNode("stretch"))?Number(i.nodeValue):1,(i=t.getAttributeNode("clickmode"))&&(this.xa=Number(i.nodeValue))},t.prototype.addElement=function(){var t=this,i=this.m;try{var e;for(this.c=document.createElement("video"),this.c.setAttribute("class","ggmedia"),i.Sc&&this.c.setAttribute("id",i.Sc+this.id),i.Ud?this.c.setAttribute("style","display: none; max-width:none;"):(this.c.setAttribute("style","max-width:none;pointer-events:none;"),(1==this.xa||4==this.xa)&&(this.c.addEventListener(i.Th(),function(){t.Bd()},!1),this.c.addEventListener("transitionend",function(){t.Bd()},!1))),e=0;e<this.url.length;e++){var h;(h=document.createElement("source")).setAttribute("src",i.ub(this.url[e])),this.c.appendChild(h)}""!=this.poster&&(this.c.poster=i.ub(this.poster),this.loop<0&&(this.c.Xh="none")),this.c.volume=this.level*i.ba,1<=this.loop&&(this.mc=this.loop-1),(1==this.mode||2==this.mode||3==this.mode||5==this.mode)&&0<=this.loop&&(this.Tg=this.c.autoplay=!0),i.L.push(this),i.Ud?i.N.appendChild(this.c):(this.c.style.position="absolute",this.Pb&&(this.c.width=this.Pb),this.Xb&&(this.c.height=this.Xb),i.A.appendChild(this.c),this.dg()),this.c.onclick=function(){t.Yb()},this.c.addEventListener("ended",function(){t.ik()},!1)}catch(t){}},t.prototype.ad=function(){var t=this.m;t.Ud&&(t.a.deleteTexture(this.Hb),this.Hb=0,t.N.removeChild(this.c)),t.Oh&&t.A.removeChild(this.c),delete this.c,this.c=null},t}(U),W=function(e){function t(t){e.call(this,t),this.url="",this.Za=this.Aa=this.oa=0,this.h=50,this.xa=0,this.Xb=this.Pb=100,this.fc=1}return S(t,e),t.prototype.Ya=function(t){var i;for(e.prototype.Ya.call(this,t),(i=t.getAttributeNode("url"))&&(this.url=i.nodeValue.toString()),(i=t.getAttributeNode("rotx"))&&(this.oa=Number(i.nodeValue)),(i=t.getAttributeNode("roty"))&&(this.Aa=Number(i.nodeValue)),(i=t.getAttributeNode("rotz"))&&(this.Za=Number(i.nodeValue)),(i=t.getAttributeNode("fov"))&&(this.h=Number(i.nodeValue)),(i=t.getAttributeNode("width"))&&(this.Pb=Number(i.nodeValue)),(i=t.getAttributeNode("height"))&&(this.Xb=Number(i.nodeValue)),this.fc=(i=t.getAttributeNode("stretch"))?Number(i.nodeValue):1,(i=t.getAttributeNode("clickmode"))&&(this.xa=Number(i.nodeValue)),t=t.firstChild;t;)"source"==t.nodeName&&(i=t.getAttributeNode("url"))&&(this.url=i.nodeValue.toString()),t=t.nextSibling},t.prototype.Bd=function(){this.zd=!1,this.c.style[this.m.Vb]="none"},t.prototype.Yb=function(){1!==this.xa&&4!==this.xa||this.Ad(!this.hb)},t.prototype.Ad=function(t){var i=this.m;1!==this.xa&&4!==this.xa||(this.hb=t,this.m.Qa?(t=this.m.Y)&&t.activateSound(this.id,this.hb?1:0):(this.c.style.zIndex=this.hb?"80000":"0",this.c.style[i.Vb]="all 1s ease 0s",this.zd=!0,i.Ih()))},t.prototype.addElement=function(){var t=this,i=this.m;try{t.c=document.createElement("img"),t.c.setAttribute("style","-webkit-user-drag:none; max-width:none;"),t.c.setAttribute("class","ggmedia"),i.Sc&&t.c.setAttribute("id",i.Sc+t.id),t.c.ondragstart=function(){return!1},1!==t.xa&&4!==t.xa||(t.c.addEventListener(i.Th(),function(){t.Bd()},!1),t.c.addEventListener("transitionend",function(){t.Bd()},!1)),t.c.setAttribute("src",i.ub(t.url)),t.Pb&&(t.c.width=t.Pb),t.Xb&&(t.c.height=t.Xb),i.Sa.push(t),t.c.style.position="absolute",t.Yb&&(t.c.onclick=function(){t.Yb()}),i.A.appendChild(t.c)}catch(t){}},t.prototype.ad=function(){this.m.A.removeChild(this.c),delete this.c,this.c=null},t}(T),X=function(e){function t(t){e.call(this,t),this.alpha=this.gg=50,this.type=0,this.color=16777215}return S(t,e),t.prototype.Ya=function(t){var i;e.prototype.Ya.call(this,t),(i=t.getAttributeNode("blinding"))&&(this.gg=Number(i.nodeValue)),(i=t.getAttributeNode("alpha"))&&(this.alpha=Number(i.nodeValue)),(i=t.getAttributeNode("type"))&&(this.type=Number(i.nodeValue)),(i=t.getAttributeNode("color"))&&(this.color=1*Number(i.nodeValue))},t}(T),Y=function(){function t(t){this.type="empty",this.zh=this.id=this.target=this.description=this.title=this.url="",this.af=100,this.re=20,this.bf=!1,this.c=null,this.Ga=this.da=this.j=this.pan=0,this.ob=t.w.ob,this.mb=t.w.mb,this.Ob=t.w.Ob,this.Nb=t.w.Nb,this.Rc=t.w.Rc,this.Wd=[]}return t.prototype.Oc=function(){this.id=this.id,this.pan=this.pan,this.tilt=this.j,this.url=this.url,this.target=this.target,this.title=this.title,this.description=this.description,this.skinid=this.zh,this.obj=this.c},t.prototype.Ya=function(t){var i;for((i=t.getAttributeNode("url"))&&(this.url=i.nodeValue.toString()),(i=t.getAttributeNode("target"))&&(this.target=i.nodeValue.toString()),(i=t.getAttributeNode("title"))&&(this.title=i.nodeValue.toString()),(i=t.getAttributeNode("description"))&&(this.description=i.nodeValue.toString()),(i=t.getAttributeNode("id"))&&(this.id=i.nodeValue.toString()),(i=t.getAttributeNode("skinid"))&&(this.zh=i.nodeValue.toString()),(i=t.getAttributeNode("width"))&&(this.af=Number(i.nodeValue)),(i=t.getAttributeNode("height"))&&(this.re=Number(i.nodeValue)),(i=t.getAttributeNode("wordwrap"))&&(this.bf=1==Number(i.nodeValue)),i=t.getAttributeNode("pan"),this.pan=1*(i?Number(i.nodeValue):0),i=t.getAttributeNode("tilt"),this.j=1*(i?Number(i.nodeValue):0),(i=t.getAttributeNode("bordercolor"))&&(this.ob=1*Number(i.nodeValue)),(i=t.getAttributeNode("backgroundcolor"))&&(this.mb=1*Number(i.nodeValue)),(i=t.getAttributeNode("borderalpha"))&&(this.Ob=1*Number(i.nodeValue)),(i=t.getAttributeNode("backgroundalpha"))&&(this.Nb=1*Number(i.nodeValue)),(i=t.getAttributeNode("handcursor"))&&(this.Rc=1==Number(i.nodeValue)),t=t.firstChild;t;){if("vertex"==t.nodeName){var e={pan:0,j:0};i=t.getAttributeNode("pan"),e.pan=1*(i?Number(i.nodeValue):0),i=t.getAttributeNode("tilt"),e.j=1*(i?Number(i.nodeValue):0),this.Wd.push(e)}t=t.nextSibling}this.Oc()},t}();function aa(){this.Xc={wd:1,xd:1,Jd:0,Kd:0,ld:0,Xd:0,scale:1},this.Ab=!0,this.Mc=[]}var ba=function(){function t(){var t;for(this.Ia=Array(6),t=0;t<6;t++)this.Ia[t]=new aa}return t.prototype.ji=function(t,i,e,h){for(var s=0;s<6;s++){var a;if(a=this.Ia[s]){var o;(o=[]).push(new x(-1,-1,-1,0,0)),o.push(new x(1,-1,-1,1,0)),o.push(new x(1,1,-1,1,1)),o.push(new x(-1,1,-1,0,1));for(var r=0;r<o.length;r++)s<4?o[r].Aa(-Math.PI/2*s):o[r].oa(Math.PI/2*(4===s?-1:1)),h&&(o[r].Za(h.I*Math.PI/180),o[r].oa(-h.pitch*Math.PI/180)),o[r].Aa(-t*Math.PI/180),o[r].oa(i*Math.PI/180),o[r].Za(e*Math.PI/180);a.Ab=0<o.length}}},t}(),Z=function(){function t(t,i){this.pan={b:0,eb:0,min:0,max:360,d:0,Hf:0},this.j={b:0,eb:0,min:-90,max:90,d:0},this.I={b:0,eb:0,min:-180,max:180,d:0},this.h={b:90,eb:90,min:1,Ef:0,max:170,Yc:0,d:0,mode:0,Bh:0,mg:0},this.ua={I:0,pitch:0},this.l={width:10,height:10},this.Db=0,this.lf=new x,this.O={start:{x:0,y:0},W:{x:0,y:0},ic:{x:0,y:0},b:{x:0,y:0},V:{x:0,y:0}},this.M={Da:-1,startTime:0,start:{x:0,y:0},W:{x:0,y:0},ic:{x:0,y:0},b:{x:0,y:0},V:{x:0,y:0}},this.D={enabled:!0,W:{x:0,y:0},V:{x:0,y:0},h:{active:!1,Ha:0}},this.s={src:[],ae:4,width:640,height:480,Uc:!1,we:!1,ud:"loop",c:null,Hb:null,ag:null,Se:null,zf:null,format:"",qe:0},this.Ec=0,this.Y=this.la=this.ta=this.N=this.pb=this.Na=this.A=null,this.Cc="pano",this.tf="flashcontainer",this.mf="",this.control=null,this.qb=[],this.Pa=!1,this.je=1,this.F=null,this.nd=this.se=!1,this.jc="",this.bd=this.Fb=!1,this.Ee=0,this.fe=[],this.Nc=[],this.Pd=this.wc=1,this.pd=1024,this.Je=!1,this.Dh=0,this.v={enabled:!1,timeout:5,active:!1,Od:!1,speed:.4,We:0,Gf:0,Ff:!0,Ph:!1,startTime:0,hc:0},this.R={active:!1,md:!1,speed:.1,pan:0,j:0,I:0,h:70,ed:70,Wg:0,Yg:0,Xg:0,Vg:0},this.va=null,this.Vd={},this.w={mode:1,Fd:-1,da:0,Ga:0,Ub:.05,ob:255,Ob:1,mb:255,Nb:.3,Rc:!0,Xf:{enabled:!0,width:180,height:20,Yf:0,Wf:1,background:!0,mb:16777215,Nb:1,ob:0,Ob:1,ef:3,ff:1,bf:!0}},this.ma=null,this.K=[],this.fb=new Y(this),this.T=[],this.L=[],this.Sa=[],this.Ic=[],this.qa=[],this.Bc=[],this.ba=1,this.kc=this.lc=null,this.vd={},this.addListener=function(t,i){(this.vd[t]=this.vd[t]||[]).push(i)},this.Fh=function(t,i){var e,h,s=this.vd[t];if(s)for(h=0,e=s.length;h<e;h++)s[h].apply(null,i)},this.removeEventListener=function(t,i){var e,h,s=this.vd[t];if(s)for(h=0,e=s.length;h<e;h++)if(s[h]===i){1===e?delete this.vd[t]:s.splice(h,1);break}},this.g={H:[],Zc:"0x000000",mh:!1,ah:.4,bh:.4,Z:512,Ua:1,Zg:0,dh:"",width:0,height:0},this.cj={target:0,current:0,Ub:.01,li:2,pf:0,ie:!1,ai:!1},this.margin={left:0,top:0,right:0,bottom:0},this.C={Id:!1,Cf:!1,Va:!1,Df:!1,rc:!0,Og:!1,Ah:1,of:!0,ee:!0,te:!1,sensitivity:8},this.Ld=[],this.bc=!0,this.za={x:0,y:0},this.Ud=this.Qa=this.Td=this.Ib=this.ja=!1,this.$e=this.Oh=!0,this.yf=!1,this.me=!0,this.xf=!1,this.ia=0,this.Te=5,this.Hc=0,this.fh=200,this.sa=this.zc="",this.Vb="transition",this.ya="transform",this.cc="perspective",this.og="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC",this.Ra={width:0,height:0},this.vg=new x,this.ug=new x,this.wg=new x,this.xg=new x,this.tg=new x,this.xe=!1,this.currentNode="",this.bg=[],this.Ye=[],this.Pg=this.Bf=this.Sg=this.Af=this.ue=this.Qg=this.uh=this.Dc=this.Rg=!1,this.Oa=new ba,this.Zf=!1,this.td=function(t,i){if(0==t.length)return t;var e,h,s,a,o,r,n,l;for(l=[],e=i.He(t[0])-0,a=0;a<t.length;a++)(n=(r=a)+1)==t.length&&(n=0),h=i.He(t[n])-0,0<=e&&0<=h?l.push(t[r]):(0<=e||0<=h)&&((s=h/(h-e))<0&&(s=0),1<s&&(s=1),(o=new x).gc(t[r],t[n],s),e<0||l.push(t[r]),l.push(o)),e=h;return l},this.Uf=0,this.pg=1,this.cb=[],this.P=A(),this.rb=A(),this.ze=-1,this.Be=1,this.oi=this.uf=this.qf=this.Pf=this.Ie=0,this.le=!0,this.ng(),this.cd(this.fb),this.checkLoaded=this.qb,this.isLoaded=!1,i&&i.hasOwnProperty("useFlash")&&i.useFlash&&(this.Qa=!0,this.ja=this.Ib=!1,i.hasOwnProperty("flashPlayerId")?this.Cc=i.flashPlayerId:this.Cc="pano",i.hasOwnProperty("flashContainerId")?this.tf=i.flashContainerId:this.tf=t+"flash"),this.ha(),this.Qa||(this.Ta=new P(this)),this.kg(t),this.$h(),this.ke(),this.userdata=this.Vd,this.emptyHotspot=this.fb,this.mouse=this.za,this.rj(),this.o=new N(this),this.pa=new O(this)}return t.prototype.ng=function(){var t=0;this.Rg=!!navigator.userAgent.match(/(MSIE)/g),(this.Dc=!!navigator.userAgent.match(/(Safari)/g))&&(t=navigator.userAgent.indexOf("Safari"),this.Md=navigator.userAgent.substring(t+7),-1!=(t=navigator.userAgent.indexOf("Version"))&&(this.Md=navigator.userAgent.substring(t+8)),this.Md=this.Md.substring(0,this.Md.indexOf(" ")),this.uh=!0),(this.Qg=!!navigator.userAgent.match(/(Chrome)/g))&&(this.Dc=!1),this.ue=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),this.Af=!!navigator.userAgent.match(/(android)/i),this.Sg=!!navigator.userAgent.match(/(IEMobile)/i),this.Bf=this.ue||this.Af||this.Sg;var i;t=["Webkit","Moz","O","ms","Ms"];for(this.sa="",this.Vb="transition",this.ya="transform",this.cc="perspective",i=0;i<t.length;i++)void 0!==document.documentElement.style[t[i]+"Transform"]&&(this.sa="-"+t[i].toLowerCase()+"-",this.Vb=t[i]+"Transition",this.ya=t[i]+"Transform",this.cc=t[i]+"Perspective");this.yf=Q(),this.ja=R(),this.Ib=this.yf,this.ja&&(this.Ib=!1),this.Fb=!0,this.bd=!1,(this.ue||this.Af)&&(this.xh(80),this.Te=2),this.Vc("Pano2VR player - Prefix:"+this.sa+", "+(this.yf?"CSS 3D available":"CSS 3D not available")+", "+(this.ja?"WebGL available":"WebGL not available"));try{this.lb=new(window.audioContext||window.webkitAudioContext)}catch(t){this.lb=null}(this.Dc&&!(this.uh&&9<=Number(this.Md))||this.ue)&&(this.lb=null)},t.prototype.Vc=function(t){var i=document.getElementById("debug");i&&(i.innerHTML=t+"<br />"),window.console&&window.console.log(t)},t.prototype.rj=function(){this.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,10)}},t.prototype.xh=function(t){this.fh=t},t.prototype.xj=function(t){this.Sc=t},t.prototype.Fi=function(){return this.Ee},t.prototype.vj=function(t){this.zc=t},t.prototype.wi=function(){return this.Bf},t.prototype.ui=function(){return this.v.active},t.prototype.yj=function(t){this.Bf=Boolean(t)},t.prototype.ac=function(){return 1*this.l.height/(2*Math.tan(Math.PI/180*(this.Wb()/2)))},t.prototype.yh=function(t,i){this.isFullscreen&&(t=window.innerWidth,i=window.innerHeight);var e=t-this.margin.left-this.margin.right,h=i-this.margin.top-this.margin.bottom;if(!(e<10||h<10)){var s=window.devicePixelRatio||1;if(this.Je&&(s=1),this.A.style.width=e+"px",this.A.style.height=h+"px",this.A.style.left=this.margin.left+"px",this.A.style.top=this.margin.top+"px",this.ja)try{this.Na&&(this.Na.style.position="absolute",this.Na.style.display="inline",this.Na.style.width=e+"px",this.Na.style.height=h+"px",this.Na.width=e*s,this.Na.height=h*s),this.a&&(this.Ra.width=e*s,this.Ra.height=h*s,this.a.viewport(0,0,this.a.drawingBufferWidth,this.a.drawingBufferHeight))}catch(t){alert(t)}this.pb&&(this.pb.style.width=t+"px",this.pb.style.height=i+"px",this.pb.width=t,this.pb.height=i),this.ta&&(this.ta.style.width=t+"px",this.ta.style.height=i+"px",this.la.style.width=t+"px",this.la.style.height=i+"px",this.la.width=t,this.la.height=i,this.la.style.left=this.margin.left+"px",this.la.style.top=this.margin.top+"px",this.F&&this.F!=this.ta&&(this.F.style.width=t+"px",this.F.style.height=i+"px")),this.Ta&&((e=this.Ta.Ac).style.width=t+"px",e.style.height=i+"px",e.width=t,e.height=i,e.style.left=this.margin.left+"px",e.style.top=this.margin.top+"px"),this.se&&this.kd(),e=this.A.offsetWidth,h=this.A.offsetHeight,this.l.width==e&&this.l.height==h||(this.l.width=e,this.l.height=h),this.hk(),this.F&&this.F.ggUpdateSize&&this.F.ggUpdateSize(t,i)}},t.prototype.Kc=function(){this.Zf=!0},t.prototype.Lc=function(){this.yh(this.lc.offsetWidth,this.lc.offsetHeight)},t.prototype.Ni=function(){var t={width:0,height:0};return t.width=this.l.width,t.height=this.l.height,t},t.prototype.Qc=function(){var t={x:0,y:0},i=this.A;if(i.offsetParent)for(;t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;);return t},t.prototype.Dj=function(t){this.va=t},t.prototype.wh=function(t,i,e,h){this.margin.left=t,this.margin.top=i,this.margin.right=e,this.margin.bottom=h,this.va=this.skinObj,this.Kc()},t.prototype.gi=function(t){0==t&&(this.C.rc=!1),1==t&&(this.C.rc=!0),2==t&&(this.C.rc=!this.C.rc)},t.prototype.mk=function(){return 1==this.C.rc?1:0},t.prototype.ei=function(t,i){this.w.mode=1==i&&0<this.w.mode?0:Math.round(t),this.update(),this.Y&&(this.Y.changePolygonMode(t,i),this.Y.update())},t.prototype.mj=function(){return this.w.mode},t.prototype.hi=function(){},t.prototype.nk=function(){return 0},t.prototype.Lg=function(t,i,e){t=Math.atan2(t+1,e);var h=Math.atan2(i+1,e);i=Math.sin(t),e=Math.sin(h),t=Math.cos(t),h=Math.cos(h),this.vg.Ja(0,0,-1),this.ug.Ja(t,0,-i),this.wg.Ja(-t,0,-i),this.xg.Ja(0,h,-e),this.tg.Ja(0,-h,-e)},t.prototype.jf=function(t){return t=this.td(t,this.vg),t=this.td(t,this.ug),t=this.td(t,this.wg),t=this.td(t,this.xg),this.td(t,this.tg)},t.prototype.Hh=function(t){var i;this.Fb||this.Si==t||(this.Si=t,i=this.margin.left+this.l.width/2+"px ",i+=this.margin.top+this.l.height/2+"px ",this.ta.style[this.cc]=t+"px",this.ta.style[this.cc+"Origin"]=i,this.A.style[this.cc]=t+"px",this.A.style[this.cc+"Origin"]=i)},t.prototype.Ze=function(){var t,i,e,h,s=new x(0,0,-100),a=this.ac();e=100/this.h.b,h=this.g.width/this.g.height,i=this.l.height*e*h,e*=this.l.height;for(var o=0;o<this.K.length;o++){var r,n,l=this.K[o];if("point"==l.type&&(n=!1,2==this.Db?(t=(this.pan.b-l.pan)/100/h*i,r=(this.j.b-l.j)/100*e,Math.abs(t)<this.l.width/2+500&&Math.abs(r)<this.l.height/2+500&&(n=!0)):(s.Ja(0,0,-100),s.oa(-l.j*Math.PI/180),s.Aa(l.pan*Math.PI/180),s.Aa(-this.pan.b*Math.PI/180),s.oa(this.j.b*Math.PI/180),s.Za(this.I.b*Math.PI/180),s.z<.01?(r=-a/s.z,t=s.x*r,r*=s.y,Math.abs(t)<this.l.width/2+500&&Math.abs(r)<this.l.height/2+500&&(n=!0)):r=t=0),l.sb=t+this.l.width/2,l.Xa=r+this.l.height/2,l.c&&l.c.__div&&("none"!=l.c.__div.style[this.Vb]&&(l.c.__div.style[this.Vb]="none"),l.c.ggUse3d?(this.Fb||this.Hh(a),l.c.__div.style.width="1px",l.c.__div.style.height="1px",t="",this.Fb&&(t+="perspective("+a+"px) "),t+="translate3d(0px,0px,"+a+"px) ",t+="rotateZ("+this.I.b.toFixed(10)+"deg) ",t+="rotateX("+this.j.b.toFixed(10)+"deg) ",t+="rotateY("+(-this.pan.b).toFixed(10)+"deg) ",t+="rotateY("+l.pan.toFixed(10)+"deg) ",t+="rotateX("+(-l.j).toFixed(10)+"deg) ",t+="translate3d(0px,0px,"+(-1*l.c.gg3dDistance).toFixed(10)+"px) ",l.c.__div.style[this.ya+"Origin"]="0% 0%",l.c.__div.style[this.ya]=t,l.c.__div.style.left=this.margin.left+this.l.width/2+"px",l.c.__div.style.top=this.margin.top+this.l.height/2+"px"):!n||this.o.gd||this.o.xc?(l.c.__div.style.left="-1000px",l.c.__div.style.top="-1000px"):(l.c.__div.style.left=this.margin.left+t+this.l.width/2+"px",l.c.__div.style.top=this.margin.top+r+this.l.height/2+"px"))),"poly"==l.type){var u=[];if(2==this.Db)for(l.uc=[],n=0;n<l.Wd.length;n++)r=l.Wd[n],t=(this.pan.b-r.pan)/100/h*i,r=(this.j.b-r.j)/100*e,t+=this.margin.left+this.l.width/2,r+=this.margin.top+this.l.height/2,l.uc.push({sb:t,Xa:r});else{for(n=0;n<l.Wd.length;n++)r=l.Wd[n],s.Ja(0,0,-100),s.oa(-r.j*Math.PI/180),s.Aa(r.pan*Math.PI/180),s.Aa(-this.pan.b*Math.PI/180),s.oa(this.j.b*Math.PI/180),s.Za(this.I.b*Math.PI/180),u.push(s.clone());if(0<(u=this.jf(u)).length)for(n=0;n<u.length;n++)(s=u[n]).z<.1?(r=-a/s.z,t=this.l.width/2+s.x*r,r=this.l.height/2+s.y*r):r=t=0,s.sb=t,s.Xa=r;l.uc=u}}}},t.prototype.ri=function(){for(var t=[],i=0;i<this.K.length;i++){var e=this.K[i];"point"==e.type&&e.c&&e.c.__div&&t.push(e.c.__div)}return t},t.prototype.X=function(t,i){return t=Number(t),isNaN(i)&&(i=0),i<0&&(i=0),1<i&&(i=1),"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+i+")"},t.prototype.ej=function(){var t,i;if(this.la&&(this.w.Fd!=this.w.mode&&(this.w.Fd=this.w.mode,this.la.style.visibility=0<this.w.mode?"inherit":"hidden"),0<this.w.mode)){this.U||(this.U=this.la.getContext("2d")),this.U.width==this.l.width&&this.U.height==this.l.height||(this.U.width=this.l.width,this.U.height=this.l.height),this.U.clear?this.U.clear():this.U.clearRect(0,0,this.la.width,this.la.height);var e=1;for(3==this.w.mode&&(e=this.w.da),t=0;t<this.K.length;t++)if("poly"==(i=this.K[t]).type){var h=i.uc;if(2==this.w.mode&&(e=i.da),this.U.fillStyle=this.X(i.mb,i.Nb*e),this.U.strokeStyle=this.X(i.ob,i.Ob*e),0<h.length){for(this.U.beginPath(),i=0;i<h.length;i++){var s=h[i];0==i?this.U.moveTo(s.sb,s.Xa):this.U.lineTo(s.sb,s.Xa)}this.U.closePath(),this.U.stroke(),this.U.fill()}}}},t.prototype.fj=function(){var t,i;if(this.la.style.visibility="hidden",this.w.Fd!=this.w.mode&&(this.w.Fd=this.w.mode),0<this.w.mode&&!this.o.Rd){var e=1;for(3==this.w.mode&&(e=this.w.da),t=0;t<this.K.length;t++){var h=this.K[t];if("poly"==h.type){var s=h.uc;if(2==this.w.mode&&(e=h.da),0<s.length){var a=[];for(i=0;i<s.length;i++)a.push(s[i].sb),a.push(s[i].Xa),a.push(0);this.a.useProgram(this.Eb),this.a.enable(this.a.BLEND),this.a.blendFuncSeparate(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA,this.a.SRC_ALPHA,this.a.ONE),this.a.disable(this.a.DEPTH_TEST),i=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,i),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a),this.a.STATIC_DRAW),this.a.uniform2f(this.a.getUniformLocation(this.Eb,"uCanvasDimensions"),this.l.width,this.l.height),i=this.a.getUniformLocation(this.Eb,"uColor"),this.a.uniform3f(i,(h.ob>>16&255)/255,(h.ob>>8&255)/255,(255&h.ob)/255),s=this.a.getUniformLocation(this.Eb,"uAlpha"),this.a.uniform1f(s,h.Ob*e),this.a.vertexAttribPointer(this.Eb.ca,3,this.a.FLOAT,!1,0,0),this.a.drawArrays(this.a.LINE_LOOP,0,a.length/3),this.a.uniform3f(i,(h.mb>>16&255)/255,(h.mb>>8&255)/255,(255&h.mb)/255),this.a.uniform1f(s,h.Nb*e),this.a.enable(this.a.STENCIL_TEST),this.a.clearStencil(0),this.a.clear(this.a.STENCIL_BUFFER_BIT),this.a.colorMask(!1,!1,!1,!1),this.a.stencilFunc(this.a.ALWAYS,1,1),this.a.stencilOp(this.a.INCR,this.a.INCR,this.a.INCR),this.a.drawArrays(this.a.TRIANGLE_FAN,0,a.length/3),this.a.colorMask(!0,!0,!0,!0),this.a.stencilFunc(this.a.EQUAL,1,1),this.a.stencilOp(this.a.ZERO,this.a.ZERO,this.a.ZERO),this.a.drawArrays(this.a.TRIANGLE_FAN,0,a.length/3),this.a.disable(this.a.BLEND),this.a.enable(this.a.DEPTH_TEST),this.a.disable(this.a.STENCIL_TEST),this.a.useProgram(this.G)}}}}},t.prototype.Kg=function(t,i,e){var h,s,a=!1;for(h=0,s=t.length-1;h<t.length;s=h++){var o=t[h];s=t[s],o.Xa>e!=s.Xa>e&&i<(s.sb-o.sb)*(e-o.Xa)/(s.Xa-o.Xa)+o.sb&&(a=!a)}return a},t.prototype.hf=function(t,i){var e=-1;if(0<=this.w.mode)for(var h=0;h<this.K.length;h++){var s=this.K[h];"poly"==s.type&&s.uc&&0<s.uc.length&&this.Kg(s.uc,t,i)&&(e=h,s.sb=t,s.Xa=i)}return 0<=e&&this.K[e]},t.prototype.Wb=function(){var t;switch(this.h.mode){case 0:t=this.h.b/2;break;case 1:t=180*Math.atan(this.l.height/this.l.width*Math.tan(this.h.b/2*Math.PI/180))/Math.PI;break;case 2:t=180*Math.atan(this.l.height/Math.sqrt(this.l.width*this.l.width+this.l.height*this.l.height)*Math.tan(this.h.b/2*Math.PI/180))/Math.PI;break;case 3:t=4*this.l.height/3>this.l.width?this.h.b/2:180*Math.atan(4*this.l.height/(3*this.l.width)*Math.tan(this.h.b/2*Math.PI/180))/Math.PI}return 2*t},t.prototype.Pe=function(t){var i;switch(t/=2,this.h.mode){case 0:this.h.b=2*t;break;case 1:t=180*Math.atan(this.l.width/this.l.height*Math.tan(t*Math.PI/180))/Math.PI,this.h.b=2*t;break;case 2:i=Math.sqrt(this.l.width*this.l.width+this.l.height*this.l.height),t=180*Math.atan(i/this.l.height*Math.tan(t*Math.PI/180))/Math.PI,this.h.b=2*t;break;case 3:4*this.l.height/3>this.l.width||(t=180*Math.atan(3*this.l.width/(4*this.l.height)*Math.tan(t*Math.PI/180))/Math.PI),this.h.b=2*t}},t.prototype.ab=function(){var t,i;if(2==this.Db){i=this.h.b/2;var e=this.l.width/this.l.height;t=e*i;var h=50*this.g.width/(.01+this.g.height);this.h.b<this.h.min&&(this.h.b=this.h.min),this.h.b>this.h.max&&(this.h.b=this.h.max),100<this.h.b&&(this.h.b=100),this.h.b>2*h/e&&(this.h.b=2*h/e),this.h.b>this.j.max-this.j.min&&(this.h.b=this.j.max-this.j.min),this.h.b>this.pan.max-this.pan.min&&(this.h.b=this.pan.max-this.pan.min),50<this.j.b+i&&(this.j.b=50-i),this.j.b-i<-50&&(this.j.b=-50+i),this.pan.b+t>h&&(this.pan.b=h-t),this.pan.b-t<-h&&(this.pan.b=-h+t),this.j.b+i>this.j.max&&(this.j.b=this.j.max-i),this.j.b-i<this.j.min&&(this.j.b=this.j.min+i)}else if(0<this.h.Ef&&(t=this.wc,this.g.H&&0<this.g.H.length&&(t=this.g.H[0].height),this.h.min=360*Math.atan2(this.l.height/2,t/2*this.h.Ef)/Math.PI),this.h.b<this.h.min&&(this.h.b=this.h.min),this.h.b>this.h.max&&(this.h.b=this.h.max),i=this.Wb()/2,t=180*Math.atan(this.l.width/this.l.height*Math.tan(i*Math.PI/180))/Math.PI,2*i>this.j.max-this.j.min&&(i=(this.j.max-this.j.min)/2),this.Pe(2*i),this.j.max<90?this.j.b+i>this.j.max&&(this.j.b=this.j.max-i):this.j.b>this.j.max&&(this.j.b=this.j.max),-90<this.j.min?this.j.b-i<this.j.min&&(this.j.b=this.j.min+i):this.j.b<this.j.min&&(this.j.b=this.j.min),this.pan.max-this.pan.min<359.99){if((e=0)!=this.j.b){var s;h=(s=this.l.height/2)*Math.tan(i*Math.PI/180);0<(s=(s=s/Math.tan(Math.abs(this.j.b)*Math.PI/180))-h)&&(e=(e=180*Math.atan(1/(s/h))/Math.PI)*(this.pan.max-this.pan.min)/360)}this.pan.b+(t+e)>this.pan.max&&(this.pan.b=this.pan.max-(t+e),this.v.active&&(this.v.speed=-this.v.speed,this.pan.d=0)),this.pan.b-(t+e)<this.pan.min&&(this.pan.b=this.pan.min+(t+e),this.v.active&&(this.v.speed=-this.v.speed,this.pan.d=0)),90<this.j.b+i&&(this.j.b=90-i),this.j.b-i<-90&&(this.j.b=-90+i)}},t.prototype.update=function(t){void 0===t&&(t=0),this.Pa=!0,t&&(this.je=t)},t.prototype.xi=function(){return this.Y?Boolean(this.Y.isTileLoading):0<this.ia||0<this.Hc},t.prototype.kd=function(){var t,i=Date.now();this.Qa?this.Y&&(this.Yj(),2===this.Db?(this.ab(),this.ab(),this.Ze()):0===this.Db&&(t=this.ac(),this.Lg(this.l.width/2,this.l.height/2,t),this.Ze())):2===this.Db?(this.ab(),this.ab(),this.Ze(),this.bk()):0===this.Db&&(t=this.ac(),this.Lg(this.l.width/2,this.l.height/2,t),this.Ze(),this.Ud?this.gk():this.Oh&&this.Nh(),this.Ih(),this.ja?(this.s.Uc?this.fk():0<this.g.H.length?this.ek():this.dk(),this.fj()):(this.Ib?0<this.g.H.length?this.ak():this.$j():this.Td&&this.Xj(),this.ej()),this.Ta&&this.Ta.dj()),50<Date.now()-i?this.Je||(2<this.Uf?(this.Je=!0,this.Lc()):this.Uf++):this.Uf=0},t.prototype.dk=function(){var t;if(this.ab(),this.l.width==this.A.offsetWidth&&this.l.height==this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight),this.me&&(this.qc(0),this.Lc()),this.a)for(this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),D(this.rb),L(this.Wb(),this.Ra.width/this.Ra.height,this.rb),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),t=0;t<6;t++)D(this.P),K(this.P,-this.I.b*Math.PI/180,[0,0,1]),K(this.P,-this.j.b*Math.PI/180,[1,0,0]),K(this.P,(180-this.pan.b)*Math.PI/180,[0,1,0]),this.ua&&(K(this.P,-this.ua.pitch*Math.PI/180,[1,0,0]),K(this.P,this.ua.I*Math.PI/180,[0,0,1])),t<4?K(this.P,-Math.PI/2*t,[0,1,0]):K(this.P,Math.PI/2*(5==t?1:-1),[1,0,0]),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.kf),this.a.vertexAttribPointer(this.G.ca,3,this.a.FLOAT,!1,0,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.he),this.a.vertexAttribPointer(this.G.Fa,2,this.a.FLOAT,!1,0,0),6<=this.cb.length&&this.cb[t].loaded&&(this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.cb[t]),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.ge),this.a.uniform1i(this.G.Ke,0),this.a.uniformMatrix4fv(this.G.Ce,!1,this.P),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.a.drawElements(this.a.TRIANGLES,6,this.a.UNSIGNED_SHORT,0))},t.prototype.Rj=function(t){var i=this;return function(){if(i.Pa=!0,i.bc=!0,t.loaded=!0,i.ia&&i.ia--,0==i.ia&&i.F&&i.F.ggLoadedLevels&&i.F.ggLoadedLevels(),i.a.pixelStorei(i.a.UNPACK_FLIP_Y_WEBGL,1),null!=t.g&&t.g.complete){t.Qb=i.a.createTexture();try{i.a.bindTexture(i.a.TEXTURE_2D,t.Qb),i.a.texImage2D(i.a.TEXTURE_2D,0,i.a.RGBA,i.a.RGBA,i.a.UNSIGNED_BYTE,t.g)}catch(t){}i.a.texParameteri(i.a.TEXTURE_2D,i.a.TEXTURE_MAG_FILTER,i.a.LINEAR),i.a.texParameteri(i.a.TEXTURE_2D,i.a.TEXTURE_MIN_FILTER,i.a.LINEAR),i.a.texParameteri(i.a.TEXTURE_2D,i.a.TEXTURE_WRAP_S,i.a.CLAMP_TO_EDGE),i.a.texParameteri(i.a.TEXTURE_2D,i.a.TEXTURE_WRAP_T,i.a.CLAMP_TO_EDGE),i.a.bindTexture(i.a.TEXTURE_2D,null)}i.update()}},t.prototype.Yi=function(h){var s=this;return function(){s.Pa=!0,s.bc=!0;try{if(null!=h&&h.complete){var t,i={width:h.width,height:h.width,cache:!0,Mf:!0,La:1,Gb:1,$:[]};for(t=0;t<6;t++){var e={B:null,ga:null,g:null,Qb:null};e.B=document.createElement("canvas"),s.ja?(e.B.width=i.width,e.B.height=i.height):(e.B.width=s.g.Z+2*s.g.Ua,e.B.height=s.g.Z+2*s.g.Ua),e.ga=e.B.getContext("2d"),e.B.Gg=e.ga,e.B.style[s.ya+"Origin"]="0% 0%",e.B.style.overflow="hidden",e.B.style.position="absolute",e.g=h,e.ga&&(s.Ib?e.ga.drawImage(h,0,t*i.height,i.width,i.height,0,0,i.width+2,i.height+2):e.ga.drawImage(h,0,t*i.height,i.width,i.height,0,0,i.width,i.height)),s.ja&&s.a&&(s.a.pixelStorei(s.a.UNPACK_FLIP_Y_WEBGL,1),e.Qb=s.a.createTexture(),s.a.bindTexture(s.a.TEXTURE_2D,e.Qb),s.a.texImage2D(s.a.TEXTURE_2D,0,s.a.RGBA,s.a.RGBA,s.a.UNSIGNED_BYTE,e.B),s.a.texParameteri(s.a.TEXTURE_2D,s.a.TEXTURE_MAG_FILTER,s.a.LINEAR),s.a.texParameteri(s.a.TEXTURE_2D,s.a.TEXTURE_MIN_FILTER,s.a.LINEAR),s.a.texParameteri(s.a.TEXTURE_2D,s.a.TEXTURE_WRAP_S,s.a.CLAMP_TO_EDGE),s.a.texParameteri(s.a.TEXTURE_2D,s.a.TEXTURE_WRAP_T,s.a.CLAMP_TO_EDGE),s.a.bindTexture(s.a.TEXTURE_2D,null)),s.Ib&&(e.B.pc=-1,s.A.insertBefore(e.B,s.A.firstChild)),i.$[t]=e}s.g.H.push(i)}}catch(t){}s.update()}},t.prototype.Eh=function(){var t=this;return function(){t.Pa=!0,t.bc=!0,t.ia&&t.ia--,0==t.ia&&t.F&&t.F.ggLoadedLevels&&t.F.ggLoadedLevels()}},t.prototype.ek=function(){var t,i,e;if(this.ab(),this.me&&(this.qc(0),this.Lc()),this.a){this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.a.enable(this.a.DEPTH_TEST),D(this.rb),L(this.Wb(),this.Ra.width/this.Ra.height,this.rb),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.Hc=0,this.Kh(),this.eh();var h,s=this.rg();for(h=this.g.H.length-1;s<=h;){var a=this.g.H[h],o=1;h==this.g.H.length-1&&0==this.g.Ua&&(o=this.g.Z/(this.g.Z-.5));for(var r=0;r<6;r++){var n,l=(n=this.Oa.Ia[r]).Xc;if(n.Ab&&0<l.ld&&0<l.Xd&&0<l.scale||a.cache){var u;for(n.Pa=!1,n.Mc[h]||(n.Mc[h]={gb:0,vb:0,Bb:0,Cb:0}),u=n.Mc[h],a.cache?(u.gb=0,u.vb=0,u.Bb=a.La-1,u.Cb=a.Gb-1):this.Fg(a,l,u),l=!0,i=u.vb;i<=u.Cb;i++)for(t=u.gb;t<=u.Bb;t++){e=t+i*a.La+r*a.La*a.Gb;var d=a.$[e];if(d||(d=a.$[e]={}),this.ia<this.Te?d.g||(d.g=new Image,d.g.onload=this.Rj(d),d.g.onerror=this.Eh(),d.g.onabort=this.Eh(),d.g.setAttribute("src",this.Ve(r,h,t,i)),a.cache&&this.qb.push(d.g),0==this.ia&&this.F&&this.F.ggReLoadedLevels&&this.F.ggReLoadedLevels(),this.ia++,this.Pa=!0):this.Hc++,d.Qb){if(!d.Cd){var p;p=.5*h+1,d.Cd=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d.Cd);var c=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(c[3]=t*this.g.Z-this.g.Ua,c[0]=Math.min((t+1)*this.g.Z,a.width)+this.g.Ua,c[7]=i*this.g.Z-this.g.Ua,c[1]=Math.min((i+1)*this.g.Z,a.height)+this.g.Ua,c[4]=c[1],c[6]=c[3],c[9]=c[0],c[10]=c[7],e=0;e<12;e++)c[e]=0==e%3?o*p*(-2*c[e]/a.width+1):1==e%3?o*p*(-2*c[e]/a.height+1):p;this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(c),this.a.STATIC_DRAW)}}else l=!1;d.visible=n.Ab}u.$g=l}}h--}for(r=0;r<6;r++)if((n=this.Oa.Ia[r]).Ab)for(l=n.Xc,D(this.P),K(this.P,-this.I.b*Math.PI/180,[0,0,1]),K(this.P,-this.j.b*Math.PI/180,[1,0,0]),K(this.P,(180-this.pan.b)*Math.PI/180,[0,1,0]),this.ua&&(K(this.P,-this.ua.pitch*Math.PI/180,[1,0,0]),K(this.P,this.ua.I*Math.PI/180,[0,0,1])),r<4?K(this.P,-Math.PI/2*r,[0,1,0]):K(this.P,Math.PI/2*(5==r?1:-1),[1,0,0]),this.a.uniform1i(this.G.Ke,0),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.a.uniformMatrix4fv(this.G.Ce,!1,this.P),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.he),this.a.vertexAttribPointer(this.G.Fa,2,this.a.FLOAT,!1,0,0),this.a.activeTexture(this.a.TEXTURE0),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.ge),this.a.useProgram(this.G),h=s;h<=this.g.H.length-1;){if(a=this.g.H[h],n.Ab&&0<l.ld&&n.Mc[h]&&0<=n.Mc[h].gb){for(i=(u=n.Mc[h]).vb;i<=u.Cb;i++)for(t=u.gb;t<=u.Bb;t++)e=t+i*a.La+r*a.La*a.Gb,(d=a.$[e])||(d=a.$[e]={}),d.Qb&&(this.a.uniform1f(this.G.Wh,1e-4*(t%2+i%2*2)),this.a.bindBuffer(this.a.ARRAY_BUFFER,d.Cd),this.a.vertexAttribPointer(this.G.ca,3,this.a.FLOAT,!1,0,0),this.a.bindTexture(this.a.TEXTURE_2D,d.Qb),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),this.a.drawElements(this.a.TRIANGLES,6,this.a.UNSIGNED_SHORT,0)),d.visible=n.Ab;u.$g&&(h=this.g.H.length)}h++}for(t=0;t<this.g.H.length;t++)if(!(a=this.g.H[t]).cache)for(var f in a.$)a.$.hasOwnProperty(f)&&((d=a.$[f]).visible||(d.Qb&&this.a.deleteTexture(d.Qb),d.g=null,d.Cd&&this.a.deleteBuffer(d.Cd),delete a.$[f]));this.bc=!1}},t.prototype.gk=function(){var t;for(this.a.disable(this.a.DEPTH_TEST),t=0;t<this.L.length;t++){var i=this.L[t];D(this.P),K(this.P,-this.I.b*Math.PI/180,[0,0,1]),K(this.P,-this.j.b*Math.PI/180,[1,0,0]),K(this.P,(180-this.pan.b)*Math.PI/180,[0,1,0]),K(this.P,i.pan*Math.PI/180,[0,1,0]),K(this.P,-i.j*Math.PI/180,[1,0,0]),F(this.P,[0,0,1]),K(this.P,i.Za*Math.PI/180,[0,0,1]),K(this.P,-i.Aa*Math.PI/180,[0,1,0]),K(this.P,i.oa*Math.PI/180,[1,0,0]);var e=Math.tan(i.h/2*Math.PI/180);(s=i.eg)||(s=16/9);var h=this.P,s=(e=[e,e/s,1])[0],a=e[1];e=e[2];h[0]*=s,h[1]*=s,h[2]*=s,h[3]*=s,h[4]*=a,h[5]*=a,h[6]*=a,h[7]*=a,h[8]*=e,h[9]*=e,h[10]*=e,h[11]*=e,F(this.P,[0,0,-1]),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.kf),this.a.vertexAttribPointer(this.G.ca,3,this.a.FLOAT,!1,0,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.he),this.a.vertexAttribPointer(this.G.Fa,2,this.a.FLOAT,!1,0,0),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,i.Hb),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.ge),this.a.uniform1i(this.G.Ke,0),this.a.uniformMatrix4fv(this.G.Ce,!1,this.P),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.a.drawElements(this.a.TRIANGLES,6,this.a.UNSIGNED_SHORT,0)}this.a.enable(this.a.DEPTH_TEST)},t.prototype.fk=function(){var t;if(this.ab(),this.l.width==this.A.offsetWidth&&this.l.height==this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight),this.me&&(this.qc(0),this.Lc()),this.a)for(this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),D(this.rb),L(this.Wb(),this.Ra.width/this.Ra.height,this.rb),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.a.bindTexture(this.a.TEXTURE_2D,this.s.Hb),t=0;t<1;t++)D(this.P),K(this.P,-this.I.b*Math.PI/180,[0,0,1]),K(this.P,-this.j.b*Math.PI/180,[1,0,0]),K(this.P,(180-this.pan.b)*Math.PI/180,[0,1,0]),this.ua&&(K(this.P,-this.ua.pitch*Math.PI/180,[1,0,0]),K(this.P,this.ua.I*Math.PI/180,[0,0,1])),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.s.ag),this.a.vertexAttribPointer(this.G.ca,3,this.a.FLOAT,!1,0,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.s.Se),this.a.vertexAttribPointer(this.G.Fa,2,this.a.FLOAT,!1,0,0),this.a.activeTexture(this.a.TEXTURE0),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.s.zf),this.a.uniform1i(this.G.Ke,0),this.a.uniformMatrix4fv(this.G.Ce,!1,this.P),this.a.uniformMatrix4fv(this.G.Gc,!1,this.rb),this.a.drawElements(this.a.TRIANGLES,36,this.a.UNSIGNED_SHORT,0)},t.prototype.$j=function(){this.ab();var t=!1;this.l.width==this.A.offsetWidth&&this.l.height==this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight,this.A.style[this.ya+"OriginX"]=this.l.width/2+"px",this.A.style[this.ya+"OriginY"]=this.l.height/2+"px",t=!0);var i=Math.round(this.ac());for(this.Gd==i&&!t||this.Fb||(this.Gd=i,this.A.style[this.cc]=i+"px"),this.Oa.ji(this.pan.b,this.j.b,this.I.b,this.ua),t=0;t<6;t++){var e,h;(e=this.Oa.Ia[t])&&(h="",this.Fb?(h+="translate3d("+this.l.width/2+"px,"+this.l.height/2+"px,0px) ",h+="perspective("+i+"px) ",h+="translate3d(0px,0px,"+i+"px) "):h+="translate3d("+this.l.width/2+"px,"+this.l.height/2+"px,"+i+"px) ",h+="rotateZ("+Number(this.I.b).toFixed(10)+"deg) rotateX("+Number(this.j.b).toFixed(10)+"deg)\trotateY("+Number(-this.pan.b).toFixed(10)+"deg) ",e.Hg&&(h+=e.Hg,e.Ab||(h="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),e.B.style[this.ya]=h))}},t.prototype.Xj=function(){var t;if(this.ab(),this.pb&&(t=this.pb.getContext("2d")),this.l.width===this.A.offsetWidth&&this.l.height===this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight),t){var i=t.canvas.width/2,e=t.canvas.height/2,h=t.createRadialGradient(i,e,5,i,e,Math.max(i,e));h.addColorStop(0,"#333"),h.addColorStop(1,"#fff"),t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=h,t.fill(),t.fillStyle="#f00",t.font="20px Helvetica",t.textAlign="center",t.fillText("Pan: "+this.pan.b.toFixed(1),i,e-60),t.fillText("Tilt: "+this.j.b.toFixed(1),i,e-30),t.fillText("Fov: "+this.h.b.toFixed(1),i,e+0),t.fillText("Node: "+this.Ag(),i,e+30),t.fillText("Title: "+this.Vd.title,i,e+60)}},t.prototype.Yj=function(){this.ab(),this.l.width===this.A.offsetWidth&&this.l.height===this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight),this.Y&&this.Y.setPan&&(this.Y.setPan(this.pan.b),this.Y.setTilt(this.j.b),this.Y.setFov(this.h.b))},t.prototype.bk=function(){var t,i,e,h,s,a,o;this.la.style.visibility="inherit",this.U||(this.U=this.la.getContext("2d")),this.U.width==this.l.width&&this.U.height==this.l.height||(this.U.width=this.l.width,this.U.height=this.l.height),this.U.clear?this.U.clear():this.U.clearRect(0,0,this.la.width,this.la.height),this.Hc=0,this.ab(),i=100/this.h.b,e=this.g.width/this.g.height,s=this.l.height*i*e,i*=this.l.height,t=(this.pan.b/100/e-.5)*s+this.l.width/2,h=(this.j.b/100-.5)*i+this.l.height/2;for(var r,n,l,u,d,p=0;this.g.H.length>=p+2&&this.g.H[p+1].width>s;)p++;for(o=[],a=this.g.H.length-1;p<=a;){var c;(e=this.g.H[a]).cache?((c={gb:0,vb:0}).Bb=e.La-1,c.Cb=e.Gb-1):(c={},d=-h/i*(e.height/this.g.Z),r=(-t+this.l.width)/s*(e.width/this.g.Z),n=(-h+this.l.height)/i*(e.height/this.g.Z),c.gb=Math.min(Math.max(0,Math.floor(-t/s*(e.width/this.g.Z))),e.La-1),c.vb=Math.min(Math.max(0,Math.floor(d)),e.Gb-1),c.Bb=Math.min(Math.max(0,Math.floor(r)),e.La-1),c.Cb=Math.min(Math.max(0,Math.floor(n)),e.Gb-1));var f=!0;for(n=(o[a]=c).vb;n<=c.Cb;n++)for(r=c.gb;r<=c.Bb;r++)u=r+n*e.La,(d=e.$[u])||(d=e.$[u]={}),this.ia<this.Te?d.g||(d.g=new Image,d.g.onload=this.Qj(),d.g.onerror=this.Ue(d),d.g.onabort=this.Ue(d),d.g.setAttribute("src",this.Ve(0,a,r,n)),e.cache&&this.qb.push(d.g),0==this.ia&&this.F&&this.F.ggReLoadedLevels&&this.F.ggReLoadedLevels(),this.ia++,this.Pa=!0):this.Hc++,d.g&&d.g.complete||(f=!1),d.visible=!0;c.$g=f,a--}for(a=this.g.H.length-1;p<=a;){if(e=this.g.H[a],o[a]&&0<=o[a].gb)for(n=(c=o[a]).vb;n<=c.Cb;n++)for(r=c.gb;r<=c.Bb;r++)u=r+n*e.La,(d=e.$[u])||(d=e.$[u]={}),d.g&&d.g.complete&&this.U.drawImage(d.g,t+(-this.g.Ua+this.g.Z*r)*s/e.width,h+(-this.g.Ua+this.g.Z*n)*i/e.height,d.g.width*s/e.width,d.g.height*i/e.height),d.visible=!0;a--}for(s=0;s<this.g.H.length;s++)if(!(e=this.g.H[s]).cache)for(l in e.$)e.$.hasOwnProperty(l)&&((d=e.$[l]).visible||(d.g=null,delete e.$[l]));if(0<this.w.mode)for(s=1,3==this.w.mode&&(s=this.w.da),l=0;l<this.K.length;l++)if("poly"==(e=this.K[l]).type&&(i=e.uc,2==this.w.mode&&(s=e.da),0<i.length)){for(this.U.fillStyle=this.X(e.mb,e.Nb*s),this.U.strokeStyle=this.X(e.ob,e.Ob*s),this.U.beginPath(),e=0;e<i.length;e++)t=i[e],0==e?this.U.moveTo(t.sb,t.Xa):this.U.lineTo(t.sb,t.Xa);this.U.closePath(),this.U.stroke(),this.U.fill()}this.bc=!1},t.prototype.Pj=function(t){var i=this;return function(){i.Pa=!0,i.bc=!0,t.loaded=!0,t.g&&!t.B&&i.A.appendChild(t.g),i.ia&&i.ia--,0==i.ia&&i.F&&i.F.ggLoadedLevels&&i.F.ggLoadedLevels(),t.g&&t.ga&&(t.ga.drawImage(t.g,0,0),t.g=null)}},t.prototype.Qj=function(){var t=this;return function(){t.Pa=!0,t.bc=!0,t.ia&&t.ia--,0==t.ia&&t.F&&t.F.ggLoadedLevels&&t.F.ggLoadedLevels()}},t.prototype.Ue=function(t){var i=this;return function(){i.Pa=!0,i.bc=!0,i.ia&&i.ia--,0==i.ia&&i.F&&i.F.ggLoadedLevels&&i.F.ggLoadedLevels(),t.g=null}},t.prototype.Fg=function(t,i,e){e.gb=t.width/this.g.Z*i.wd,e.vb=t.height/this.g.Z*i.xd,e.Bb=t.width/this.g.Z*i.Jd,e.Cb=t.height/this.g.Z*i.Kd,e.gb=Math.min(Math.max(0,Math.floor(e.gb)),t.La-1),e.vb=Math.min(Math.max(0,Math.floor(e.vb)),t.Gb-1),e.Bb=Math.min(Math.max(0,Math.floor(e.Bb)),t.La-1),e.Cb=Math.min(Math.max(0,Math.floor(e.Cb)),t.Gb-1)},t.prototype.Bj=function(t){t=Math.round(t),this.Fb=0<(1&t),this.bd=0<(2&t),this.$e=0<(4&t),this.Je=0<(8&t),4096<=t&&(this.Ib=0<(4096&t),this.ja=0<(8192&t),this.Td=0<(32768&t))},t.prototype.Ii=function(){var t=0;return this.Fb&&(t|=1),this.bd&&(t|=2),this.$e&&(t|=4),this.Ib&&(t|=4096),this.ja&&(t|=8192),this.Td&&(t|=32768),t},t.prototype.Kh=function(){var t;if(!(this.Oa.Ia.length<6))for(t=0;t<6;t++){var i,e;i=this.Oa.Ia[t],(e=[]).push(new x(-1,-1,-1,0,0)),e.push(new x(1,-1,-1,1,0)),e.push(new x(1,1,-1,1,1)),e.push(new x(-1,1,-1,0,1));for(var h=0;h<4;h++)t<4?e[h].Aa(-Math.PI/2*t):e[h].oa(Math.PI/2*(4==t?-1:1)),this.ua&&(e[h].Za(this.ua.I*Math.PI/180),e[h].oa(-this.ua.pitch*Math.PI/180)),e[h].Aa(-this.pan.b*Math.PI/180),e[h].oa(this.j.b*Math.PI/180),e[h].Za(this.I.b*Math.PI/180);if(e=this.jf(e),i.Ab=0<e.length,i.Ab){for((i=i.Xc).wd=e[0].$b,i.Jd=e[0].$b,i.xd=e[0].$a,i.Kd=e[0].$a,h=1;h<e.length;h++)i.wd=Math.min(i.wd,e[h].$b),i.Jd=Math.max(i.Jd,e[h].$b),i.xd=Math.min(i.xd,e[h].$a),i.Kd=Math.max(i.Kd,e[h].$a);i.ld=i.Jd-i.wd,i.Xd=i.Kd-i.xd,i.scale=Math.max(i.ld,i.Xd)}else i.Xc.ld=-1,i.Xc.Xd=-1}},t.prototype.eh=function(){for(var t=0;t<this.g.H.length;t++){var i,e=this.g.H[t];for(i in e.$)e.$.hasOwnProperty(i)&&(e.$[i].visible=!1)}},t.prototype.rg=function(){for(var t=0,i=Math.tan(this.Wb()*Math.PI/360),e=(e=(e=this.l.height/(2*i))*(1+this.l.width/this.l.height*i/2))*Math.pow(2,1<(window.devicePixelRatio||1)?this.g.bh:this.g.ah);this.g.H.length>=t+2&&!this.g.H[t+1].Mf&&this.g.H[t+1].width>e;)t++;return t},t.prototype.ak=function(){this.ab();var t,i,e,h=!1;this.pg++,this.l.width===this.A.offsetWidth&&this.l.height===this.A.offsetHeight||(this.l.width=this.A.offsetWidth,this.l.height=this.A.offsetHeight,this.A.style[this.ya+"OriginX"]=this.l.width/2+"px",this.A.style[this.ya+"OriginY"]=this.l.height/2+"px",h=!0);var s=Math.round(this.ac());if((this.Gd!=s||h)&&(this.Gd=s,this.Fb||(this.A.style[this.cc]=s+"px",this.A.style[this.cc+"Origin"]="50% 50%")),(this.Hc=0)<this.g.H.length){var a;for(this.Kh(),this.eh(),a="",t=0;t<6;t++){var o;(o=this.Oa.Ia[t]).Ab&&(a=a+t+",")}var r,n=this.rg();for(r=this.g.H.length-1;n<=r;){h=this.g.H[r];var l=1;for(r==this.g.H.length-1&&0==this.g.Ua&&(l=this.g.Z/(this.g.Z-2)),t=0;t<6;t++){var u,d=(o=this.Oa.Ia[t]).Xc;if(o.Ab&&0<d.ld&&0<d.Xd&&0<d.scale||h.cache)for(o.Pa=!1,u={},h.cache?(u.gb=0,u.vb=0,u.Bb=h.La-1,u.Cb=h.Gb-1):this.Fg(h,d,u),e=u.vb;e<=u.Cb;e++)for(i=u.gb;i<=u.Bb;i++){if(a=i+e*h.La+t*h.La*h.Gb,(d=h.$[a])||(d=h.$[a]={}),!d.B&&this.ia<this.Te){if(0<this.Ye.length){for(d.B=this.Ye.shift(),a=this.A.firstChild;a&&a.pc&&(-1==a.pc||a.pc>=r);)a=a.nextSibling;this.A.insertBefore(d.B,a),d.ga=d.B.Gg}else if(this.Dh<this.fh){for(this.Dh++,d.B=document.createElement("canvas"),d.B.width=this.g.Z+2*this.g.Ua,d.B.height=this.g.Z+2*this.g.Ua,d.ga=d.B.getContext("2d"),d.B.Gg=d.ga,d.B.style[this.ya+"Origin"]="0% 0%",d.B.style.overflow="hidden",d.B.style.position="absolute",a=this.A.firstChild;a&&a.pc&&(-1==a.pc||a.pc>=r);)a=a.nextSibling;this.A.insertBefore(d.B,a)}d.B&&(d.g=new Image,d.g.style[this.ya+"Origin"]="0% 0%",d.g.style.position="absolute",d.g.style.overflow="hidden",d.B.pc=r,d.g.onload=this.Pj(d),d.g.onerror=this.Ue(d),d.g.onabort=this.Ue(d),d.g.setAttribute("src",this.Ve(t,r,i,e)),h.cache&&this.qb.push(d.g),0==this.ia&&this.F&&this.F.ggReLoadedLevels&&this.F.ggReLoadedLevels(),this.ia++,this.Pa=!0)}else this.Hc++;if(d.B){a="",this.Fb?(a+="translate3d("+this.l.width/2+"px,"+this.l.height/2+"px,0px) ",a+=" perspective("+s+"px) ",a+="translate3d(0px,0px,"+s+"px) "):a+="translate3d("+this.l.width/2+"px,"+this.l.height/2+"px,"+s+"px) ",a+="rotateZ("+Number(this.I.b).toFixed(10)+"deg) rotateX("+Number(this.j.b).toFixed(10)+"deg) rotateY("+Number(-this.pan.b).toFixed(10)+"deg) ",this.ua&&(a+="rotateX("+Number(-this.ua.pitch).toFixed(10)+"deg) rotateZ("+Number(this.ua.I).toFixed(10)+"deg) "),a=t<4?a+"rotateY("+-90*t+"deg)":a+"rotateX("+(4==t?-90:90)+"deg)";var p=1;this.bd?(p=this.pd/this.g.Z*(this.g.Z/h.width)*(2*r+1),a+=" scale("+(p=this.Dc?2/Math.tan(this.h.b*Math.PI/360)*p:2*p)*l*l+")"):p=1/(l*l),a+=" translate3d("+(1/l*i*this.g.Z-this.g.Ua-h.width/2)+"px,"+(1/l*e*this.g.Z-this.g.Ua-h.width/2)+"px,"+-h.width*p/2+"px)",o.Ab&&(d.visible=!0,d.B?d.B.style[this.ya]=a:d.g&&(d.g.style[this.ya]=a))}}}r--}for(s=0;s<this.g.H.length;s++){var c;h=this.g.H[s];for(c in h.$)h.$.hasOwnProperty(c)&&(!(d=h.$[c]).visible&&d.B&&(h.cache?(a="translate3d(-10px,-10px,0px) scale(0.001,0.001)",d.B?d.B.style[this.ya]=a:d.g&&(d.g.style[this.ya]="")):(d.ga&&(d.ga.clear?d.ga.clear():d.ga.clearRect(0,0,d.ga.canvas.width,d.ga.canvas.height)),this.Ye.push(d.B),d.B?(a="translate3d(-10px,-10px,0px) scale(0.001,0.001)",d.B.style[this.ya]=a,d.B.pc=-1):d.loaded&&this.A.removeChild(d.g),d.B=null,d.g=null,d.ga=null,delete h.$[c])))}this.bc=!1}},t.prototype.Ih=function(){var t,i=Math.round(this.ac());for(this.Fb||this.Hh(i),t=0;t<this.Sa.length;t++)this.Sa[t].Mh(i)},t.prototype.Nh=function(){for(var t=Math.round(this.ac()),i=0;i<this.L.length;i++)this.L[i].Mh(t)},t.prototype.hk=function(){for(var t=0;t<this.L.length;t++){this.L[t].Kc()}for(t=0;t<this.Sa.length;t++)this.Sa[t].Kc()},t.prototype.qc=function(t){this.me=!1;try{if(this.Na=t||document.createElement("canvas"),this.Na.width=100,this.Na.height=100,this.Na.style.display="none",this.Na.style.vk="none",this.A.insertBefore(this.Na,this.A.firstChild),this.a=this.Na.getContext("webgl",{premultipliedAlpha:!1,stencil:!0}),this.a||(this.a=this.Na.getContext("experimental-webgl",{premultipliedAlpha:!1,stencil:!0})),this.a){if(this.Ra.width=500,this.Ra.height=500,this.a.clearColor(0,0,0,0),this.g.Zc&&6<this.g.Zc.length){var i=parseInt(this.g.Zc);this.a.clearColor((i>>16&255)/255,(i>>8&255)/255,(i>>0&255)/255,1)}this.a.enable(this.a.DEPTH_TEST),this.a.viewport(0,0,500,500),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.Dd(),this.Mg(this.Pd),this.Ng(),this.o&&(this.o.Dd(),this.o.qc()),this.Ta&&(this.Ta.Dd(),this.Ta.qc())}}catch(t){}this.a?this.ja=!0:alert("Could not initialise WebGL!")},t.prototype.Dd=function(){var t,i=this.a.createShader(this.a.FRAGMENT_SHADER);t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n",t+="void main(void) {\n",t+=" gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n",t+="}\n",this.a.shaderSource(i,t),this.a.compileShader(i),this.a.getShaderParameter(i,this.a.COMPILE_STATUS)||(console&&console.log(this.a.getShaderInfoLog(i)),alert(this.a.getShaderInfoLog(i)),i=null);var e=this.a.createShader(this.a.VERTEX_SHADER);t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n",t+="attribute vec2 aTextureCoord;\n",t+="uniform mat4 uMVMatrix;\n",t+="uniform mat4 uPMatrix;\n",t+="uniform float uZoffset;\n",t+="varying vec2 vTextureCoord;\n",t+="void main(void) {\n",t+=" gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n",t+=" gl_Position.z += uZoffset;\n",t+=" vTextureCoord = aTextureCoord;\n",t+="}\n",this.a.shaderSource(e,t),this.a.compileShader(e),this.a.getShaderParameter(e,this.a.COMPILE_STATUS)||(console&&console.log(this.a.getShaderInfoLog(i)),alert(this.a.getShaderInfoLog(e)),e=null),this.G=this.a.createProgram(),this.a.attachShader(this.G,e),this.a.attachShader(this.G,i),this.a.linkProgram(this.G),this.a.getProgramParameter(this.G,this.a.LINK_STATUS)||alert("Could not initialise shaders"),this.a.useProgram(this.G),this.G.ca=this.a.getAttribLocation(this.G,"aVertexPosition"),this.a.enableVertexAttribArray(this.G.ca),this.G.Fa=this.a.getAttribLocation(this.G,"aTextureCoord"),this.a.enableVertexAttribArray(this.G.Fa),this.G.Gc=this.a.getUniformLocation(this.G,"uPMatrix"),this.G.Ce=this.a.getUniformLocation(this.G,"uMVMatrix"),this.G.Ke=this.a.getUniformLocation(this.G,"uSampler"),this.G.Wh=this.a.getUniformLocation(this.G,"uZoffset"),i=this.a.createShader(this.a.VERTEX_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n",t+="uniform vec2 uCanvasDimensions;\n",t+="void main(void) {\n",t+=" vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n",t+=" gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n",t+="}\n",this.a.shaderSource(i,t),this.a.compileShader(i),this.a.getShaderParameter(i,this.a.COMPILE_STATUS)||(alert(this.a.getShaderInfoLog(i)),i=null),e=this.a.createShader(this.a.FRAGMENT_SHADER),t="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n",t+="uniform float uAlpha;\n",t+="void main(void) {\n",t+=" gl_FragColor = vec4(uColor, uAlpha);\n",t+="}\n",this.a.shaderSource(e,t),this.a.compileShader(e),this.a.getShaderParameter(e,this.a.COMPILE_STATUS)||(alert(this.a.getShaderInfoLog(e)),e=null),this.Eb=this.a.createProgram(),this.a.attachShader(this.Eb,i),this.a.attachShader(this.Eb,e),this.a.linkProgram(this.Eb),this.a.getProgramParameter(this.Eb,this.a.LINK_STATUS)||alert("Could not initialise shaders"),this.Eb.ca=this.a.getAttribLocation(this.Eb,"aVertexPosition"),this.a.enableVertexAttribArray(this.Eb.ca)},t.prototype.wf=function(i){var e=this;return function(){try{if(i.$i)return;e.a.pixelStorei(e.a.UNPACK_FLIP_Y_WEBGL,1);var t=!1;null!=i.Ae&&i.Ae.complete?i.Jg||(e.a.bindTexture(e.a.TEXTURE_2D,i),e.a.texImage2D(e.a.TEXTURE_2D,0,e.a.RGBA,e.a.RGBA,e.a.UNSIGNED_BYTE,i.Ae),t=i.Jg=!0):null!=i.Ge&&i.Ge.complete&&(e.a.bindTexture(e.a.TEXTURE_2D,i),e.a.texImage2D(e.a.TEXTURE_2D,0,e.a.RGBA,e.a.RGBA,e.a.UNSIGNED_BYTE,i.Ge),t=!0),t&&(e.a.texParameteri(e.a.TEXTURE_2D,e.a.TEXTURE_MAG_FILTER,e.a.LINEAR),e.a.texParameteri(e.a.TEXTURE_2D,e.a.TEXTURE_MIN_FILTER,e.a.LINEAR),e.a.texParameteri(e.a.TEXTURE_2D,e.a.TEXTURE_WRAP_S,e.a.CLAMP_TO_EDGE),e.a.texParameteri(e.a.TEXTURE_2D,e.a.TEXTURE_WRAP_T,e.a.CLAMP_TO_EDGE),i.loaded=!0),e.a.bindTexture(e.a.TEXTURE_2D,null)}catch(t){}e.update()}},t.prototype.ub=function(t){return t?"{"==t.charAt(0)||"/"==t.charAt(0)||0<t.indexOf("://")||0==t.indexOf("javascript:")?t:this.zc+t:this.zc},t.prototype.vc=function(t,i,e){if(h=new RegExp("%0*"+i,"i").exec(t.toString())){var h=h.toString(),s=e.toString();for(h.charAt(h.length-1)!=i&&(s=(1+e).toString());s.length<h.length-1;)s="0"+s;t=t.replace(h,s)}return t},t.prototype.Ve=function(t,i,e,h){var s=this.g.Zg-1-i,a=this.g.dh,o="x";switch(t){case 0:o="f";break;case 1:o="r";break;case 2:o="b";break;case 3:o="l";break;case 4:o="u";break;case 5:o="d"}for(var r=0;r<3;r++)a=this.vc(a,"c",t),a=this.vc(a,"s",o),a=this.vc(a,"r",i),a=this.vc(a,"l",s),a=this.vc(a,"x",e),a=this.vc(a,"y",h),a=this.vc(a,"v",h),a=this.vc(a,"h",e);return this.ub(a)},t.prototype.Ng=function(){var t,i;if(this.cb)for(;0<this.cb.length;)this.a.deleteTexture(this.cb.pop());this.cb=[];for(var e=0;e<6;e++)(i=this.a.createTexture()).Ge=null,i.Ae=null,i.Jg=!1,this.a.bindTexture(this.a.TEXTURE_2D,i),this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,1,1,0,this.a.RGB,this.a.UNSIGNED_BYTE,null),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),this.Nc[e]&&((t=new Image).crossOrigin="anonymous",t.src=this.ub(this.Nc[e]),(i.Ge=t).addEventListener&&t.addEventListener("load",this.wf(i),!1),this.qb.push(t)),this.cb.push(i);for(e=0;e<6;e++)this.fe[e]&&((t=new Image).crossOrigin="anonymous",t.src=this.ub(this.fe[e]),t.addEventListener?t.addEventListener("load",this.wf(this.cb[e]),!1):t.onload=this.wf(this.cb[e]),this.cb[e].Ae=t,this.qb.push(t));for(e=0;e<this.L.length;e++)this.L[e].Hb=this.a.createTexture(),this.a.bindTexture(this.a.TEXTURE_2D,this.L[e].Hb),this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,1,1,0,this.a.RGB,this.a.UNSIGNED_BYTE,null),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);this.s.Hb=this.a.createTexture(),this.a.bindTexture(this.a.TEXTURE_2D,this.s.Hb),this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,1,1,0,this.a.RGB,this.a.UNSIGNED_BYTE,null),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),this.a.bindTexture(this.a.TEXTURE_2D,null)},t.prototype.Mg=function(t){var i,e,h,s;this.kf=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.kf);var a=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(i=0;i<12;i++)i%3<2&&(a[i]*=t);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a),this.a.STATIC_DRAW),this.he=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.he);var o=[1,0,0,0,0,1,1,1];this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(o),this.a.STATIC_DRAW),this.ge=this.a.createBuffer(),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.ge);var r=[0,1,2,0,2,3];this.a.bufferData(this.a.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),this.a.STATIC_DRAW);a=[],r=[],o=[];var n=new x;for(t=0;t<6;t++){for(h=t%3,s=t<3?1:0,e=0;e<4;e++){for(n.x=-1,n.y=-1,n.z=1,i=0;i<e;i++)n.th();if(o.push((n.x<0?.33:0)+.33*h,(n.y<0?0:.5)+.5*s),t<4)for(i=0;i<t;i++)n.uj();else 5==t?n.tj():n.sj();a.push(n.x,n.y,n.z)}i=4*t,r.push(0+i,1+i,2+i,0+i,2+i,3+i)}this.s.ag=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.s.ag),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a),this.a.STATIC_DRAW),this.s.Se=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.s.Se),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(o),this.a.STATIC_DRAW),this.s.zf=this.a.createBuffer(),this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.s.zf),this.a.bufferData(this.a.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),this.a.STATIC_DRAW),this.Ea=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.Ea),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),this.a.STATIC_DRAW),this.Ea.Rb=3,this.Ea.tc=4,this.$c=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,this.$c),o=[0,0,1,0,0,1,1,1],this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(o),this.a.STATIC_DRAW)},t.prototype.ne=function(){return this.pan.b},t.prototype.Di=function(){return this.R.pan},t.prototype.Ei=function(){for(var t=this.pan.b;t<-180;)t+=360;for(;180<t;)t-=360;return t},t.prototype.oe=function(){for(var t=this.pan.b-this.pan.Hf;t<-180;)t+=360;for(;180<t;)t-=360;return t},t.prototype.Qf=function(t){this.ha(),isNaN(t)||(this.pan.b=Number(t)),this.update()},t.prototype.Rf=function(t){this.ha(),isNaN(t)||(this.pan.b=Number(t)+this.pan.Hf),this.update()},t.prototype.ce=function(t,i){isNaN(t)||(this.Qf(this.ne()+t),i&&(this.pan.d=t))},t.prototype.di=function(t,i){this.ce(t*this.oc(),i)},t.prototype.pe=function(){return this.j.b},t.prototype.Ki=function(){return this.R.j},t.prototype.Tf=function(t){this.ha(),isNaN(t)||(this.j.b=Number(t)),this.update()},t.prototype.de=function(t,i){this.Tf(this.pe()+t),i&&(this.j.d=t)},t.prototype.fi=function(t,i){this.de(t*this.oc(),i)},t.prototype.Cj=function(t){this.ha(),isNaN(t)||(this.I.b=Number(t)),this.update()},t.prototype.Ji=function(){return this.I.b},t.prototype.yd=function(){return this.h.b},t.prototype.si=function(){return this.R.ed},t.prototype.Me=function(t){if(this.ha(),!isNaN(t)&&0<t&&t<180){var i=this.h.b;this.h.b=Number(t),this.ab(),i!=this.h.b&&this.update()}},t.prototype.hg=function(t,i){this.Me(this.yd()+t),i&&(this.h.d=t)},t.prototype.qd=function(t,i){var e;isNaN(t)||(e=t/90*Math.cos(this.h.b*Math.PI/360),e=this.h.b*Math.exp(e),this.Me(e),i&&(this.h.d=t))},t.prototype.Aj=function(t,i){this.ha(),isNaN(t)||(this.pan.b=t),isNaN(i)||(this.j.b=i),this.update()},t.prototype.Sf=function(t,i,e){this.ha(),isNaN(t)||(this.pan.b=t),isNaN(i)||(this.j.b=i),!isNaN(e)&&0<e&&e<180&&(this.h.b=e),this.update()},t.prototype.wj=function(){this.Sf(this.pan.eb,this.j.eb,this.h.eb)},t.prototype.zj=function(t){this.Oe(t),this.vh(t),this.Ne(t)},t.prototype.Oe=function(t){this.C.Va=t},t.prototype.Ne=function(t){this.C.Id=t},t.prototype.vh=function(t){this.C.Df=t},t.prototype.moveTo=function(t,i,e,h,s){this.ha(),this.R.active=!0,this.R.md=!1;var a=t.toString().split("/");1<a.length&&(t=Number(a[0]),h=i,i=Number(a[1]),2<a.length&&(e=Number(a[2]))),this.R.pan=isNaN(t)?this.pan.b:t,this.R.j=isNaN(i)?this.j.b:i,this.R.h=!isNaN(e)&&0<e&&e<180?e:this.h.b,!isNaN(h)&&0<h?this.R.speed=h:this.R.speed=1,this.R.I=isNaN(s)?this.I.b:s},t.prototype.Wi=function(t){this.moveTo(this.pan.eb,this.j.eb,this.h.eb,t)},t.prototype.Zh=function(t,i,e,h){var s=new Y(this);s.type="point",s.pan=i,s.j=e,s.id=t,s.c={},s.c.player=this.ka.Oc(),(s.c.hotspot=s).c.__div=document.createElement("div"),s.c.__div.appendChild(h),this.K.push(s),s.c.__div.style.left="-1000px",s.c.__div.style.top="-1000px",this.ta.insertBefore(s.c.__div,this.ta.firstChild),this.Pa=!0},t.prototype.Zj=function(t,i,e){for(var h=0;h<this.K.length;h++){var s=this.K[h];s.id==t&&(s.pan=i,s.j=e,s.Oc())}this.Pa=!0},t.prototype.pj=function(t){for(var i,e=-1,h=0;h<this.K.length;h++)(i=this.K[h]).id==t&&(e=h);-1<e&&((i=this.K.slice(e,1)[0]).c&&i.c.__div&&this.ta.removeChild(i.c.__div))},t.prototype.Gi=function(){for(var t=[],i=0;i<this.K.length;i++){var e=this.K[i];"point"==e.type&&t.push(String(e.id))}return t},t.prototype.ti=function(t){for(var i=0;i<this.K.length;i++){var e=this.K[i];if(e.id==t)return(i={}).id=t,i.pan=e.pan,i.tilt=e.j,e.c&&e.c.__div&&(i.div=e.c.__div),i}},t.prototype.Sh=function(t,i){this.O.start.x=t,this.O.start.y=i,this.O.W.x=t,this.O.W.y=i,this.D.W.x=t,this.D.W.y=i,this.Pf++},t.prototype.Qh=function(t,i){var e=this.Wb();this.pan.b+=t*e/this.l.height,this.j.b+=i*e/this.l.height,this.ab()},t.prototype.Rh=function(t,i){this.O.b.x=t,this.O.b.y=i,this.O.V.x=this.O.b.x-this.O.W.x,this.O.V.y=this.O.b.y-this.O.W.y,this.C.rc&&(this.O.W.x=this.O.b.x,this.O.W.y=this.O.b.y,this.update())},t.prototype.ha=function(){this.v.active&&(this.v.active=!1,this.pan.d=0,this.j.d=0,this.h.d=0),this.R.active&&(this.R.active=!1,this.pan.d=0,this.j.d=0,this.h.d=0),this.nd=this.R.md=!1,this.ye=(new Date).getTime()},t.prototype.yi=function(){return this.ye},t.prototype.sc=function(t){return!(t!=this.control&&(!t||!t.ggType||"container"!=t.ggType&&"cloner"!=t.ggType&&"timer"!=t.ggType))},t.prototype.ig=function(t,i){var e,h,s,a=this.ac();for(e=0;e<this.L.length+this.Sa.length;e++){var o=void 0;if((o=e<this.L.length?this.L[e]:this.Sa[e-this.L.length]).hb)return o}for(e=0;e<this.L.length+this.Sa.length;e++){o=e<this.L.length?this.L[e]:this.Sa[e-this.L.length];var r,n,l,u=[],d=new x;for(0<o.h&&(n=Math.tan(o.h/2*Math.PI/180),l=0<o.Pb?n*o.Xb/o.Pb:n,o.fc&&1!=o.fc&&(l*=o.fc)),r=0;r<4;r++){switch(r){case 0:d.Ja(-n,-l,-1);break;case 1:d.Ja(n,-l,-1);break;case 2:d.Ja(n,l,-1);break;case 3:d.Ja(-n,l,-1)}d.oa(-o.j*Math.PI/180),d.Aa(o.pan*Math.PI/180),d.Aa(-this.pan.b*Math.PI/180),d.oa(this.j.b*Math.PI/180),d.Za(this.I.b*Math.PI/180),u.push(d.clone())}if(0<(u=this.jf(u)).length){for(r=0;r<u.length;r++)(d=u[r]).z<.1?(s=-a/d.z,h=this.l.width/2+d.x*s,s=this.l.height/2+d.y*s):s=h=0,d.sb=h,d.Xa=s;if(this.Kg(u,t,i))return o}}return null},t.prototype.ve=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen},t.prototype.Vi=function(t){if(this.Jh(t),this.Ca&&this.Ca.onclick(),this.kc=null,!this.C.Va){var i;if(((t=t||window.event).which||0==t.which||1==t.which)&&this.sc(t.target))(i=this.ig(this.za.x,this.za.y))&&i.Yb&&(this.kc=i),this.Sh(t.pageX,t.pageY),this.M.Da=1,this.M.startTime=(new Date).getTime(),t.preventDefault(),this.ha();this.O.V.x=0,this.O.V.y=0}},t.prototype.jd=function(t,i){var e=this.w.Xf;e.enabled&&(this.ka!=this.fb&&0<=t&&0<=i&&""!=this.ka.title?(this.ma.innerHTML=this.ka.title,this.ma.style.color=this.X(e.Yf,e.Wf),e.background?this.ma.style.backgroundColor=this.X(e.mb,e.Nb):this.ma.style.backgroundColor="transparent",this.ma.style.border="solid "+this.X(e.ob,e.Ob)+" "+e.ff+"px",this.ma.style.borderRadius=e.ef+"px",this.ma.style.textAlign="center",0<e.width?(this.ma.style.left=t-e.width/2+this.margin.left+"px",this.ma.style.width=e.width+"px"):(this.ma.style.width="auto",this.ma.style.left=t-this.ma.offsetWidth/2+this.margin.left+"px"),this.ma.style.height=0<e.height?e.height+"px":"auto",this.ma.style.top=i+25+ +this.margin.top+"px",this.ma.style.visibility="inherit",this.ma.style.overflow="hidden"):(this.ma.style.visibility="hidden",this.ma.innerHTML=""))},t.prototype.Jh=function(t){var i=this.Qc();return this.ve()?(this.za.x=t.pageX-this.margin.left,this.za.y=t.pageY-this.margin.top):(this.za.x=t.pageX-i.x,this.za.y=t.pageY-i.y),i},t.prototype.cd=function(t){this.ka=t&&null!==t&&"object"==typeof t?t:this.fb,this.ka.Oc&&this.ka.Oc(),this.hotspot=this.ka},t.prototype.Ui=function(t){t=t||window.event;var i=this.Jh(t);if(!this.C.Va&&(0<=this.M.Da&&(t.preventDefault(),(t.which||0==t.which||1==t.which)&&this.Rh(t.pageX,t.pageY),this.ha()),this.ka==this.fb||"poly"==this.ka.type)){var e=this.fb;0<this.K.length&&this.sc(t.target)&&(e=this.hf(this.za.x,this.za.y)),this.Le(e),this.jd(t.pageX-i.x,t.pageY-i.y)}},t.prototype.Le=function(t){!1===t&&(t=this.fb),this.ka!=t&&(this.ka!=this.fb&&(0<this.w.mode&&(this.ka.Ga=0),this.va&&this.va.hotspotProxyOut&&this.va.hotspotProxyOut(this.ka.id)),t!=this.fb?(this.cd(t),this.va&&this.va.hotspotProxyOver&&this.va.hotspotProxyOver(this.ka.id),this.ka.Rc&&(this.ta.style.cursor="pointer"),0<this.w.mode&&(this.w.Ga=1,this.ka.Ga=1)):(this.cd(this.fb),this.ka.Rc&&(this.ta.style.cursor="auto"),0<this.w.mode&&(this.w.Ga=0)),this.Y&&this.Y.changeCurrentHotspot(this.ka.id))},t.prototype.Ti=function(t){if(t=t||window.event,this.ze=-1,!this.C.Va&&0<=this.M.Da){this.ha(),t.preventDefault(),this.M.Da=-3,this.O.V.x=0,this.O.V.y=0,t=(new Date).getTime();var i=-1;i=Math.abs(this.O.start.x-this.O.W.x)+Math.abs(this.O.start.y-this.O.W.y);if(t-this.M.startTime<400&&0<=i&&i<20){if(this.kc&&this.kc.Yb(),(i=this.hf(this.za.x,this.za.y))&&this.Gh(i),i=Math.abs(this.O.ic.x-this.O.W.x)+Math.abs(this.O.ic.y-this.O.W.y),t-this.Ed<700&&0<=i&&i<20){if(this.C.of){var e=this;setTimeout(function(){e.Qd()},10)}this.Ed=0}else this.Ed=t;this.O.ic.x=this.O.W.x,this.O.ic.y=this.O.W.y}}},t.prototype.gh=function(t){if(!this.C.Df&&(t=t||window.event,this.sc(t.target))){var i=t.detail?-1*t.detail:t.wheelDelta/40;this.C.Og&&(i=-i),t.axis&&(-1==this.ze?this.ze=t.axis:this.ze!=t.axis&&(i=0));var e=0<i?1:-1;0!=i&&(this.qd(e*this.C.Ah,!0),this.update()),t.preventDefault(),this.ha()}},t.prototype.Wj=function(t){t||(t=window.event);var i=t.touches,e=this.Qc();if(this.za.x=i[0].pageX-e.x,this.za.y=i[0].pageY-e.y,this.fd=this.kc=null,!this.C.Va){if(this.M.Da<0&&i[0]){var h;if(this.M.startTime=(new Date).getTime(),this.M.start.x=i[0].pageX,this.M.start.y=i[0].pageY,this.M.W.x=i[0].pageX,this.M.W.y=i[0].pageY,this.tb=i[0].target,this.sc(t.target))(h=this.ig(this.za.x,this.za.y))&&h.Yb&&(this.kc=h),(h=this.hf(this.za.x,this.za.y))&&(this.fd=h,this.Le(h),this.jd(t.pageX-e.x,t.pageY-e.y)),this.Sh(i[0].pageX,i[0].pageY),this.M.Da=i[0].identifier,t.preventDefault(),this.ha();if(this.tb){for(e=this.tb,h=!1;e&&e!=this.control;)e.onmouseover&&e.onmouseover(),e.onmousedown&&!h&&(e.onmousedown(),h=!0),e=e.parentNode;h&&t.preventDefault()}}1<i.length&&(this.M.Da=-5),!this.xf&&2==i.length&&i[0]&&i[1]&&(t=i[0].pageX-i[1].pageX,i=i[0].pageY-i[1].pageY,this.h.Bh=Math.sqrt(t*t+i*i),this.h.Yc=this.h.b),this.O.V.x=0,this.O.V.y=0}},t.prototype.Vj=function(t){t||(t=window.event);var i=t.touches,e=this.Qc();if(this.za.x=i[0].pageX-e.x,this.za.y=i[0].pageY-e.y,!this.C.Va){if(i[0]&&(this.M.W.x=i[0].pageX,this.M.W.y=i[0].pageY),0<=this.M.Da){t.preventDefault();for(var h=0;h<i.length;h++)if(i[h].identifier==this.M.Da){this.Rh(i[h].pageX,i[h].pageY);break}this.fd&&this.jd(t.pageX-e.x,t.pageY-e.y),this.ha()}2==i.length&&i[0]&&i[1]&&(this.M.Da=-6,this.xf||(e=i[0].pageX-i[1].pageX,i=i[0].pageY-i[1].pageY,this.h.mg=Math.sqrt(e*e+i*i),this.D.h.active=!0,this.D.h.Ha=this.h.Yc*Math.sqrt(this.h.Bh/this.h.mg),this.D.h.Ha>this.h.max&&(this.D.h.Ha=this.h.max),this.D.h.Ha<this.h.min&&(this.D.h.Ha=this.h.min),this.ha(),t.preventDefault()))}},t.prototype.Uj=function(t){var i,e=this.Qc(),h=!1;if(!this.C.Va){0<=this.M.Da&&this.ha();var s,a=(new Date).getTime();if(0<=(i=Math.abs(this.M.start.x-this.M.W.x)+Math.abs(this.M.start.y-this.M.W.y))&&i<20){if(t.preventDefault(),h=!0,this.sc(this.tb)&&this.kc&&this.kc.Yb(),this.tb)for(i=this.tb,s=!1;i&&i!=this.control;)i.onclick&&!s&&(i.onclick(),h=!(s=!0)),i=i.parentNode;if(i=Math.abs(this.M.ic.x-this.M.W.x)+Math.abs(this.M.ic.y-this.M.W.y),a-this.Ed<700&&0<=i&&i<20){if(t.preventDefault(),this.sc(this.tb)&&this.C.of){var o=this;setTimeout(function(){o.Qd()},1)}if(this.tb)for(i=this.tb,s=!1;i&&i!=this.control;)i.ondblclick&&!s&&(i.ondblclick(),h=!(s=!0)),i=i.parentNode;this.Ed=0}else this.Ed=a;this.M.ic.x=this.M.W.x,this.M.ic.y=this.M.W.y}if(this.tb)for(t.preventDefault(),i=this.tb,s=!1;i&&i!=this.control;)i.onmouseout&&i.onmouseout(),i.onmouseup&&!s&&(i.onmouseup(),s=!0),i=i.parentNode;this.tb=null,this.M.Da=-11,this.Le(this.fb),this.jd(t.pageX-e.x,t.pageY-e.y),this.fd&&h&&this.Gh(this.fd),this.fd=null}},t.prototype.Tj=function(t){var i=this.Qc();this.C.Va||(this.M.Da=-2),this.fd=null,this.Le(this.fb),this.jd(t.pageX-i.x,t.pageY-i.y)},t.prototype.Pi=function(){return null!=this.tb||0<=this.M.Da},t.prototype.ih=function(t){!this.Fc&&window.MSGesture&&(this.Fc=new MSGesture,this.Fc.target=this.control),this.Fc&&this.Fc.addPointer(t.pointerId)},t.prototype.zg=function(t){this.xf=!0,this.Be=1,this.C.Va||(t.touches?(this.tb=t.touches.target,this.sc(t.target)&&(t.preventDefault(),this.h.Yc=this.h.b,this.ha())):(t.preventDefault(),this.h.Yc=this.h.b,this.ha()))},t.prototype.pi=function(t){!this.C.Va&&this.sc(t.target)&&(t.preventDefault(),this.D.h.active=!0,this.D.h.Ha=this.h.Yc/Math.sqrt(t.scale),this.D.h.Ha>this.h.max&&(this.D.h.Ha=this.h.max),this.D.h.Ha<this.h.min&&(this.D.h.Ha=this.h.min),this.update(),this.ha())},t.prototype.Xi=function(t){this.C.Va||(t.preventDefault(),1!=t.scale&&(this.D.h.active=!0,this.Be*=t.scale,this.D.h.Ha=this.h.Yc/Math.sqrt(this.Be),this.D.h.Ha>this.h.max&&(this.D.h.Ha=this.h.max),this.D.h.Ha<this.h.min&&(this.D.h.Ha=this.h.min),this.update(),this.ha()))},t.prototype.yg=function(t){this.C.Va||(t.preventDefault(),this.ha(),this.Fc&&this.Fc.reset&&this.Fc.reset())},t.prototype.Qi=function(t){this.C.Id||(this.isFullscreen&&t.preventDefault(),this.Ec=t.keyCode,this.ha())},t.prototype.Ri=function(t){this.Ec&&(this.Ec=0,t.preventDefault(),this.ha())},t.prototype.bj=function(){this.Ec=0},t.prototype.De=function(){this.isFullscreen&&(this.ve()||this.exitFullscreen(),this.ve()&&(this.N.style.left="0px",this.N.style.top="0px"))},t.prototype.Gh=function(t){this.va&&this.va.hotspotProxyClick&&this.va.hotspotProxyClick(t.id),""!=t.url&&(this.If(t.url,t.target),this.jd(-1,-1))},t.prototype.oc=function(){return Math.min(1,2*Math.tan(Math.PI*this.h.b/360))},t.prototype.kh=function(){var t=this;setTimeout(function(){t.kh()},100),9!=this.Ie||this.Pg||requestAnimationFrame(function(){this.Vc("restart recover timer")}),10<this.Ie&&1<this.Pf&&(this.Vc("recover timer - disabling requestAnimationFrame"),this.Pg=!0,this.Jf()),this.Ie++},t.prototype.ck=function(){var t=this.a;if(0<this.L.length)for(var i=0;i<this.L.length;i++){var e=this.L[i];if(e.Tg&&e.qe!=e.c.currentTime&&(e.qe=e.c.currentTime,!e.eg&&0<e.c.videoHeight&&(e.eg=e.c.videoWidth/e.c.videoHeight),this.Ud))try{e.Hb&&(t.bindTexture(t.TEXTURE_2D,e.Hb),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,e.c),this.update())}catch(t){}}if(this.s.c&&this.s.qe!=this.s.c.currentTime){this.s.qe=this.s.c.currentTime;try{this.s.Hb&&this.s.we&&0<this.s.c.readyState&&(this.s.Uc=!0,t.bindTexture(t.TEXTURE_2D,this.s.Hb),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,this.s.c),this.update())}catch(t){}}},t.prototype.gj=function(t){var i;if(this.R.active){if(this.pan.d=this.R.pan-this.pan.b,360==this.pan.max-this.pan.min){for(;this.pan.d<-180;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.j.d=this.R.j-this.j.b,this.I.d=this.R.I-this.I.b,this.h.d=this.R.h-this.h.b;var e=this.R.speed*this.oc(),s=Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.I.d*this.I.d+this.h.d*this.h.d);i=this.pan.b-this.R.Wg;var a=this.j.b-this.R.Yg,o=this.I.b-this.R.Xg,r=this.h.b-this.R.Vg;100*Math.sqrt(i*i+a*a+o*o+r*r)<e&&(this.R.md=!0),this.R.Wg=this.pan.b,this.R.Yg=this.j.b,this.R.Xg=this.I.b,this.R.Vg=this.h.b,100*s<e||this.R.md?(this.R.active=!1,this.pan.d=0,this.j.d=0,this.I.d=0,this.h.d=0,this.pan.b=this.R.pan,this.j.b=this.R.j,this.I.b=this.R.I,this.h.b=this.R.h,this.onMoveComplete&&this.onMoveComplete()):(s=5*e<s?e/s:.2,this.pan.d*=s,this.j.d*=s,this.h.d*=s),this.pan.b+=this.pan.d,this.j.b+=this.j.d,this.I.b+=this.I.d,this.h.b+=this.h.d,this.ye=t.getTime(),this.update()}else if(this.v.active)if(s=t.getTime()-this.v.startTime,this.v.Ph){if(s/=100,a=!1,this.jc!=this.S.cliptitle){for(i=0;i<this.Bc.length;i++)if(""==this.jc||""!=this.jc&&this.Bc[i].cliptitle==this.jc){a=!0,this.S=this.Bc[i],this.jc=this.S.cliptitle;break}!a&&0<this.Bc.length&&(a=!0,this.S=this.Bc[0],this.jc=this.S.cliptitle)}else a=!0;if(a)if(this.nd)if(s>=this.S.length)if(this.nd=!1,this.jc=this.S.nextcliptitle,this.jc==this.S.cliptitle){if(1<this.qa.length){if(this.v.Ff)for(i=1e3;e=this.qa[Math.floor(Math.random()*this.qa.length)],i--&&e==this.currentNode;);else e=this.Dg();this.Wc("{"+e+"}"),this.v.startTime=t.getTime(),this.nd=!1,this.v.active=!0,this.o.od=!0}}else this.xe&&this.S.nextclipnodeid!=this.currentNode&&(this.Wc("{"+this.S.nextclipnodeid+"}"),this.o.enabled?(this.v.active=!1,this.o.od=!0):this.v.active=!0),this.v.startTime=t.getTime();else{for(e in t={qk:{value:0,name:"pan"},rk:{value:1,name:"tilt"},pk:{value:2,name:"fov"}}){for(i=t[e],a=0,a=Math.floor(s);!this.Bg(a,i.value)&&0<a;)a--;r=this.Bg(a,i.value);var n=this.zi(r);if(n){a=new h(r.time,r.value),o=new h(n.time,n.value);var l=(s-r.time)/(n.time-r.time);if(0!=r.type||0!=n.type&&3!=n.type)if(3==r.type)a=r.value;else{l=new h;var u=new h,d=n.time-r.time;0==r.type?u.Ja(r.time+.3*d,r.value):u.Ja(r.bezierouttime,r.bezieroutvalue),0==n.type||3==n.type?l.Ja(n.time-.3*d,n.value):l.Ja(n.bezierintime,n.bezierinvalue),(r=new h).ci(a,o,u,l,s),a=r.y}else(r=new h).gc(a,o,l),a=r.y}else a=r.value;switch(i.value){case 0:i=this.pan.b,this.pan.b=a,this.pan.d=this.pan.b-i;break;case 1:i=this.j.b,this.j.b=a,this.j.d=this.j.b-i;break;case 2:i=this.h.b,this.h.b=a,this.h.d=this.h.b-i}}this.update()}else e=this.S.keyframes[0],s=this.S.keyframes[1],i=this.S.keyframes[2],this.R.md||this.ne()==e.value&&this.pe()==s.value&&this.yd()==i.value?(this.nd=!0,this.v.startTime=t.getTime()):(this.moveTo(e.value,s.value,i.value,1),this.v.active=!0)}else if(0<this.v.Gf&&this.xe&&s>=1e3*this.v.Gf){if(1<this.qa.length){if(this.v.Ff)for(i=1e3;e=this.qa[Math.floor(Math.random()*this.qa.length)],i--&&e==this.currentNode;);else i=this.qa.indexOf(this.currentNode),++i>=this.qa.length&&(i=0),e=this.qa[i];this.v.startTime=t.getTime(),this.v.hc=t.getTime(),this.v.timeout=0,this.Wc("{"+e+"}"),this.v.active=!0,this.o.od=!0}}else e=t.getTime(),t=s=1e3/60,0!=this.v.hc&&(t=e-this.v.hc),this.j.d=this.v.We*(0-this.j.b)/100,this.h.d=this.v.We*(this.h.eb-this.h.b)/100,this.pan.d=.95*this.pan.d+-this.v.speed*this.oc()*.05,s=t/s,this.pan.b+=this.pan.d*s,this.j.b+=this.j.d*s,this.h.b+=this.h.d*s,this.v.hc=e,this.update();else this.v.enabled&&this.M.Da<0&&t.getTime()-this.ye>1e3*this.v.timeout&&(this.v.Od&&this.isLoaded||!this.v.Od)&&(this.v.active=!0,this.v.startTime=t.getTime(),this.v.hc=0,this.pan.d=0,this.j.d=0,this.h.d=0),this.D.enabled&&0==this.Ec&&this.M.Da<0&&(0!=this.pan.d||0!=this.j.d||0!=this.h.d)&&(this.pan.d*=.9,this.j.d*=.9,this.h.d*=.9,this.pan.b+=this.pan.d,this.j.b+=this.j.d,this.qd(this.h.d),this.pan.d*this.pan.d+this.j.d*this.j.d+this.h.d*this.h.d<1e-4&&(this.pan.d=0,this.j.d=0,this.h.d=0),this.update())},t.prototype.hj=function(t){var i;if(this.o.xc)if(i=t.getTime()-this.o.Vh,1<=(i/=1e3*this.o.Uh)){for(this.o.xc=!1,i=0;i<this.pa.Sd.length;i++)this.pa.rf(this.pa.Sd[i]);this.o.Vf=t.getTime(),this.Ch(),this.o.gd=!0,1!=this.o.Lb&&2!=this.o.Lb&&3!=this.o.Lb||this.o.df||this.moveTo(this.o.Qe,this.o.Re,this.o.ed,this.o.$d)}else this.o.jh(i);else this.o.gd&&(i=t.getTime()-this.o.Vf,1<=(i/=1e3*this.o.fg)?(this.o.gd=!1,this.ye=t.getTime(),this.update(),1!=this.o.Lb&&2!=this.o.Lb&&3!=this.o.Lb||!this.o.df||this.moveTo(this.o.Qe,this.o.Re,this.o.ed,this.o.$d),this.Oe(this.o.hh),this.Ne(this.o.Ug),this.v.active=this.o.od,this.v.hc=0,this.o.od=!1):this.o.jh(i));(i=this.cj).ai&&(i.ie?t.getTime()-i.pf>=1e3*i.li&&(i.ie=!1):(i.current+=i.Ub,i.current<0&&(i.current=0,i.Ub=-i.Ub,i.ie=!0,i.pf=t.getTime()),1<i.current&&(i.current=1,i.Ub=-i.Ub,i.ie=!0,i.pf=t.getTime())))},t.prototype.lj=function(){var t;if(2==this.w.mode)for(t=0;t<this.K.length;t++){var i=this.K[t];"poly"==i.type&&i.Ga!=i.da&&(i.Ga>i.da?(i.da+=this.w.Ub,i.Ga<i.da&&(i.da=i.Ga)):(i.da-=this.w.Ub,i.Ga>i.da&&(i.da=i.Ga)),this.update())}3==this.w.mode&&this.w.Ga!=this.w.da&&(this.w.Ga>this.w.da?(this.w.da+=this.w.Ub,this.w.Ga<this.w.da&&(this.w.da=this.w.Ga)):(this.w.da-=this.w.Ub,this.w.Ga>this.w.da&&(this.w.da=this.w.Ga)),this.update())},t.prototype.ij=function(){0<=this.M.Da&&(this.C.rc?(this.D.V.x=.4*(this.O.W.x-this.D.W.x),this.D.V.y=.4*(this.O.W.y-this.D.W.y),this.D.W.x+=this.D.V.x,this.D.W.y+=this.D.V.y):(this.D.V.x=.1*-this.O.V.x*this.C.sensitivity/8,this.D.V.y=.1*-this.O.V.y*this.C.sensitivity/8),this.Qh(this.D.V.x,this.D.V.y),this.update()),this.D.h.active&&(this.hg(.4*(this.D.h.Ha-this.h.b)),Math.abs(this.D.h.Ha-this.h.b)/this.h.b<.001&&(this.D.h.active=!1),this.update()),this.D.enabled&&(0!=this.D.V.x||0!=this.D.V.y)&&this.M.Da<0&&(this.D.V.x=.9*this.D.V.x,this.D.V.y=.9*this.D.V.y,this.D.V.x*this.D.V.x+this.D.V.y*this.D.V.y<.1?(this.D.V.x=0,this.D.V.y=0):(this.Qh(this.D.V.x,this.D.V.y),this.update()))},t.prototype.jj=function(){if(0!=this.Ec){var t=this.C.sensitivity/8;switch(this.Ec){case 37:case 65:this.ce(t*this.oc(),!0);break;case 38:case 87:this.de(t*this.oc(),!0);break;case 39:case 68:this.ce(-t*this.oc(),!0);break;case 40:case 83:this.de(-t*this.oc(),!0);break;case 43:case 107:case 16:case 81:this.C.Cf||this.qd(-t,!0);break;case 17:case 18:case 109:case 45:case 91:case 69:this.C.Cf||this.qd(t,!0)}this.update()}},t.prototype.kj=function(){if(!this.isLoaded&&this.se){var t,i=0,e=this.qb.length;if(this.Td)e=50,this.qf<e&&this.qf++,i=this.qf;else for(t=0;t<e;t++)this.qb[t].complete&&this.qb[t].src!=this.og&&i++;i==e?(this.Ee=1,this.isLoaded=!0,this.F&&this.F.ggLoaded&&this.F.ggLoaded(),this.v.Od&&this.v.enabled&&!this.R.active&&!this.o.xc&&(this.v.active=!0,this.v.hc=0)):this.Ee=i/(1*e)}},t.prototype.Jf=function(){var t=new Date;for(this.Qa&&""!==this.Cc&&!this.Y&&document.hasOwnProperty(this.Cc)&&document[this.Cc].setPan&&0==this.oi--&&(this.Y=document[this.Cc],this.Ib=this.ja=!1,this.la&&(this.la.style.visibility="hidden"),this.Y.setLocked(!0),this.Y.setSlaveMode(!0),this.Y.readConfigString(this.mf),this.Vc("Flash player '"+this.Cc+"' connected.")),this.uf++,120<=this.uf&&(this.uf=0),this.Pf=this.Ie=0,this.Zf&&(this.Lc(),this.Zf=!1),this.ij(),this.jj(),this.kj();360<this.pan.b;)this.pan.b-=360;for(;this.pan.b<-360;)this.pan.b+=360;this.gj(t),this.hj(t),this.ck(),0<this.w.mode&&this.lj(),this.$f(),this.Pa&&(0<this.je?this.je--:(this.Pa=!1,this.je=0),this.o.gd||this.o.xc||this.kd());var i=this;setTimeout(function(){i.Jf()},1e3/60)},t.prototype.Lh=function(){var t=this;setTimeout(function(){t.dd(!1)},10),setTimeout(function(){t.dd(!1)},100)},t.prototype.$f=function(){this.lf.sg(this.pan.b,this.j.b);for(var t=0;t<this.T.length+this.L.length;t++)(t<this.T.length?this.T[t]:this.L[t-this.T.length]).$f()},t.prototype.Gj=function(t,i){var e,h,s=this;if(0!=this.Ld.length||!this.C.te||this.C.ee)if(this.Ca)this.N.removeChild(this.Ca),this.Ca=null;else{for(this.Ca=document.createElement("div"),e="left: "+t+"px;top:\t "+i+"px;",e+="z-index: 5000;",e+="position:relative;",e+="display: table;",e+="background-color: white;",e+="border: 1px solid lightgray;",e+="box-shadow: 1px 1px 3px #333;",e+="font-family: Verdana, Arial, Helvetica, sans-serif;",e+="font-size: 9pt;",e+="opacity : 0.95;",this.Ca.setAttribute("style",e),e=document.createElement("style"),h=document.createTextNode(".contextrow:hover { background-color: #3399FF }"),e.type="text/css",e.styleSheet?e.styleSheet.cssText=h.nodeValue:e.appendChild(h),this.Ca.appendChild(e),h=0;h<this.Ld.length;h++){var a=this.Ld[h],o=document.createElement("div");e="text-align: left;",e+="margin: 0;",e+="padding: 5px 20px;",e+="vertical-align: left;",o.setAttribute("style",e),o.setAttribute("class","contextrow"),(e=document.createElement("a")).href=a.url,e.target="_blank",e.innerHTML=a.text,e.setAttribute("style","color: black; text-decoration: none;"),o.appendChild(e),this.Ca.appendChild(o)}0<this.Ld.length&&(!this.C.te||this.C.ee)&&this.Ca.appendChild(document.createElement("hr")),this.C.ee&&((h=document.createElement("div")).setAttribute("class","contextrow"),e="text-align: left;margin: 0;",e+="padding: 5px 20px;",e+="vertical-align: left;",e+="cursor: pointer;",h.setAttribute("style",e),h.onclick=function(){s.Qd()},h.innerHTML=this.ve()?"Exit Fullscreen":"Enter Fullscreen",this.Ca.appendChild(h)),this.C.te||(e="text-align: left;margin: 0;",e+="padding: 5px 20px;",e+="vertical-align: left;",(h=document.createElement("div")).setAttribute("style",e),h.setAttribute("class","contextrow"),(e=document.createElement("a")).href="http://pano2vr.com/",e.target="_blank",e.innerHTML="Created with Pano2VR",e.setAttribute("style","color: black; text-decoration: none;"),h.appendChild(e),this.Ca.appendChild(h)),this.N.insertBefore(this.Ca,this.N.firstChild),this.Ca.onclick=function(){s.Ca&&(s.N.removeChild(s.Ca),s.Ca=null)},this.Ca.oncontextmenu=this.Ca.onclick}},t.prototype.$h=function(){var t,e=this;this.control=this.control=t=this.ta,this.Lh(),setTimeout(function(){e.Jf()},10),setTimeout(function(){e.kh()},200),setTimeout(function(){e.Kc(),e.kd()},10),t.addEventListener&&(t.addEventListener("touchstart",function(t){e.Wj(t)},!1),t.addEventListener("touchmove",function(t){e.Vj(t)},!1),t.addEventListener("touchend",function(t){e.Uj(t)},!1),t.addEventListener("touchcancel",function(t){e.Tj(t)},!1),t.addEventListener("pointerdown",function(t){e.ih(t)},!1),t.addEventListener("MSPointerDown",function(t){e.ih(t)},!1),t.addEventListener("MSGestureStart",function(t){e.zg(t)},!1),t.addEventListener("MSGestureEnd",function(t){e.yg(t)},!1),t.addEventListener("MSGestureChange",function(t){e.Xi(t)},!1),t.addEventListener("gesturestart",function(t){e.zg(t)},!1),t.addEventListener("gesturechange",function(t){e.pi(t)},!1),t.addEventListener("gestureend",function(t){e.yg(t)},!1),t.addEventListener("mousedown",function(t){e.Vi(t)},!1),t.addEventListener("mousemove",function(t){e.Ui(t)},!1),document.addEventListener("mouseup",function(t){e.Ti(t)},!1),t.addEventListener("mousedblclick",function(){e.Qd()},!1),t.addEventListener("mousewheel",function(t){e.gh(t)},!1),t.addEventListener("DOMMouseScroll",function(t){e.gh(t)},!1),document.addEventListener("keydown",function(t){e.Qi(t)},!1),document.addEventListener("keyup",function(t){e.Ri(t)},!1),window.addEventListener("orientationchange",function(){e.Lh()},!1),window.addEventListener("resize",function(){e.Kc()},!1),window.addEventListener("blur",function(){e.bj()},!1),this.N.addEventListener("webkitfullscreenchange",function(){e.De()},!1),document.addEventListener("mozfullscreenchange",function(){e.De()},!1),window.addEventListener("webkitfullscreenchange",function(){e.De()},!1),document.addEventListener("MSFullscreenChange",function(){e.De()},!1)),t.oncontextmenu=function(t){if(void 0===t&&(t=window.event),!t.ctrlKey){var i=t.pageX;return t=t.pageY,e.isFullscreen||(i-=e.lc.offsetLeft,t-=e.lc.offsetTop),e.Gj(i,t),!1}return!0}},t.prototype.cg=function(){for(var t=0;t<this.K.length;t++)if("point"==this.K[t].type&&(this.va&&this.va.addSkinHotspot?(this.K[t].Oc(),this.K[t].c=new this.va.addSkinHotspot(this.K[t])):this.K[t].c=new M(this,this.K[t]),this.K[t].c.__div.style.left="-1000px",this.K[t].c.__div.style.top="-1000px",this.K[t].c&&this.K[t].c.__div)){var i=this.ta.firstChild;i?this.ta.insertBefore(this.K[t].c.__div,i):this.ta.appendChild(this.K[t].c.__div)}},t.prototype.Th=function(){var t,i=document.createElement("fakeelement"),e={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(t in e)if(void 0!==i.style[t])return e[t]},t.prototype.nc=function(t){var i=[];t=new RegExp(t,"");for(var e=0;e<this.T.length;e++)t.test(this.T[e].id)&&i.push(this.T[e]);for(e=0;e<this.L.length;e++)t.test(this.L[e].id)&&i.push(this.L[e]);for(e=0;e<this.Sa.length;e++)t.test(this.Sa[e].id)&&i.push(this.Sa[e]);return i},t.prototype.Tc=function(t){if(this.Qa){var i=this.Y;if(i)return i.isPlaying(t)}else{if("_main"===t)return!0;if(0<(t=this.nc(t)).length)return!t[0].c.ended&&!t[0].c.paused}return!1},t.prototype.Fe=function(t,i){if(this.Qa)(e=this.Y)&&e.playSound(t,i);else for(var e=this.nc(t),h=0;h<e.length;h++){var s=e[h];s.mc=i&&!isNaN(Number(i))?Number(i)-1:s.loop-1,-1==s.mc&&(s.mc=1e7),s.c.play()}},t.prototype.lh=function(t,i){for(var e=this.nc(t),h=0;h<e.length;h++){var s=e[h];this.Tc(s.id)?this.Kf(s.id):this.Fe(s.id,i)}},t.prototype.Kf=function(t){if(this.Qa){var i=this.Y;i&&i.pauseSound(t)}else if("_main"==t){for(t=0;t<this.T.length;t++)this.T[t].c.pause();for(t=0;t<this.L.length;t++)this.L[t].c.pause()}else for(i=this.nc(t),t=0;t<i.length;t++)i[t].c.pause()},t.prototype.Yh=function(t,i){for(var e=this.nc(t),h=0;h<e.length;h++){var s=e[h];0==i||1==i?s.Ad&&s.Ad(1==i):2==i&&s.Yb&&s.Yb()}},t.prototype.Oj=function(t){if(this.Qa){var i=this.Y;i&&i.stopSound(t)}else if("_main"===t){for(t=0;t<this.T.length;t++)this.T[t].c.pause(),this.T[t].c.currentTime=0;for(t=0;t<this.L.length;t++)this.L[t].c.pause(),this.L[t].c.currentTime=0}else for(i=this.nc(t),t=0;t<i.length;t++){var e=i[t];e.c&&e.c.pause&&(e.c.pause(),e.c.currentTime=0)}},t.prototype.Fj=function(t,i){if(this.Qa){(s=this.Y)&&s.setVolume(t,i)}else{var e=Number(i);if(1<e&&(e=1),e<0&&(e=0),"_video"===t&&this.s.c&&(this.s.c.volume=e),"_main"===t){for(this.ba=e,s=0;s<this.T.length;s++)this.T[s].c.volume=this.T[s].level*this.ba;for(s=0;s<this.L.length;s++)this.L[s].c.volume=this.L[s].level*this.ba;this.s.c&&(this.s.c.volume=this.ba)}else for(var h=this.nc(t),s=0;s<h.length;s++){var a=h[s];a.c&&a.c.volume&&(a.level=e,a.c.volume=e*this.ba)}}},t.prototype.ii=function(t,i){var e;if(this.Qa)(s=this.Y)&&s.changeVolume(t,i);else if("_video"===t&&this.s.c&&(this.s.c.volume=this.s.c.volume+Number(i)),"_main"===t){for(s=this.ba,1<(s+=Number(i))&&(s=1),s<0&&(s=0),this.ba=s,e=0;e<this.T.length;e++)this.T[e].c.volume=this.T[e].level*this.ba;for(e=0;e<this.L.length;e++)this.L[e].c.volume=this.L[e].level*this.ba;this.s.c&&(this.s.c.volume=this.ba)}else{var h=this.nc(t);for(e=0;e<h.length;e++){var s,a=h[e];1<(s=(s=a.level)+Number(i))&&(s=1),s<0&&(s=0),a.level=s,a.c.volume=s*this.ba}}},t.prototype.Ch=function(){for(var t=this,i=!1,e=!1,h=0;h<this.T.length;h++){var s=this.T[h];-1!=s.loop&&(this.lb&&this.pa.enabled&&4!=s.mode&&6!=s.mode?this.pa.lg?(s.c.play(),s.c.currentTime=0,e=!(s.aa=0)):i=!0:4==s.mode||6==s.mode||"_background"==s.id&&this.Tc(s.id)||(s.c.play(),s.c.currentTime&&(s.c.currentTime=0)))}i&&setTimeout(function(){t.pa.Mj()},1e3*this.pa.yc),e&&(this.pa.Jj=this.lb.currentTime,this.pa.Ij=setInterval(function(){t.pa.ni()},10))},t.prototype.qh=function(){for(var t;0<this.K.length;)(t=this.K.pop()).c&&(this.ta.removeChild(t.c.__div),delete t.c),t.c=null},t.prototype.dd=function(t){var i=this.isFullscreen!==t;if(this.isFullscreen!==t&&(this.isFullscreen=t,this.update(100)),this.isFullscreen){if(this.$e)try{this.N.webkitRequestFullScreen?this.N.webkitRequestFullScreen():this.N.mozRequestFullScreen?this.N.mozRequestFullScreen():this.N.msRequestFullscreen?this.N.msRequestFullscreen():this.N.requestFullScreen?this.N.requestFullScreen():this.N.requestFullscreen&&this.N.requestFullscreen()}catch(t){}this.N.style.position="absolute",t=this.Qc(),this.N.style.left=window.pageXOffset-t.x+this.margin.left+"px",this.N.style.top=window.pageYOffset-t.y+this.margin.top+"px",document.body.style.overflow="hidden",i&&this.F&&this.F.ggEnterFullscreen&&this.F.ggEnterFullscreen()}else{if(this.$e)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(t){}this.N.style.position="relative",this.N.style.left="0px",this.N.style.top="0px",document.body.style.overflow="",i&&this.F&&this.F.ggExitFullscreen&&this.F.ggExitFullscreen()}this.Kc()},t.prototype.Qd=function(){this.dd(!this.isFullscreen)},t.prototype.mi=function(){this.dd(!0)},t.prototype.exitFullscreen=function(){this.dd(!1)},t.prototype.vi=function(){return this.isFullscreen},t.prototype.Kj=function(t,i,e){this.v.enabled=!0,this.v.active=!0,this.v.hc=0,this.v.startTime=(new Date).getTime(),t&&0!=t&&(this.v.speed=t),i&&(this.v.timeout=i),e&&(this.v.We=e)},t.prototype.Nj=function(){this.v.active=!1,this.v.enabled=!1},t.prototype.Sj=function(){this.v.enabled=!this.v.active,this.v.active=this.v.enabled,this.v.hc=0,this.v.enabled&&(this.v.startTime=(new Date).getTime())},t.prototype.kg=function(t){if(this.lc=document.getElementById(t)){if(this.lc.innerHTML="",this.N=document.createElement("div"),t="top:\t0px;left: 0px;position:relative;",t+="-ms-touch-action: none;",t+="touch-action: none;",t+="text-align: left;",t+=this.sa+"user-select: none;",this.N.setAttribute("style",t),this.lc.appendChild(this.N),this.A=document.createElement("div"),t="top:\t0px;left: 0px;",t+="width:  100px;",t+="height: 100px;",t+="overflow: hidden;",t+="position:absolute;",t+="-ms-touch-action: none;",t+="touch-action: none;",t+=this.sa+"user-select: none;",this.A.setAttribute("style",t),this.N.appendChild(this.A),this.Qa){var i=document.createElement("div");t="top:\t0px;left: 0px;",t+="width:  100%;",t+="height: 100%;",t+="overflow: hidden;",t+="position:absolute;",t+="-ms-touch-action: none;",t+="touch-action: none;",t+=this.sa+"user-select: none;",i.setAttribute("id",this.tf),i.setAttribute("style",t),this.A.appendChild(i)}this.Ta&&(this.Ta.Ac=document.createElement("canvas"),t="top:\t0px;left: 0px;",t+="width:  100px;",t+="height: 100px;",t+="overflow: hidden;",t+="position:absolute;",t+="z-index: 900;",t+=this.sa+"user-select: none;",t+=this.sa+"pointer-events: none;",this.Ta.Ac.setAttribute("style",t),this.N.appendChild(this.Ta.Ac)),this.ta=document.createElement("div"),t="top:\t0px;left: 0px;",t+="width:  100px;",t+="height: 100px;",t+="overflow: hidden;",t+="position:absolute;",t+="z-index: 1000;",this.Rg&&(t+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);"),this.Dc&&!this.ja&&(t+=this.sa+"transform: translateZ(9999999px);"),t+=this.sa+"user-select: none;",this.ta.setAttribute("style",t),this.N.appendChild(this.ta),this.la=document.createElement("canvas"),t="top:\t0px;left: 0px;",t+="width:  100px;",t+="height: 100px;",t+="overflow: hidden;",t+="position:absolute;",t+="z-index: 900;",t+=this.sa+"user-select: none;",t+=this.sa+"pointer-events: none;",this.la.setAttribute("style",t),this.N.appendChild(this.la),this.ma=document.createElement("div"),t="top:\t0px;left: 0px;",t+="position:absolute;",t+="padding: 3px;",t+="visibility: hidden;",t+="z-index: 1100;",this.ma.setAttribute("style",t),this.ma.innerHTML=" Hotspot text!",this.N.appendChild(this.ma),this.divSkin=this.F=this.ta}else alert("container not found!")},t.prototype.jg=function(t){var i,e,h,s=128;for(this.g.Zc&&(this.A.style.backgroundColor=this.g.Zc.replace("0x","#")),t?(s=this.pd,this.Pd=1):this.wc>s&&(s=this.wc),h=0;h<6;h++){var a;e=this.Oa.Ia[h],t?(e.width=this.pd,e.height=this.pd):(e.B=document.createElement("canvas"),e.B.width=this.wc,e.B.height=this.wc,e.width=this.wc,e.height=this.wc,e.ga=e.B.getContext("2d")),i="position:absolute;",i+="left: 0px;",i+="top: 0px;",i+="width: "+s+"px;",i+="height: "+s+"px;",t&&(i+="outline: 1px solid transparent;"),i+=this.sa+"transform-origin: 0% 0%;",i+="-webkit-user-select: none;",i+=this.sa+"transform: ",a="";var o=1;this.bd&&(o=100),a=h<4?a+"rotateY("+-90*h+"deg)":a+"rotateX("+(4==h?-90:90)+"deg)",this.bd&&(a+=" scale("+o+")"),i+=(a+=" translate3d("+-s/2+"px,"+-s/2+"px,"+-s*o/(2*this.Pd)+"px)")+";",e.Hg=a,t||(e.B.setAttribute("style",i),this.A.insertBefore(e.B,this.A.firstChild))}if(!t){for(h=0;h<6;h++)e=this.Oa.Ia[h],""!=this.Nc[h]&&(e.nj=new Image,e.oj.g.onload=function(){},e.oj.g.setAttribute("src",this.ub(this.Nc[h])),this.qb.push(e.nj));for(h=0;h<6;h++)(e=this.Oa.Ia[h]).loaded=!1,e.g=new Image,e.g.onload=function(){},e.g.setAttribute("src",this.ub(this.fe[h])),this.qb.push(e.g)}},t.prototype.rh=function(){var t;if(this.Ib){for(t=0;t<this.Oa.Ia.length;t++)this.Oa.Ia[t].B&&this.Oa.Ia[t].B.setAttribute&&(this.Oa.Ia[t].B.setAttribute("src",this.og),this.A.removeChild(this.Oa.Ia[t].B));if(this.g.H){for(t=0;t<this.g.H.length;t++){var i,e=this.g.H[t];for(i in e.$)if(e.$.hasOwnProperty(i)){var h=e.$[i];h.visible=!1,h.B&&(h.ga&&(h.ga.clear?h.ga.clear():h.ga.clearRect(0,0,h.ga.canvas.width,h.ga.canvas.height)),this.Ye.push(h.B)),h.g&&delete h.g,h.Qb&&this.a.deleteTexture(h.Qb),h.ga=null,h.B=null,h.g=null}delete e.$}delete this.g.H,this.g.H=null}}if(this.a&&this.cb)for(;0<this.cb.length;)(i=this.cb.pop()).$i=!0,this.a.deleteTexture(i);for(t=0;t<this.L.length;t++)this.L[t].ad();for(t=0;t<this.Sa.length;t++)this.Sa[t].ad();for(this.w.Fd=-1,this.la.style.visibility="hidden",this.Db=0,i=[],this.pa.Sd=[],t=0;t<this.T.length;t++)if(0==(e=this.T[t]).mode||1==e.mode)i.push(e);else if(this.lb&&this.pa.enabled&&this.Tc(e.id))this.pa.Sd.push(e),1!=this.o.Ba&&2!=this.o.Ba&&this.pa.rf(e);else{try{e.c.pause()}catch(t){}e.ad()}this.T=i,this.L=[],this.Sa=[],this.s.c&&(this.N.removeChild(this.s.c),this.s.c=null),this.s.Uc=!1,this.s.we=!1},t.prototype.Eg=function(){var t=1,i=-1!=navigator.userAgent.indexOf("Mac");return window.devicePixelRatio&&i&&(t=window.devicePixelRatio),{af:screen.width*t,re:screen.height*t}},t.prototype.Cg=function(){var t=this.Eg();return t.af>t.re?t.af:t.re},t.prototype.Of=function(t,i){var e=(new DOMParser).parseFromString(t,"text/xml");this.mf=t,this.ph(e,i),this.Y&&(this.Y.readConfigString(this.mf),this.Y.setLocked(!0),this.Y.setSlaveMode(!0))},t.prototype.nh=function(t,i,e){try{var h;if((h=new XMLHttpRequest).open("GET",t,!1),h.send(null),h.responseXML){var s=t.lastIndexOf("/");0<=s&&(this.zc=t.substr(0,s+1)),2<=arguments.length&&null!=i&&(this.zc=i),this.Of(h.responseText,e)}else alert("Error loading panorama XML")}catch(t){alert("Error:"+t)}},t.prototype.oh=function(e,h,s,a){var o;o=new XMLHttpRequest;var r=this;o.onload=function(t){if(4<=o.readyState)if(o.responseXML){var i=e.lastIndexOf("/");0<=i&&(r.zc=e.substr(0,i+1)),3<=arguments.length&&null!=s&&(r.zc=s),r.Of(o.responseText,a),h&&h()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+o.statusText)},o.onerror=function(){console.error("Error loading XML:"+o.statusText)},o.open("GET",e,!0),o.send(null)},t.prototype.gf=function(t){this.Fh("beforechangenode",{aj:this.currentNode,uk:t}),""!=this.currentNode&&-1==this.bg.indexOf(this.currentNode)&&this.bg.push(this.currentNode),"{"==t.charAt(0)?this.currentNode=t.substr(1,t.length-2):this.currentNode="",this.va&&this.va.changeActiveNode&&this.va.changeActiveNode(t),this.Fh("changenode",{aj:this.currentNode,tk:t})},t.prototype.Ag=function(){return this.currentNode},t.prototype.Dg=function(){var t;return 0<this.qa.length?(t=this.qa.indexOf(this.currentNode),++t>=this.qa.length&&(t=0),this.qa[t]):""},t.prototype.Hi=function(){var t;return 0<this.qa.length?(t=this.qa.indexOf(this.currentNode),--t<0&&(t=this.qa.length-1),this.qa[t]):""},t.prototype.Zi=function(t){return-1!=this.bg.indexOf(t)},t.prototype.ph=function(t,i){var e=t.firstChild;if(this.Ic=[],this.qa=[],"tour"==e.nodeName){var h,s="";(h=e.getAttributeNode("start"))&&(s=h.nodeValue.toString()),this.hasOwnProperty("startNode")&&this.startNode&&(s=String(this.startNode),this.startNode="");e=e.firstChild;for(var a=h="";e;)"panorama"==e.nodeName&&(h=e.getAttributeNode("id"))&&(h=h.nodeValue.toString(),""==s&&(s=h),""==a&&(a=h),this.Ic[h]=e,this.qa.push(h)),e=e.nextSibling;this.Ic.hasOwnProperty(s)||(this.Vc("Start node "+s+" not found!"),s=a),this.Nf(this.Ic[s],i),this.gf("{"+s+"}"),this.xe=!0}else this.xe=!1,this.Nf(e,i),this.gf(""),this.qa.push("")},t.prototype.Nf=function(t,i){this.qh(),this.Ta&&this.Ta.qj(),this.cd(this.fb),this.rh(),this.Gd=0;for(var e,h,s,a=t.firstChild,o=0;a;){if("view"==a.nodeName)for((h=a.getAttributeNode("fovmode"))&&(this.h.mode=Number(h.nodeValue)),h=a.getAttributeNode("pannorth"),this.pan.Hf=1*(h?h.nodeValue:0),e=a.firstChild;e;)"start"==e.nodeName&&(h=e.getAttributeNode("pan"),this.pan.b=Number(h?h.nodeValue:0),this.pan.eb=this.pan.b,h=e.getAttributeNode("tilt"),this.j.b=Number(h?h.nodeValue:0),this.j.eb=this.j.b,h=e.getAttributeNode("roll"),this.I.b=Number(h?h.nodeValue:0),this.I.eb=this.I.b,h=e.getAttributeNode("fov"),this.h.b=Number(h?h.nodeValue:70),this.h.eb=this.h.b),"min"==e.nodeName&&(h=e.getAttributeNode("pan"),this.pan.min=1*(h?h.nodeValue:0),h=e.getAttributeNode("tilt"),this.j.min=1*(h?h.nodeValue:-90),h=e.getAttributeNode("fov"),this.h.min=1*(h?h.nodeValue:5),this.h.min<1e-20&&(this.h.min=1e-20),h=e.getAttributeNode("fovpixel"),this.h.Ef=1*(h?h.nodeValue:0)),"max"==e.nodeName&&(h=e.getAttributeNode("pan"),this.pan.max=1*(h?h.nodeValue:0),h=e.getAttributeNode("tilt"),this.j.max=1*(h?h.nodeValue:90),h=e.getAttributeNode("fov"),this.h.max=1*(h?h.nodeValue:120),180<=this.h.max&&(this.h.max=179.9)),e=e.nextSibling;if("autorotate"==a.nodeName&&((h=a.getAttributeNode("speed"))&&(this.v.speed=1*h.nodeValue),(h=a.getAttributeNode("delay"))&&(this.v.timeout=1*h.nodeValue),(h=a.getAttributeNode("returntohorizon"))&&(this.v.We=1*h.nodeValue),(h=a.getAttributeNode("nodedelay"))&&(this.v.Gf=1*h.nodeValue),(h=a.getAttributeNode("noderandom"))&&(this.v.Ff=1==h.nodeValue),this.le&&(this.v.enabled=!0,this.v.active=!1),(h=a.getAttributeNode("startloaded"))&&(this.v.Od=1==h.nodeValue,this.v.Od&&(this.v.active=!1)),(h=a.getAttributeNode("useanimation"))&&(this.v.Ph=1==h.nodeValue)),"animation"==a.nodeName)for(this.Bc=[],e=a.firstChild;e;){if("clip"==e.nodeName){for(this.S={},(h=e.getAttributeNode("animtitle"))&&(this.S.animtitle=h.nodeValue.toString()),(h=e.getAttributeNode("cliptitle"))&&(this.S.cliptitle=h.nodeValue.toString()),(h=e.getAttributeNode("nodeid"))&&(this.S.nodeid=h.nodeValue.toString()),(h=e.getAttributeNode("length"))&&(this.S.length=Number(h.nodeValue)),(h=e.getAttributeNode("animtype"))&&(this.S.animtype=Number(h.nodeValue)),(h=e.getAttributeNode("nextcliptitle"))&&(this.S.nextcliptitle=h.nodeValue.toString()),(h=e.getAttributeNode("nextclipnodeid"))&&(this.S.nextclipnodeid=h.nodeValue.toString()),(h=e.getAttributeNode("transitiontype"))&&(this.S.transitiontype=Number(h.nodeValue)),l=e.firstChild,this.S.keyframes=[];l;){if("keyframe"==l.nodeName){var r={};(h=l.getAttributeNode("time"))&&(r.time=Number(h.nodeValue)),(h=l.getAttributeNode("value"))&&(r.value=Number(h.nodeValue));var n=0;(h=l.getAttributeNode("type"))&&(r.type=Number(h.nodeValue),n=Number(h.nodeValue)),(h=l.getAttributeNode("property"))&&(r.property=Number(h.nodeValue)),1!=n&&2!=n||((h=l.getAttributeNode("bezierintime"))&&(r.bezierintime=Number(h.nodeValue)),(h=l.getAttributeNode("bezierinvalue"))&&(r.bezierinvalue=Number(h.nodeValue)),(h=l.getAttributeNode("bezierouttime"))&&(r.bezierouttime=Number(h.nodeValue)),(h=l.getAttributeNode("bezieroutvalue"))&&(r.bezieroutvalue=Number(h.nodeValue))),this.S.keyframes.push(r)}l=l.nextSibling}this.jc==this.S.cliptitle&&this.Sf(this.S.keyframes[0].value,this.S.keyframes[1].value,this.S.keyframes[2].value),this.Bc.push(this.S)}e=e.nextSibling}if("input"==a.nodeName&&(s||(s=a)),s)for(e=0;e<6;e++)h=s.getAttributeNode("prev"+e+"url"),this.Nc[e]=h?String(h.nodeValue):"";if("altinput"==a.nodeName&&(e=0,(h=a.getAttributeNode("screensize"))&&(e=1*h.nodeValue),0<e&&e<=this.Cg()&&o<e&&(o=e,s=a)),"control"==a.nodeName&&this.le)for((h=a.getAttributeNode("simulatemass"))&&(this.D.enabled=1==h.nodeValue),(h=a.getAttributeNode("locked"))&&(this.C.Va=1==h.nodeValue),h&&(this.C.Id=1==h.nodeValue),(h=a.getAttributeNode("lockedmouse"))&&(this.C.Va=1==h.nodeValue),(h=a.getAttributeNode("lockedkeyboard"))&&(this.C.Id=1==h.nodeValue),(h=a.getAttributeNode("lockedkeyboardzoom"))&&(this.C.Cf=1==h.nodeValue),(h=a.getAttributeNode("lockedwheel"))&&(this.C.Df=1==h.nodeValue),(h=a.getAttributeNode("invertwheel"))&&(this.C.Og=1==h.nodeValue),(h=a.getAttributeNode("speedwheel"))&&(this.C.Ah=1*h.nodeValue),(h=a.getAttributeNode("invertcontrol"))&&(this.C.rc=1==h.nodeValue),(h=a.getAttributeNode("sensitivity"))&&(this.C.sensitivity=1*h.nodeValue,this.C.sensitivity<1&&(this.C.sensitivity=1)),(h=a.getAttributeNode("dblclickfullscreen"))&&(this.C.of=1==h.nodeValue),(h=a.getAttributeNode("contextfullscreen"))&&(this.C.ee=1==h.nodeValue),(h=a.getAttributeNode("hideabout"))&&(this.C.te=1==h.nodeValue),e=a.firstChild;e;)"menulink"==e.nodeName&&(r={text:"",url:""},h=e.getAttributeNode("text"),r.text=h.nodeValue,h=e.getAttributeNode("url"),r.url=h.nodeValue,this.Ld.push(r)),e=e.nextSibling;if("transition"==a.nodeName&&((h=a.getAttributeNode("enabled"))&&(this.o.enabled=1==h.nodeValue),(h=a.getAttributeNode("blendtime"))&&(this.o.fg=h.nodeValue),(h=a.getAttributeNode("blendcolor"))&&(this.o.be=h.nodeValue.toString()),(h=a.getAttributeNode("type"))&&(this.o.type=h.nodeValue.toString()),(h=a.getAttributeNode("softedge"))&&(this.o.Zb=1*h.nodeValue),(h=a.getAttributeNode("zoomin"))&&(this.o.Ba=h.nodeValue),(h=a.getAttributeNode("zoomout"))&&(this.o.Lb=h.nodeValue),(h=a.getAttributeNode("zoomfov"))&&(this.o.cf=h.nodeValue),(h=a.getAttributeNode("zoomspeed"))&&(this.o.$d=h.nodeValue),(h=a.getAttributeNode("zoomoutpause"))&&(this.o.df=1==h.nodeValue)),"soundstransition"==a.nodeName&&((h=a.getAttributeNode("enabled"))&&(this.pa.enabled=1==h.nodeValue),(h=a.getAttributeNode("transitiontime"))&&(this.pa.yc=1*h.nodeValue),(h=a.getAttributeNode("crossfade"))&&(this.pa.lg=1==h.nodeValue)),"userdata"==a.nodeName&&(this.userdata=this.Vd=this.ke(a)),"hotspots"==a.nodeName)for(e=a.firstChild;e;)"label"==e.nodeName&&(r=this.w.Xf,(h=e.getAttributeNode("enabled"))&&(r.enabled=1==h.nodeValue),(h=e.getAttributeNode("width"))&&(r.width=1*h.nodeValue),(h=e.getAttributeNode("height"))&&(r.height=1*h.nodeValue),(h=e.getAttributeNode("textcolor"))&&(r.Yf=1*h.nodeValue),(h=e.getAttributeNode("textalpha"))&&(r.Wf=1*h.nodeValue),(h=e.getAttributeNode("background"))&&(r.background=1==h.nodeValue),(h=e.getAttributeNode("backgroundalpha"))&&(r.Nb=1*h.nodeValue),(h=e.getAttributeNode("backgroundcolor"))&&(r.mb=1*h.nodeValue),(h=e.getAttributeNode("border"))&&(r.ff=1*h.nodeValue),(h=e.getAttributeNode("bordercolor"))&&(r.ob=1*h.nodeValue),(h=e.getAttributeNode("borderalpha"))&&(r.Ob=1*h.nodeValue),(h=e.getAttributeNode("borderradius"))&&(r.ef=1*h.nodeValue),(h=e.getAttributeNode("wordwrap"))&&(r.bf=1==h.nodeValue)),"polystyle"==e.nodeName&&((h=e.getAttributeNode("mode"))&&(this.w.mode=1*h.nodeValue),(h=e.getAttributeNode("bordercolor"))&&(this.w.ob=1*h.nodeValue),(h=e.getAttributeNode("backgroundcolor"))&&(this.w.mb=1*h.nodeValue),(h=e.getAttributeNode("borderalpha"))&&(this.w.Ob=1*h.nodeValue),(h=e.getAttributeNode("backgroundalpha"))&&(this.w.Nb=1*h.nodeValue),(h=e.getAttributeNode("handcursor"))&&(this.w.Rc=1==h.nodeValue)),"hotspot"==e.nodeName&&((h=new Y(this)).type="point",h.Ya(e),this.K.push(h)),"polyhotspot"==e.nodeName&&((h=new Y(this)).type="poly",h.Ya(e),this.K.push(h)),e=e.nextSibling;if("sounds"==a.nodeName||"media"==a.nodeName)for(e=a.firstChild;e;)"sound"==e.nodeName&&((h=new U(this)).Ya(e),this.Qa||h.addElement()),"video"==e.nodeName&&((h=new V(this)).Ya(e),this.Qa||h.addElement()),"image"==e.nodeName&&((h=new W(this)).Ya(e),this.Qa||h.addElement()),"lensflare"==e.nodeName&&this.Ta&&((h=new X(this)).Ya(e),this.Ta.Hd.push(h)),e=e.nextSibling;a=a.nextSibling}if(i&&""!=i&&(0<(a=i.toString().split("/")).length&&("N"==(h=String(a[0])).charAt(0)?this.Rf(Number(h.substr(1))):"S"==h.charAt(0)?this.Rf(-180+Number(h.substr(1))):this.Qf(Number(h))),1<a.length&&this.Tf(Number(a[1])),2<a.length&&this.Me(Number(a[2]))),s){for(e=0;e<6;e++)(h=s.getAttributeNode("tile"+e+"url"))&&(this.fe[e]=String(h.nodeValue)),h=s.getAttributeNode("tile"+e+"url1");for(e=0;e<6;e++)(h=s.getAttributeNode("prev"+e+"url"))&&(this.Nc[e]=String(h.nodeValue));for((h=s.getAttributeNode("tilesize"))&&(this.wc=1*h.nodeValue),(h=s.getAttributeNode("canvassize"))&&(this.pd=Number(h.nodeValue)),(h=s.getAttributeNode("tilescale"))&&(this.Pd=1*h.nodeValue),(h=s.getAttributeNode("leveltileurl"))&&(this.g.dh=h.nodeValue),(h=s.getAttributeNode("leveltilesize"))&&(this.g.Z=Number(h.nodeValue)),(h=s.getAttributeNode("levelbias"))&&(this.g.ah=Number(h.nodeValue)),(h=s.getAttributeNode("levelbiashidpi"))&&(this.g.bh=Number(h.nodeValue)),h=s.getAttributeNode("overlap"),this.ua.I=0,this.ua.pitch=0,h&&(this.g.Ua=Number(h.nodeValue)),(h=s.getAttributeNode("levelingroll"))&&(this.ua.I=Number(h.nodeValue)),(h=s.getAttributeNode("levelingpitch"))&&(this.ua.pitch=Number(h.nodeValue)),this.Db=0,(h=s.getAttributeNode("flat"))&&1==h.nodeValue&&(this.Db=2),h=s.getAttributeNode("width"),this.g.width=1*(h?h.nodeValue:1),h=s.getAttributeNode("height"),this.g.height=1*(h?h.nodeValue:this.g.width),this.s.src=[],this.g.H=[],e=s.firstChild;e;){if("preview"==e.nodeName&&((h=e.getAttributeNode("color"))&&(this.g.Zc=h.nodeValue),(h=e.getAttributeNode("strip"))&&(this.g.mh=1==h.nodeValue)),"video"==e.nodeName){(h=e.getAttributeNode("format"))&&(this.s.format=h.nodeValue.toString()),(h=e.getAttributeNode("bleed"))&&(this.s.ae=Number(h.nodeValue)),(h=e.getAttributeNode("endaction"))&&(this.s.ud=String(h.nodeValue)),(h=e.getAttributeNode("width"))&&(this.s.width=Number(h.nodeValue)),(h=e.getAttributeNode("height"))&&(this.s.height=Number(h.nodeValue));for(var l=e.firstChild;l;)"source"==l.nodeName&&(h=l.getAttributeNode("url"))&&this.s.src.push(h.nodeValue.toString()),l=l.nextSibling}"level"==e.nodeName&&(s={width:0,height:0,cache:!1,Mf:!1,La:0,Gb:0,$:[]},h=e.getAttributeNode("width"),s.width=1*(h?h.nodeValue:1),h=e.getAttributeNode("height"),s.height=1*(h?h.nodeValue:s.width),(h=e.getAttributeNode("preload"))&&(s.cache=1==h.nodeValue),(h=e.getAttributeNode("preview"))&&(s.Mf=1==h.nodeValue),s.La=Math.floor((s.width+this.g.Z-1)/this.g.Z),s.Gb=Math.floor((s.height+this.g.Z-1)/this.g.Z),this.g.H.push(s)),e=e.nextSibling}this.g.Zg=this.g.H.length}this.Td&&(this.ja=this.Ib=!1,this.pb||(this.pb=document.createElement("canvas"),this.pb.width=100,this.pb.height=100,this.pb.id="dummycanvas",this.A.appendChild(this.pb)),this.Lc()),this.ja&&this.a&&(this.Mg(this.Pd),this.Ng()),this.Ib&&(0<this.g.H.length?this.jg(!0):this.jg(!1),this.Gd=0);var d=this;if(0<this.g.H.length&&this.g.mh&&0==this.Db&&((s=new Image).onload=this.Yi(s),s.setAttribute("src",this.Ve(6,this.g.H.length-1,0,0))),0<this.s.src.length){for(this.s.c=document.createElement("video"),this.s.c.setAttribute("style","display: none; max-width:none;"),this.s.c.Xh=!0,this.s.c.volume=this.ba,this.N.appendChild(this.s.c),this.s.Uc=!1,this.s.c.oncanplay=function(){if(!d.s.Uc){d.s.we=!0;var t,i,e,h,s,a,o,r=[],n=new x,l=d.a,u=d.s.c.videoWidth/3;for(t=0;t<6;t++)for(a=(h=t%3*u+d.s.ae)+u-2*d.s.ae,s=4,3<=t&&(s+=u),o=s+u-2*d.s.ae,e=0;e<4;e++){for(n.x=-1,n.y=-1,n.z=1,i=0;i<e;i++)n.th();r.push((0<n.x?h:a)/(3*u),(0<n.y?s:o)/(2*u))}l.bindBuffer(l.ARRAY_BUFFER,d.s.Se),l.bufferData(l.ARRAY_BUFFER,new Float32Array(r),l.STATIC_DRAW)}},"exit"==this.s.ud?this.s.c.onended=function(){d.s.we=!1,d.s.Uc=!1,d.N.removeChild(this.s.c),d.s.c=null}:"stop"==this.s.ud?d.s.c.onended=function(){}:"{"==this.s.ud.charAt(0)?this.s.c.onended=function(){d.Wc(d.s.ud,"$fwd")}:this.s.c.loop=!0,s=0;s<this.s.src.length;s++)(a=document.createElement("source")).setAttribute("src",this.ub(this.s.src[s])),this.s.c.appendChild(a);this.s.c.play()}this.cg(),this.o.xc||this.Ch(),this.update(),this.le&&this.F&&this.F.ggViewerInit&&this.F.ggViewerInit(),this.le=!1,this.se=!0,this.Lc()},t.prototype.If=function(t,i){0<t.length&&(".xml"==t.substr(t.length-4)||".swf"==t.substr(t.length-4)||"{"==t.charAt(0)?this.Wc(this.ub(t),i):window.open(this.ub(t),i))},t.prototype.Lj=function(){this.se=this.isLoaded=!1,this.checkLoaded=this.qb=[],this.Ee=0,this.F&&this.F.ggReLoaded&&this.F.ggReLoaded()},t.prototype.Wc=function(t,i){this.Lj(),this.va&&this.va.hotspotProxyOut&&this.va.hotspotProxyOut(this.ka.id),".swf"==t.substr(t.length-4)&&(t=t.substr(0,t.length-4)+".xml");var e="";if(i&&(e=i.toString()),""!=(e=(e=(e=(e=(e=(e=(e=e.replace("$cur",this.pan.b+"/"+this.j.b+"/"+this.h.b)).replace("$fwd","N"+this.oe()+"/"+this.j.b+"/"+this.h.b)).replace("$bwd","S"+this.oe()+"/"+this.j.b+"/"+this.h.b)).replace("$ap",String(this.pan.b))).replace("$an",String(this.oe()))).replace("$at",String(this.j.b))).replace("$af",String(this.h.b)))){var h=e.split("/");3<h.length&&""!=h[3]&&(this.startNode=h[3])}if(this.ha(),"{"==t.charAt(0)){if(h=t.substr(1,t.length-2),!this.Ic[h])return void this.Vc("invalid node id: "+h);var s;0==this.Db&&this.o.enabled&&this.ja&&this.o.kb&&(this.o.gd||this.o.xc||(this.o.hh=this.C.Va,this.o.Ug=this.C.Id,this.Oe(!0),this.Ne(!0)),"wipeleftright"==this.o.type?s=1:"wiperightleft"==this.o.type?s=2:"wipetopbottom"==this.o.type?s=3:"wipebottomtop"==this.o.type?s=4:"wiperandom"==this.o.type&&(s=Math.ceil(4*Math.random())),this.o.nf=s,this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.o.kb),this.a.viewport(0,0,this.o.kb.width,this.o.kb.height),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.o.Rd=!0,this.kd(),this.o.Rd=!1,this.a.bindFramebuffer(this.a.FRAMEBUFFER,null),this.a.viewport(0,0,this.Ra.width,this.Ra.height),s=new Date,this.ka!=this.fb?(this.o.Yd=this.ka.sb/this.l.width,this.o.Zd=1-this.ka.Xa/this.l.height):(this.o.Yd=.5,this.o.Zd=.5),1!=this.o.Ba&&2!=this.o.Ba?(this.o.Vf=s.getTime(),this.o.gd=!0):(this.o.Vh=s.getTime(),this.o.xc=!0,this.o.Ma=Math.sin(this.Wb()/2*Math.PI/180)/Math.sin(this.o.cf/2*Math.PI/180),this.o.Ma=Math.max(this.o.Ma,1),this.o.Uh=1/this.o.$d*this.o.Ma*.3));this.Nf(this.Ic[h],e),this.gf(t),this.o.enabled&&this.ja&&(1==this.o.Lb||2==this.o.Lb||3==this.o.Lb)&&(this.o.Qe=this.ne(),this.o.Re=this.pe(),this.o.ed=this.Wb(),1==this.o.Lb||3==this.o.Lb?this.Pe(this.o.cf):this.Pe(this.yd()+(this.yd()-this.o.cf)),this.o.df||1==this.o.Ba||2==this.o.Ba||this.moveTo(this.o.Qe,this.o.Re,this.o.ed,this.o.$d)),this.Y&&this.Y.openNext(t,e)}else this.nh(t,null,e);this.update(5)},t.prototype.Ai=function(){return this.qa.slice(0)},t.prototype.ke=function(t){var i,e;if((e=[]).title="",e.description="",e.author="",e.datetime="",e.copyright="",e.source="",e.information="",e.comment="",e.latitude=0,e.longitude=0,e.tags=[],t&&((i=t.getAttributeNode("title"))&&(e.title=i.nodeValue.toString()),(i=t.getAttributeNode("description"))&&(e.description=i.nodeValue.toString()),(i=t.getAttributeNode("author"))&&(e.author=i.nodeValue.toString()),(i=t.getAttributeNode("datetime"))&&(e.datetime=i.nodeValue.toString()),(i=t.getAttributeNode("copyright"))&&(e.copyright=i.nodeValue.toString()),(i=t.getAttributeNode("source"))&&(e.source=i.nodeValue.toString()),(i=t.getAttributeNode("info"))&&(e.information=i.nodeValue.toString()),(i=t.getAttributeNode("comment"))&&(e.comment=i.nodeValue.toString()),(i=t.getAttributeNode("latitude"))&&(e.latitude=Number(i.nodeValue)),(i=t.getAttributeNode("longitude"))&&(e.longitude=Number(i.nodeValue)),i=t.getAttributeNode("tags"))){for(t=i.nodeValue.toString().split("|"),i=0;i<t.length;i++)""==t[i]&&(t.splice(i,1),i--);e.tags=t}return e},t.prototype.vf=function(t){if(!t)return this.Vd;if(t=this.Ic[t])for(t=t.firstChild;t;){if("userdata"==t.nodeName)return this.ke(t);t=t.nextSibling}return this.ke()},t.prototype.Bi=function(t){var i=[];return""!=(t=this.vf(t)).latitude&&0!=t.latitude&&0!=t.longitude&&(i.push(t.latitude),i.push(t.longitude)),i},t.prototype.Ci=function(t){return this.vf(t).title},t.prototype.Bg=function(t,i){var e;for(e=0;e<this.S.keyframes.length;e++)if(this.S.keyframes[e].time==t&&this.S.keyframes[e].property==i)return this.S.keyframes[e];return!1},t.prototype.zi=function(t){var i,e=1e5,h=t,s=!1;for(i=0;i<this.S.keyframes.length;i++)this.S.keyframes[i].property==t.property&&this.S.keyframes[i].time>t.time&&this.S.keyframes[i].time<e&&(e=(h=this.S.keyframes[i]).time,s=!0);return!!s&&h},t.prototype.kk=function(){this.s.c&&this.s.c.play()},t.prototype.lk=function(){this.s.c&&(this.s.c.pause(),this.s.c.time=0)},t.prototype.jk=function(){this.s.c&&this.s.c.pause()},t.prototype.Ej=function(t){this.s.c&&(t<0&&(t=0),t>this.s.c.duration&&(t=this.s.c.duration-.1),this.s.c.currentTime=t,this.update())},t.prototype.Mi=function(){return this.s.c?this.s.c.currentTime:0},t.prototype.Li=function(){if(this.s.c)return this.s.c},t}();(window.pano2vrPlayer=Z).prototype.readConfigUrlAsync=Z.prototype.oh,Z.prototype.setMargins=Z.prototype.wh,Z.prototype.addListener=Z.prototype.addListener,Z.prototype.removeEventListener=Z.prototype.removeEventListener,Z.prototype.detectBrowser=Z.prototype.ng,Z.prototype.initWebGL=Z.prototype.qc,Z.prototype.getPercentLoaded=Z.prototype.Fi,Z.prototype.setBasePath=Z.prototype.vj,Z.prototype.setViewerSize=Z.prototype.yh,Z.prototype.getViewerSize=Z.prototype.Ni,Z.prototype.setMargins=Z.prototype.wh,Z.prototype.setSkinObject=Z.prototype.Dj,Z.prototype.changeViewMode=Z.prototype.gi,Z.prototype.viewMode=Z.prototype.mk,Z.prototype.changePolygonMode=Z.prototype.ei,Z.prototype.polygonMode=Z.prototype.mj,Z.prototype.changeViewState=Z.prototype.hi,Z.prototype.viewState=Z.prototype.nk,Z.prototype.setRenderFlags=Z.prototype.Bj,Z.prototype.getRenderFlags=Z.prototype.Ii,Z.prototype.setMaxTileCount=Z.prototype.xh,Z.prototype.getVFov=Z.prototype.Wb,Z.prototype.setVFov=Z.prototype.Pe,Z.prototype.updatePanorama=Z.prototype.kd,Z.prototype.isTouching=Z.prototype.Pi,Z.prototype.getIsMobile=Z.prototype.wi,Z.prototype.setIsMobile=Z.prototype.yj,Z.prototype.getIsAutorotating=Z.prototype.ui,Z.prototype.getIsTileLoading=Z.prototype.xi,Z.prototype.getLastActivity=Z.prototype.yi,Z.prototype.getPan=Z.prototype.ne,Z.prototype.getPanNorth=Z.prototype.oe,Z.prototype.getPanDest=Z.prototype.Di,Z.prototype.getPanN=Z.prototype.Ei,Z.prototype.setPan=Z.prototype.Qf,Z.prototype.setPanNorth=Z.prototype.Rf,Z.prototype.changePan=Z.prototype.ce,Z.prototype.changePanLog=Z.prototype.di,Z.prototype.getTilt=Z.prototype.pe,Z.prototype.getTiltDest=Z.prototype.Ki,Z.prototype.setTilt=Z.prototype.Tf,Z.prototype.changeTilt=Z.prototype.de,Z.prototype.changeTiltLog=Z.prototype.fi,Z.prototype.getFov=Z.prototype.yd,Z.prototype.getFovDest=Z.prototype.si,Z.prototype.setFov=Z.prototype.Me,Z.prototype.changeFov=Z.prototype.hg,Z.prototype.changeFovLog=Z.prototype.qd,Z.prototype.getRoll=Z.prototype.Ji,Z.prototype.setRoll=Z.prototype.Cj,Z.prototype.setPanTilt=Z.prototype.Aj,Z.prototype.setPanTiltFov=Z.prototype.Sf,Z.prototype.setDefaultView=Z.prototype.wj,Z.prototype.setLocked=Z.prototype.zj,Z.prototype.setLockedMouse=Z.prototype.Oe,Z.prototype.setLockedKeyboard=Z.prototype.Ne,Z.prototype.setLockedWheel=Z.prototype.vh,Z.prototype.moveTo=Z.prototype.moveTo,Z.prototype.moveToDefaultView=Z.prototype.Wi,Z.prototype.addHotspotElements=Z.prototype.cg,Z.prototype.playSound=Z.prototype.Fe,Z.prototype.playPauseSound=Z.prototype.lh,Z.prototype.pauseSound=Z.prototype.Kf,Z.prototype.activateSound=Z.prototype.Yh,Z.prototype.isPlaying=Z.prototype.Tc,Z.prototype.stopSound=Z.prototype.Oj,Z.prototype.setVolume=Z.prototype.Fj,Z.prototype.changeVolume=Z.prototype.ii,Z.prototype.removeHotspots=Z.prototype.qh,Z.prototype.addHotspot=Z.prototype.Zh,Z.prototype.updateHotspot=Z.prototype.Zj,Z.prototype.removeHotspot=Z.prototype.pj,Z.prototype.setActiveHotspot=Z.prototype.cd,Z.prototype.getPointHotspotIds=Z.prototype.Gi,Z.prototype.getHotspot=Z.prototype.ti,Z.prototype.setFullscreen=Z.prototype.dd,Z.prototype.toggleFullscreen=Z.prototype.Qd,Z.prototype.enterFullscreen=Z.prototype.mi,Z.prototype.exitFullscreen=Z.prototype.exitFullscreen,Z.prototype.getIsFullscreen=Z.prototype.vi,Z.prototype.startAutorotate=Z.prototype.Kj,Z.prototype.stopAutorotate=Z.prototype.Nj,Z.prototype.toggleAutorotate=Z.prototype.Sj,Z.prototype.createLayers=Z.prototype.kg,Z.prototype.removePanorama=Z.prototype.rh,Z.prototype.getScreenResolution=Z.prototype.Eg,Z.prototype.getMaxScreenResolution=Z.prototype.Cg,Z.prototype.readConfigString=Z.prototype.Of,Z.prototype.readConfigUrl=Z.prototype.nh,Z.prototype.readConfigUrlAsync=Z.prototype.oh,Z.prototype.readConfigXml=Z.prototype.ph,Z.prototype.openUrl=Z.prototype.If,Z.prototype.openNext=Z.prototype.Wc,Z.prototype.getNodeIds=Z.prototype.Ai,Z.prototype.getNodeUserdata=Z.prototype.vf,Z.prototype.getNodeLatLng=Z.prototype.Bi,Z.prototype.getNodeTitle=Z.prototype.Ci,Z.prototype.getCurrentNode=Z.prototype.Ag,Z.prototype.getNextNode=Z.prototype.Dg,Z.prototype.getPrevNode=Z.prototype.Hi,Z.prototype.getCurrentPointHotspots=Z.prototype.ri,Z.prototype.nodeVisited=Z.prototype.Zi,Z.prototype.setElementIdPrefix=Z.prototype.xj,Z.prototype.videoPanoPlay=Z.prototype.kk,Z.prototype.videoPanoStop=Z.prototype.lk,Z.prototype.videoPanoPause=Z.prototype.jk,Z.prototype.getVideoPanoTime=Z.prototype.Mi,Z.prototype.setVideoPanoTime=Z.prototype.Ej,Z.prototype.getVideoPanoObject=Z.prototype.Li;